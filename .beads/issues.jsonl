{"id":"eu-01v","title":"Benchmarks in Tester","description":"## Analysis: Benchmarks in Tester\n\n### Goal\nAdd **performance benchmarking capabilities** to the eucalypt test runner (`eu -T`) for eucalypt users to benchmark their own code.\n\n### Scope\n**User-facing benchmarking** (separate from internal development):\n- **Target audience**: Eucalypt users testing their own code\n- **Separate from `benches/`**: Internal benchmarks vs user benchmarks\n- **Primary metric**: Execution time measurement\n- **Integration**: Built into existing `eu -T` test infrastructure\n\n### Use Cases\n- **Performance testing**: Measure execution time of eucalypt functions\n- **Optimization validation**: Verify performance improvements\n- **Regression detection**: Catch performance regressions in user code\n- **Algorithm comparison**: Compare different implementation approaches\n\n### Implementation Considerations\n\n#### Test File Integration\n**How to define benchmarks in test files?**\n\n**Option 1: Metadata-based**\n```eu\n{\n  benchmark: true\n  iterations: 1000\n}\n` { target: :bench-sort }\nsort-test: {\n  data: [3,1,4,1,5,9,2,6]\n  result: data sort\n}\n```\n\n**Option 2: Special Target Prefix**\n```eu\n` { target: :benchmark-sort }\nsort-performance: {\n  # Benchmark this target\n  data: large-dataset\n  result: data sort\n}\n```\n\n#### Benchmark Execution\n- **Multiple iterations**: Average execution time over runs\n- **Warmup**: Initial runs to stabilize performance\n- **Statistical analysis**: Mean, median, standard deviation\n- **Timing precision**: Microsecond-level measurement\n\n### Benefits\n- **User empowerment**: Users can measure their own code performance\n- **Optimization guidance**: Identify performance bottlenecks\n- **Regression prevention**: Catch performance issues early\n\n### Priority\nLow - useful feature but not essential functionality\n","status":"open","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-17T11:58:08.650038Z","created_by":"eucalypt_private/crew/koala","updated_at":"2026-01-17T12:15:03.588066Z","external_ref":"gh-34","labels":["tester"]}
{"id":"eu-0cb","title":"Harness test: ↑ with nested expressions","description":"Add test for ↑ with nested expressions like ↑↑nested","status":"open","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-20T11:27:55.166558Z","created_by":"greg","updated_at":"2026-01-20T11:27:55.166558Z","dependencies":[{"issue_id":"eu-0cb","depends_on_id":"eu-2b4","type":"blocks","created_at":"2026-01-20T11:28:09.366321Z","created_by":"greg"}]}
{"id":"eu-0mr","title":"Render to string / recursive invocation","description":"## Analysis: Render to string / recursive invocation\n\n### Goal\n**`eval` function capability** - calling eucalypt from within eucalypt to render expressions as strings.\n\n### Use Case Example\n```eu\n# Render eucalypt expression to string\ntemplate: \"{ name: 'Alice', age: 25 }\"\nresult: eval(template)  # Returns string representation\n\n# Dynamic template processing\nexpression: \"items map(.name) join(', ')\"\noutput: eval(expression, {items: data.users})\n```\n\n### Design Challenges\n\n#### Purity and I/O Concerns\n**Major issue**: Eucalypt driver has extensive capabilities built-in rather than in language:\n- **File I/O**: Import/export functionality\n- **Command line**: Access to CLI arguments\n- **Environment**: System environment access\n- **Impurity**: Driver handles impure operations\n\n#### Capability Questions\n1. **What can `eval` access?** - Full driver capabilities or restricted subset?\n2. **I/O permissions**: Can eval'd code import files, access environment?\n3. **Security**: Arbitrary code execution risks\n4. **Performance**: Overhead of recursive evaluation\n5. **Error handling**: How to report eval errors in context?\n\n### Implementation Complexity\n\n#### Architecture Issues\n- **Driver vs language**: Much functionality in `eu` driver, not language core\n- **Execution context**: How to provide clean evaluation environment\n- **Resource isolation**: Preventing eval from affecting parent execution\n- **State management**: Sharing vs isolating evaluation state\n\n#### Technical Challenges\n- **Parser integration**: Re-parsing within execution\n- **STG compilation**: Compiling expressions dynamically\n- **Memory management**: GC integration for dynamic code\n- **Error propagation**: Meaningful error messages\n\n### Design Work Required\n\n#### Capability Model\n1. **Pure eval**: Only pure computation, no I/O\n2. **Restricted eval**: Limited safe operations\n3. **Full eval**: Complete driver capabilities (dangerous)\n\n#### API Design\n```eu\n# Basic string evaluation\neval(\"2 + 2\")  # → \"4\"\n\n# With context\neval(\"x + y\", {x: 10, y: 20})  # → \"30\"\n\n# Template rendering\neval-template(template-string, data-context)\n\n# Safe evaluation (pure only)\neval-pure(expression, context)\n```\n\n### Use Cases\n- **Template systems**: Dynamic template generation\n- **Configuration**: Runtime expression evaluation\n- **Metaprogramming**: Code generation within eucalypt\n- **Debugging**: Runtime expression evaluation\n\n### Security Considerations\n- **Code injection**: Arbitrary code execution risks\n- **Resource limits**: Prevent infinite recursion, memory exhaustion\n- **Sandboxing**: Isolate eval'd code capabilities\n- **Audit trail**: Track eval usage for security\n\n### Priority\nLow - needs extensive design work due to purity/capability concerns\n\n### Alternative Approaches\n1. **Template functions**: Built-in templating without full eval\n2. **Restricted DSL**: Limited expression evaluation\n3. **External tool**: Separate evaluation utility\n4. **Pure subset**: Eval only for pure computations\n\n### Related Considerations\n- **Issue #21 (CLI args)**: How does eval access command line?\n- **Import system**: Should eval be able to import files?\n- **Error handling**: Integration with existing error system\n- **Performance**: Compilation overhead for dynamic expressions\n\n### Design Questions\n1. **Scope of capabilities**: What can eval'd code do?\n2. **Error handling**: How to handle eval failures?\n3. **Performance**: Acceptable overhead for dynamic evaluation?\n4. **Security model**: How to prevent malicious eval usage?\n5. **Integration**: How does this fit with driver architecture?\n","status":"open","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-17T11:58:08.399975Z","created_by":"eucalypt_private/crew/koala","updated_at":"2026-01-17T12:15:03.20171Z","external_ref":"gh-18","labels":["topic"]}
{"id":"eu-0pw","title":"Create Formatter struct","description":"Create Formatter struct with configuration and mode state for tracking formatting context.","status":"closed","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-20T10:53:03.017763Z","created_by":"greg","updated_at":"2026-01-22T21:06:08.206854Z","closed_at":"2026-01-22T21:06:08.206854Z","close_reason":"Already implemented"}
{"id":"eu-0tp","title":"Error propagation silently swallowed in core module","description":"Multiple locations in the core module silently discard errors instead of propagating them.\n\n**Locations:**\n- src/core/simplify/compress.rs:57 - `Err(_) =\u003e None, //TODO: propagate`\n- src/core/desugar/rowan_ast.rs:767 - TODO mentions missing native implementation\n\n**Impact:** Silent error swallowing can mask bugs and make debugging difficult.\n\n**Recommendation:** Replace `Err(_) =\u003e None` patterns with proper error propagation using `?` operator or explicit error handling.","status":"closed","priority":2,"issue_type":"bug","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-20T15:49:03.501142Z","created_by":"eucalypt_private/polecats/obsidian","updated_at":"2026-01-21T18:48:28.371582Z","closed_at":"2026-01-21T18:40:56.623852Z","close_reason":"Refiled to eu-7ey9","labels":["code-quality","error-handling"]}
{"id":"eu-0yz","title":"High unwrap() usage across codebase (466 occurrences)","description":"The codebase has 466 unwrap() calls across 73 files. While many are in tests or static initialization, some are in runtime paths.\n\n**High-count files:**\n- src/eval/intrinsics.rs: 66 occurrences (static init - acceptable)\n- src/dotted_lookup_integration_tests.rs: 27 (tests - acceptable)\n- src/eval/machine/vm.rs: 14 occurrences (runtime concern)\n- src/eval/stg/compiler.rs: 10 occurrences\n\n**Recommendation:** \n1. Audit runtime path unwrap() calls for panic risk\n2. Replace with expect() with descriptive messages or proper error handling\n3. Consider using ? operator where Result is appropriate","status":"open","priority":3,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-20T15:49:11.813858Z","created_by":"eucalypt_private/polecats/obsidian","updated_at":"2026-01-21T18:48:28.362132Z","labels":["code-quality","robustness"]}
{"id":"eu-18v","title":"Tag handlers for JSON","description":"## Analysis: Tag handlers for JSON\n\n### Current Understanding\nThis issue is about **custom export handlers** for specific data types or metadata-tagged structures when rendering to JSON (not about YAML tags).\n\n### Current State\n- **ZDT recognition**: Can specially handle ZDTs via data-type tags in STG objects\n- **Limited customization**: No general mechanism for custom export handlers\n\n### Requirements\n\n#### Type-based Export\nHandle built-in types specially when exporting to JSON:\n- **ZDTs**: Format as ISO 8601 strings\n- **Symbols**: Convert to strings  \n- **Other types**: Custom representation as needed\n\n#### Metadata-based Export\nCustom export based on metadata tags:\n```eu\n{\n  export-json: \"custom-format\"\n}: data\n\n# When exported to JSON, use custom format\n```\n\n### Proposed Solution: Export Handler Registry\n\n#### Registry System\nRegister handlers for specific types/tags:\n```eu\nregister-json-handler(:type/zdt, zdt-to-iso8601)\nregister-json-handler(:meta/currency, format-currency)\nregister-json-handler(:meta/sensitive, redact-value)\n```\n\n#### Handler Interface\n```eu\nhandler(value, metadata): {\n  # Return JSON-compatible representation\n}\n```\n\n### Use Cases\n\n#### Built-in Types\n- **Dates/Times**: ISO 8601 formatting\n- **Binary data**: Base64 encoding\n- **Large numbers**: String representation\n\n#### Custom Types  \n- **Money**: Format with currency symbols\n- **Coordinates**: GeoJSON format\n- **Sensitive data**: Redaction or encryption\n\n#### Domain-specific\n- **Scientific data**: Special notation\n- **Configuration**: Environment-specific values\n- **API responses**: Format per API requirements\n\n### Benefits\n- **Flexibility**: Customize export per use case\n- **Type safety**: Proper handling of non-JSON types\n- **Extensibility**: Users can add custom handlers\n- **Format-specific**: Different handlers per output format\n\n### Implementation Considerations\n\n#### Registry Design\n- **Global vs local**: Scope of handler registration\n- **Priority**: Which handler wins for multiple matches?\n- **Performance**: Efficient handler lookup\n\n#### Handler Application\n- **Recursive**: Apply to nested structures\n- **Composable**: Chain multiple handlers\n- **Error handling**: Invalid handler output\n\n### Priority\nMedium - enables better JSON export customization\n\n### Related Considerations\n- **Other formats**: Same pattern for YAML, TOML, XML?\n- **Import handlers**: Symmetric custom import?\n- **Type system**: Integration with future type system?\n\n### Notes\n- The \"Via registry?\" comment suggests using a registry pattern\n- This is format-specific (JSON) but pattern could generalize\n- Different from YAML tag handling (like !eu tags)\n","status":"open","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-17T11:58:07.95329Z","created_by":"eucalypt_private/crew/koala","updated_at":"2026-01-17T12:15:01.911536Z","external_ref":"gh-12","labels":["io"]}
{"id":"eu-1b1","title":"Update import format docs","description":"Update input format documentation with JSONL","status":"open","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-20T11:33:44.526506Z","created_by":"greg","updated_at":"2026-01-20T11:33:44.526506Z","dependencies":[{"issue_id":"eu-1b1","depends_on_id":"eu-n5h","type":"blocks","created_at":"2026-01-20T11:34:02.414703Z","created_by":"greg"}]}
{"id":"eu-1dn","title":"Add args field to EucalyptOptions","description":"Add args: Vec\u003cString\u003e field to EucalyptOptions struct","status":"open","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-20T11:17:33.283471Z","created_by":"greg","updated_at":"2026-01-20T11:17:33.283471Z"}
{"id":"eu-1jc","title":"Digest: mol-witness-patrol","description":"Patrol 3: Rig quiet.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-20T09:04:42.613675Z","updated_at":"2026-01-20T09:04:42.613675Z","closed_at":"2026-01-20T09:04:42.613634Z","close_reason":"Squashed from 10 wisps"}
{"id":"eu-1o1","title":"Access to command line args","description":"## Analysis: Access to command line args\n\n### Requirements\nProvide access to command line arguments for eucalypt programs, supporting both:\n1. **Basic access**: Simple list of arguments (like Python's `sys.argv`)\n2. **Structured interface**: Metadata-driven argument parsing (like Rust's structopt)\n\n### Implementation Approach\n\n#### Phase 1: Basic Access\n**Simple list access** similar to Python's `sys.argv`:\n```eu\nargs: __ARGS  # Built-in list of command line arguments\nprogram: args[0]  # Program name\nparams: args[1:]  # Remaining arguments\n```\n\n#### Phase 2: Structured Interface\n**Metadata-driven** argument definition using eucalypt's metadata system:\n```eu\n{\n  args: {\n    input: { type: \"string\", help: \"Input file path\" }\n    verbose: { type: \"bool\", short: \"v\", help: \"Enable verbose output\" }\n    count: { type: \"int\", default: 1, help: \"Number of iterations\" }\n  }\n}\n\n# Automatically parsed and validated arguments available\nmain: {\n  # Access parsed arguments\n  process(args.input, args.count, args.verbose)\n}\n```\n\n### Technical Design\n\n#### Basic Access Implementation\n- **Built-in intrinsic**: `__ARGS` or similar\n- **List of strings**: Raw command line arguments\n- **Available globally**: Accessible from any scope\n\n#### Structured Interface Design\n- **Metadata-based definition**: Use existing metadata system\n- **Type validation**: String, int, bool, list types\n- **Help generation**: Automatic --help from metadata\n- **Error handling**: Validation errors with helpful messages\n- **Short/long options**: Support both -v and --verbose styles\n\n### Benefits\n- **Script writing**: Enable eucalypt for command-line tools\n- **Type safety**: Structured interface provides validation\n- **User-friendly**: Automatic help generation\n- **Flexible**: Both simple and complex use cases supported\n\n### Examples Use Cases\n- **Simple scripts**: Quick access to arguments\n- **CLI tools**: Full-featured command-line interfaces\n- **Build scripts**: Parameter-driven builds\n- **Data processing**: Configurable pipelines\n\n### Priority\nHigh - essential for practical scripting and CLI tools\n\n### Implementation Notes\n- **Compatibility**: Ensure works with `eu script.eu -- args`\n- **Testing**: Handle various argument patterns\n- **Documentation**: Clear examples for both approaches\n- **Error messages**: Helpful feedback for invalid arguments\n\n### Related Considerations\n- **Integration with -e**: How do evaluated expressions access args?\n- **REPL behavior**: What happens in interactive mode?\n- **Compiled programs**: Future bytecode compilation needs\n","status":"closed","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-17T11:58:05.985331Z","created_by":"eucalypt_private/crew/koala","updated_at":"2026-01-20T11:41:09.685442Z","closed_at":"2026-01-20T11:19:15.216703Z","external_ref":"gh-21","labels":["io"]}
{"id":"eu-1pd","title":"Add fmt subcommand to CLI","description":"Add eu fmt subcommand to CLI for invoking the formatter.","status":"closed","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-20T10:53:50.113441Z","created_by":"greg","updated_at":"2026-01-22T21:06:26.902075Z","closed_at":"2026-01-22T21:06:26.902075Z","close_reason":"Already implemented","dependencies":[{"issue_id":"eu-1pd","depends_on_id":"eu-en8","type":"blocks","created_at":"2026-01-20T10:58:04.688574Z","created_by":"greg"}]}
{"id":"eu-1sg","title":"Consider reducing clone() calls for performance (601 occurrences)","description":"The codebase has 601 clone() calls across 66 files, with heavy concentration in core expression transformation.\n\n**Highest usage:**\n- src/core/expr.rs: 102 clones\n- src/core/inline/reduce.rs: 51 clones\n- src/eval/stg/compiler.rs: 41 clones\n- src/core/cook/mod.rs: 35 clones\n\n**Note:** Some cloning is necessary due to recursive tree transformations with Rc-wrapped expressions. However, opportunities may exist to reduce allocations.\n\n**Potential optimizations:**\n1. Use Cow (copy-on-write) for unchanged subtrees\n2. Consider arena allocation for expression trees\n3. Profile to identify hot paths with excessive cloning","status":"open","priority":4,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-20T15:49:37.23842Z","created_by":"eucalypt_private/polecats/obsidian","updated_at":"2026-01-21T18:48:28.361427Z","labels":["optimization","performance"]}
{"id":"eu-2254","title":"VM stack_trace allocates during error handling","description":"The stack_trace function allocates intermediate structures during error handling.\n\nFrom PERFORMANCE_REVIEW.md Issue #7:\n\n```rust\npub fn stack_trace(\u0026self, view: \u0026MutatorHeapView) -\u003e Vec\u003cSmid\u003e {\n    self.stack.iter().rev()\n        .filter_map(|cont| { ... })\n        .filter(|smid| *smid != Smid::default())\n        .dedup()\n        .collect()\n}\n```\n\nWhile errors should be rare, this adds overhead when they occur. Consider pre-allocated buffer or lazy iteration.","status":"open","priority":3,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-21T15:40:35.65136Z","created_by":"eucalypt_private/crew/koala","updated_at":"2026-01-21T15:40:35.65136Z"}
{"id":"eu-2b4","title":"Add ↑ operator to prelude","description":"Add ↑ operator definition to prelude with precedence 95, implementing as xs head","status":"open","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-20T11:27:53.22814Z","created_by":"greg","updated_at":"2026-01-20T11:27:53.22814Z"}
{"id":"eu-2e8","title":"GC: Explore concurrent/parallel collection implementation","description":"## Analysis: GC: Explore concurrent/parallel collection implementation\n\n### Goal\nInvestigate **concurrent/parallel garbage collection** to reduce GC pause times through background collection.\n\n### Context\n**Current Status**: Low priority - no immediate plans for concurrency in eucalypt language itself.\n\n### Concurrent GC Concepts\n\n#### Concurrent Collection\n**Background GC threads** running alongside mutator:\n- **Incremental marking**: Mark objects while program runs\n- **Concurrent sweeping**: Reclaim memory in background\n- **Reduced pause times**: Minimize stop-the-world phases\n\n#### Parallel Collection\n**Multiple GC threads** during stop-the-world phases:\n- **Parallel marking**: Multiple threads mark object graph\n- **Parallel sweeping**: Multiple threads reclaim memory\n- **Work stealing**: Load balancing between GC threads\n\n### Technical Approaches\n\n#### Concurrent Marking\n- **Tricolor invariant**: Maintain consistency during concurrent marking\n- **Write barriers**: Track mutations during marking\n- **Snapshot-at-beginning**: Consistent view of heap\n- **Incremental updates**: Handle objects modified during collection\n\n#### Memory Consistency\n- **Atomic operations**: Safe concurrent access to GC metadata\n- **Memory barriers**: Ensure ordering of GC operations\n- **Lock-free algorithms**: Avoid contention where possible\n\n### Implementation Challenges\n\n#### Eucalypt-Specific Considerations\n- **STG execution model**: How concurrency affects lazy evaluation\n- **Thunk updates**: Thread-safe thunk evaluation\n- **Reference counting**: If mixed with tracing collection\n- **Memory layout**: Immix blocks with concurrent access\n\n#### Rust Implementation\n- **Send/Sync traits**: Thread safety for GC data structures\n- **Atomic types**: Lock-free GC metadata updates\n- **Thread spawning**: Background GC thread management\n- **Channel communication**: Coordination between mutator and GC\n\n### Design Questions\n\n#### Threading Model\n1. **Single mutator**: One main thread + GC threads\n2. **Multiple mutators**: Parallel eucalypt execution\n3. **Work-stealing**: Dynamic load balancing\n4. **Thread pools**: Reuse threads for different phases\n\n#### Synchronization\n1. **Write barriers**: When and how to track mutations\n2. **Safepoints**: When to pause for GC coordination\n3. **Lock contention**: Minimize synchronization overhead\n4. **Progress guarantees**: Ensure GC makes progress\n\n### Benefits vs Complexity\n\n#### Potential Benefits\n- **Lower latency**: Reduced GC pause times\n- **Better throughput**: Background reclamation\n- **Scalability**: Better utilization of multiple cores\n\n#### Complexity Costs\n- **Implementation complexity**: Significantly more complex than serial GC\n- **Debugging difficulty**: Harder to diagnose issues\n- **Memory overhead**: Additional metadata for coordination\n- **Performance overhead**: Write barriers, synchronization\n\n### Priority Assessment\n**Low Priority** because:\n- **No language concurrency**: Eucalypt is currently single-threaded\n- **Current GC adequate**: Production-ready mark-sweep collector exists\n- **High complexity**: Significant implementation and maintenance burden\n- **Limited benefit**: Most eucalypt programs are short-lived\n\n### Future Considerations\n\n#### Prerequisites\nBefore concurrent GC makes sense:\n1. **Language concurrency**: Parallel eucalypt execution\n2. **Long-running programs**: Applications that benefit from low latency\n3. **Large heaps**: Memory usage that creates pause time issues\n4. **Performance requirements**: Demonstrated need for lower latency\n\n#### Alternative Approaches\n- **Generational GC**: Better pause times through generation collection\n- **Incremental collection**: Spread work across multiple cycles\n- **Concurrent compaction**: Reduce fragmentation with background compaction\n\n### Research Areas\n\n#### Academic Literature\n- **Concurrent mark-sweep**: Classic concurrent GC algorithms\n- **Immix concurrent**: Concurrent variants of Immix algorithm\n- **Write barrier optimization**: Efficient mutation tracking\n- **Memory consistency**: Models for concurrent GC\n\n#### Implementation Studies\n- **JVM collectors**: G1, ZGC, Shenandoah experiences\n- **Go GC**: Concurrent mark-sweep implementation\n- **Rust ecosystem**: Concurrent GC crates and approaches\n\n### Recommendation\n**Defer investigation** until:\n1. **Language evolution**: Eucalypt gains concurrency features\n2. **Performance requirements**: Demonstrated need for concurrent GC\n3. **Resource availability**: Sufficient development resources for complex feature\n\n### Current Action\n**Document for future reference** - maintain awareness of concurrent GC techniques for potential future implementation when language and usage patterns justify the complexity.\n","status":"open","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-17T11:58:10.361568Z","created_by":"eucalypt_private/crew/koala","updated_at":"2026-01-17T12:15:05.321468Z","external_ref":"gh-55"}
{"id":"eu-2gf","title":"Harness test: JSONL empty lines","description":"Add test for empty lines handling in JSONL","status":"open","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-20T11:33:43.892396Z","created_by":"greg","updated_at":"2026-01-20T11:33:43.892396Z","dependencies":[{"issue_id":"eu-2gf","depends_on_id":"eu-863","type":"blocks","created_at":"2026-01-20T11:34:02.283853Z","created_by":"greg"}]}
{"id":"eu-2i2","title":"Digest: mol-witness-patrol","description":"Patrol 18: System quiet. No polecats, refinery running (empty queue), no gates, no swarms. Deacon NOT running (3+ patrols) - hq-ktf5g stalled. Mayor resolved obsidian cleanup. Inbox clear.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-21T11:04:17.440461Z","updated_at":"2026-01-21T18:48:28.37901Z","closed_at":"2026-01-21T11:04:17.440398Z","close_reason":"Squashed from 10 wisps","dependencies":[{"issue_id":"eu-2i2","depends_on_id":"eu-2yj","type":"parent-child","created_at":"2026-01-21T11:04:17.441086Z","created_by":"eucalypt_private/witness"}]}
{"id":"eu-2ij","title":"GC: Implement lazy sweeping optimisation","description":"## Overview\n\nImplement lazy sweeping to reduce collection pause times by deferring block sweeping until allocation time.\n\n## Current Implementation\n\n**Eager Sweeping**: All blocks are swept immediately after marking phase\n- Higher collection pause times\n- Less responsive allocation\n- All sweep work done during stop-the-world pause\n\n## Target Implementation\n\n**Lazy Sweeping**: Blocks swept just before allocation\n- Lower collection pause times  \n- More responsive allocation\n- Sweep work distributed across allocation requests\n- Better cache locality (sweep right before use)\n\n## Technical Changes Required\n\n1. **Modify sweep phase**: Mark blocks as \"needs sweeping\" instead of sweeping immediately\n2. **Allocation-time sweeping**: Check and sweep blocks before allocating from them  \n3. **Block state tracking**: Add \"dirty\" state to distinguish marked-but-not-swept blocks\n4. **Allocation path modifications**: Integrate sweep check into allocation fast path\n\n## Implementation Plan\n\n1. **Design block state machine**: Define states (clean/dirty/swept/recyclable)\n2. **Modify collection**: Replace eager sweep with lazy marking\n3. **Update allocation paths**: Add sweep-on-demand to block selection\n4. **Performance testing**: Measure pause time reduction vs allocation overhead\n5. **Tuning**: Optimise sweep-on-demand performance\n\n## Expected Benefits\n\n- **Reduced pause times**: Shorter stop-the-world collection phases\n- **Better cache locality**: Sweep blocks right before use\n- **More responsive allocation**: Work distributed over time\n- **Incremental progress**: Sweep work happens as needed\n\n## Performance Considerations\n\n- **Allocation overhead**: Small cost added to allocation path\n- **Memory pressure**: Slightly delayed reclamation\n- **Implementation complexity**: More complex block state management\n\n## Context\n\n**Current Status**: \n- Option B GC production hardening completed\n- Stable foundation available for optimisation work\n- Standard Immix algorithm optimisation\n\n**Priority**: **Medium**\n- Well-understood performance improvement\n- Incremental enhancement to existing GC implementation\n- May benefit programs that trigger multiple collections\n\n## Dependencies  \n\n- Requires stable GC foundation (completed)\n- Should include careful performance measurement to validate benefits\n- Implementation should maintain current allocation path performance\n","status":"open","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-17T11:58:06.392642Z","created_by":"eucalypt_private/crew/koala","updated_at":"2026-01-17T12:14:58.713193Z","external_ref":"gh-54"}
{"id":"eu-2n5","title":"Test fixtures: spacing normalisation","description":"Create test fixtures for spacing normalisation (dots, colons, commas, braces).","status":"open","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-20T10:53:51.416642Z","created_by":"greg","updated_at":"2026-01-20T10:53:51.416642Z","dependencies":[{"issue_id":"eu-2n5","depends_on_id":"eu-btr","type":"blocks","created_at":"2026-01-20T10:58:41.069268Z","created_by":"greg"}]}
{"id":"eu-2psl","title":"Reformat mode strips shebang lines","description":"The --reformat mode removes shebang lines from .eu files.\n\nExample:\n```\n# Original:\n#!/usr/bin/env eu\nt: __TRUE\n\n# After --reformat:\nt: __TRUE\n```\n\nShebang lines should be preserved as they're needed for executable scripts.","status":"closed","priority":2,"issue_type":"bug","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-21T15:26:09.166432Z","created_by":"eucalypt_private/crew/koala","updated_at":"2026-01-22T21:24:53.242361Z","closed_at":"2026-01-22T21:24:53.242361Z","close_reason":"Verified fixed: Shebang lines are preserved in reformat mode. Tested with simple files containing #!/usr/bin/env eu."}
{"id":"eu-2sq","title":"ToSourceDoc for Name/Identifier","description":"Implement ToSourceDoc for Name and Identifier types.","status":"open","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-20T10:53:15.090389Z","created_by":"greg","updated_at":"2026-01-20T10:53:15.090389Z","dependencies":[{"issue_id":"eu-2sq","depends_on_id":"eu-r3h","type":"blocks","created_at":"2026-01-20T10:56:34.375086Z","created_by":"greg"}]}
{"id":"eu-2w7","title":"Generate nullary operator metadata","description":"Generate operator metadata with fixity Nullary for nullary declarations","status":"closed","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-20T11:09:02.58504Z","created_by":"greg","updated_at":"2026-01-22T21:03:40.443142Z","closed_at":"2026-01-22T21:03:40.443142Z","close_reason":"Closed","dependencies":[{"issue_id":"eu-2w7","depends_on_id":"eu-9hx","type":"blocks","created_at":"2026-01-20T11:10:08.010468Z","created_by":"greg"}]}
{"id":"eu-307","title":"LSP server","description":"Create an LSP server to assist with developing eucalypt projects. It should be available using the same binary with an --lsp switch or something.\n","status":"open","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-17T11:58:10.81112Z","created_by":"eucalypt_private/crew/koala","updated_at":"2026-01-17T11:58:10.81112Z","external_ref":"gh-62"}
{"id":"eu-3gu","title":"Digest: mol-witness-patrol","description":"Patrol 9: Rig quiet.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-20T09:07:10.279866Z","updated_at":"2026-01-20T09:07:10.279866Z","closed_at":"2026-01-20T09:07:10.279816Z","close_reason":"Squashed from 10 wisps"}
{"id":"eu-40jb","title":"String intrinsics create intermediate allocations","description":"String intrinsics like Join, Match, and Split create intermediate Vec\u003cString\u003e collections.\n\nFrom PERFORMANCE_REVIEW.md Issue #6:\n\nExample - Join, Match, Split all materialize intermediate collections before returning results.\n\nSuggested fix: Consider lazy evaluation or streaming where possible. Return iterators rather than materializing all results.\n\nNote: The Letters intrinsic was already simplified in commit 5e96788.","status":"open","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-21T15:40:34.577694Z","created_by":"eucalypt_private/crew/koala","updated_at":"2026-01-21T15:40:34.577694Z"}
{"id":"eu-472","title":"Harness test: ↑list.property binding","description":"Add test for ↑list.property tight binding (parses as (↑list).property)","status":"open","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-20T11:27:54.704648Z","created_by":"greg","updated_at":"2026-01-20T11:27:54.704648Z","dependencies":[{"issue_id":"eu-472","depends_on_id":"eu-2b4","type":"blocks","created_at":"2026-01-20T11:28:09.239897Z","created_by":"greg"}]}
{"id":"eu-4af","title":"VM: Symbol pool \u0026 interning","description":"## Analysis: VM: Symbol pool \u0026 interning\n\n### Current State\n**Symbols** (used for block keys, distinct from strings) are currently handled inefficiently, causing STG bloat.\n\n### Problem\n- **Redundant symbol storage** - same symbols stored multiple times\n- **STG bloat** - inefficient representation increases memory usage\n- **Comparison overhead** - comparing full symbol strings instead of interned IDs\n\n### Solution: Symbol Interning\n**Symbol pool** with interning to ensure each unique symbol is stored only once:\n- **Unique storage**: Each symbol string stored exactly once in pool\n- **ID references**: Use numeric IDs instead of strings throughout VM\n- **Fast comparison**: Compare IDs instead of string values\n- **Memory efficiency**: Dramatic reduction in memory usage\n\n### Implementation Approach\n\n#### Core Components\n1. **Symbol pool**: Global or per-module symbol table\n2. **Interning mechanism**: String → ID mapping\n3. **ID representation**: Efficient numeric symbol references\n4. **Lookup optimization**: Fast bidirectional lookups\n\n#### Integration Points\n- **Parser**: Intern symbols during parsing\n- **STG generation**: Use symbol IDs in STG representation\n- **Runtime**: Fast symbol operations using IDs\n- **Serialization**: Handle symbol pool in compiled output\n\n### Relationship to Other Issues\n- **Issue #25 (Bytecode)**: Could be implemented first; bytecode would likely include symbol/constant pools\n- **General optimization**: Part of making eucalypt more production-ready\n\n### Benefits\n- **Memory efficiency**: Significant reduction in memory usage\n- **Performance**: Faster symbol comparisons and lookups\n- **STG size**: Smaller, cleaner STG representation\n- **Cache efficiency**: Better memory locality\n\n### Implementation Considerations\n- **Thread safety**: If concurrent, pool needs synchronization\n- **Garbage collection**: Integration with GC for symbol lifecycle\n- **Persistence**: Serializing symbol pools for compiled modules\n- **Debugging**: Maintaining symbol names for error messages\n\n### Priority\nMedium-high - higher than bytecode implementation, lower than syntax enhancements\n\n### Success Criteria\n- **Measurable reduction** in STG size\n- **Improved performance** for symbol-heavy operations\n- **Transparent implementation** - no user-visible changes\n- **Maintained debugging** - error messages still show symbol names\n","status":"open","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-17T11:58:06.724098Z","created_by":"eucalypt_private/crew/koala","updated_at":"2026-01-17T12:14:59.010627Z","external_ref":"gh-24","labels":["vm"]}
{"id":"eu-4c6","title":"Silent error on process_defaults failure","description":"In src/bin/eu.rs:15-17:\n```rust\nif opt.process_defaults().is_err() {\n    process::exit(1);\n}\n```\n\nThe error is discarded without printing a message to the user.\n\n**Impact:** User confusion when program exits with code 1 but no error message.\n\n**Note:** This becomes moot if P0 duplicate call issue is fixed by removing this call.\n\n**Source:** Correctness Review hq-leg-az4n6","status":"closed","priority":2,"issue_type":"chore","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-21T12:27:32.93338Z","created_by":"mayor","updated_at":"2026-01-21T14:01:11.769755Z","closed_at":"2026-01-21T14:01:11.769755Z","close_reason":"Removed redundant process_defaults() call in eu.rs. The call in from_args() is sufficient. This makes the silent error issue moot."}
{"id":"eu-4oe","title":"Source Formatter","description":"Implement eucalypt source code formatter with conservative and full reformatting modes. See openspec/changes/add-source-formatter/ for full spec.","status":"closed","priority":2,"issue_type":"epic","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-20T10:52:53.09694Z","created_by":"greg","updated_at":"2026-01-20T14:09:43.1193Z","closed_at":"2026-01-20T14:09:43.1193Z","close_reason":"Implemented source code formatter for Eucalypt\n\nKey features:\n- Added 'eu fmt' subcommand with options for width, write, check, reformat, indent\n- Two formatting modes: Conservative (default) and Full reformat\n- Converts tabs to spaces, normalizes whitespace\n- Proper spacing around operators and function calls\n- New modules: src/syntax/export/format.rs, src/driver/format.rs\n- All tests pass, round-trip semantics preserved"}
{"id":"eu-50b","title":"process_defaults() called twice causes duplicate inputs","description":"In eu.rs:15-17 and options.rs:696, process_defaults() is called twice:\n1. Inside EucalyptOptions::from_args() at options.rs:696 (via unwrap)\n2. Again in main() at eu.rs:15\n\nEach call prepends inputs to the prologue (lib_path, Eufile, dotfile, prelude, build-meta, io pseudo-inputs, CLI evaluand).\n\n**Impact:** All prologue inputs are duplicated, causing files to be processed twice.\n\n**Fix:** Remove the redundant call in eu.rs or make process_defaults() idempotent.\n\n**Source:** Correctness Review hq-leg-az4n6","status":"closed","priority":0,"issue_type":"bug","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-21T12:26:57.440652Z","created_by":"mayor","updated_at":"2026-01-21T14:01:11.963954Z","closed_at":"2026-01-21T14:01:11.963954Z","close_reason":"Removed duplicate process_defaults() call in eu.rs lines 15-17. from_args() at options.rs:696 already calls this method."}
{"id":"eu-5fo","title":"LinkedList block management with O(n) removal","description":"In src/eval/memory/heap.rs:437-458, find_best_recycled_block iterates through all recycled blocks (O(n)), then reconstructs the entire LinkedList to remove a single element (another O(n)). This occurs on every head block replacement.\n\n**Impact:** Slow block allocation when current block is exhausted.\n\n**Fix:** Use Vec with swap_remove for O(1) removal, or maintain priority queue.\n\n**Source:** Performance Review hq-leg-om5os","status":"closed","priority":1,"issue_type":"feature","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-21T12:28:02.108128Z","created_by":"mayor","updated_at":"2026-01-21T14:10:39.028146Z","closed_at":"2026-01-21T14:10:39.028146Z","close_reason":"Changed HeapState.recycled and HeapState.rest from LinkedList to VecDeque. find_best_recycled_block now uses VecDeque::remove(index) which is O(min(i, n-i)) instead of O(n) list reconstruction.","labels":["performance"]}
{"id":"eu-5go","title":"Nullary operator application","description":"Implement apply_zero or equivalent for nullary operator application in shunting","status":"closed","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-20T11:09:12.565918Z","created_by":"greg","updated_at":"2026-01-22T21:03:41.400478Z","closed_at":"2026-01-22T21:03:41.400478Z","close_reason":"Closed","dependencies":[{"issue_id":"eu-5go","depends_on_id":"eu-vly","type":"blocks","created_at":"2026-01-20T11:10:14.23523Z","created_by":"greg"}]}
{"id":"eu-5gs","title":"YAML Timestamps","description":"## Analysis: YAML Timestamps\n\n### Goal\nSupport YAML timestamp types when importing YAML, with **automatic conversion to ZDTs**.\n\n### YAML Timestamp Types\nYAML supports native timestamp values:\n```yaml\n# Various YAML timestamp formats\ncreated: 2023-01-15T10:30:00Z\nupdated: 2023-01-15 10:30:00\nbirthday: 1990-06-15\nevent_time: 2023-01-15T10:30:00+05:00\n```\n\n### Current State\n**Investigation needed**: What happens when importing YAML with timestamps?\n- Do they import as strings currently?\n- Are they recognized as timestamps?\n- What parsing errors occur?\n\n### Implementation Requirements\n\n#### Automatic ZDT Conversion\n**Convert YAML timestamps to eucalypt ZDT objects**:\n```yaml\n# YAML input\nevent:\n  start: 2023-01-15T10:30:00Z\n  end: 2023-01-15T11:30:00Z\n\n# Eucalypt result (after import)\nevent: {\n  start: ZDT(\"2023-01-15T10:30:00Z\")  # ZDT object\n  end: ZDT(\"2023-01-15T11:30:00Z\")    # ZDT object\n}\n```\n\n#### YAML Timestamp Format Support\n**Research needed**: Which YAML timestamp formats to support?\n\nCommon YAML timestamp patterns:\n- **ISO 8601**: `2023-01-15T10:30:00Z`\n- **RFC 3339**: `2023-01-15T10:30:00+05:00`\n- **Date only**: `2023-01-15`\n- **Space-separated**: `2023-01-15 10:30:00`\n- **Microseconds**: `2023-01-15T10:30:00.123456Z`\n\n### Implementation Approach\n\n#### YAML Parser Integration\n- **Timestamp recognition**: Identify YAML timestamp values during parsing\n- **ZDT construction**: Convert recognized timestamps to ZDT objects\n- **Error handling**: Invalid timestamp formats, timezone issues\n- **Fallback**: Malformed timestamps remain as strings\n\n#### Timezone Handling\n- **UTC default**: Timestamps without timezone → UTC\n- **Explicit timezones**: Preserve specified timezones\n- **Local time**: Handle timezone-naive timestamps\n- **DST awareness**: Proper daylight saving handling\n\n### Technical Considerations\n\n#### Parser Enhancement\n- **YAML timestamp detection**: Recognize timestamp patterns\n- **ZDT integration**: Interface with existing ZDT system\n- **Performance**: Efficient timestamp parsing\n- **Compatibility**: Don't break existing YAML imports\n\n#### Edge Cases\n- **Invalid timestamps**: February 30th, 25:00:00, etc.\n- **Ambiguous formats**: Multiple possible interpretations\n- **Legacy data**: Existing YAML with string timestamps\n- **Precision loss**: Microsecond vs nanosecond precision\n\n### Benefits\n- **Natural data types**: Timestamps become proper date objects\n- **ZDT operations**: Use all ZDT functions on imported timestamps\n- **Type safety**: Avoid string-based date manipulation\n- **Consistency**: Uniform timestamp handling across formats\n\n### Use Cases\n\n#### Configuration Files\n```yaml\n# config.yaml\ndeployment:\n  scheduled: 2023-01-15T02:00:00Z\n  expiry: 2023-12-31T23:59:59Z\n\n# After import - can use ZDT operations\nnext_deploy: config.deployment.scheduled add-days(7)\n```\n\n#### Data Processing\n```yaml\n# events.yaml\n- name: \"Meeting\"\n  start: 2023-01-15T10:00:00Z\n  duration: PT1H30M\n\n# Process with ZDT functions\nmeetings: events filter(_.start after(now))\n```\n\n### Priority\nMedium-High - important for date/time data processing workflows\n\n### Implementation Plan\n1. **Research phase**: Investigate YAML timestamp format specifications\n2. **Current behavior**: Test existing timestamp import behavior\n3. **ZDT integration**: Design timestamp → ZDT conversion\n4. **Parser enhancement**: Modify YAML import to recognize timestamps\n5. **Testing**: Comprehensive timestamp format testing\n6. **Documentation**: Document supported timestamp formats\n\n### Related Issues\n- **ZDT system**: Builds on existing ZDT infrastructure\n- **Issue #51 (ZDT min/max)**: Enhanced ZDT operations\n- **Issue #47 (ZDT literal)**: Related date/time functionality\n\n### Research Requirements\n1. **YAML spec**: Official YAML timestamp format specification\n2. **Common patterns**: Real-world YAML timestamp usage\n3. **Parser capabilities**: What timestamp formats can yaml-rust handle?\n4. **ZDT compatibility**: Which formats map cleanly to ZDT?\n5. **Error scenarios**: How to handle malformed timestamps?\n\n### Success Criteria\n- **Automatic conversion**: YAML timestamps become ZDT objects\n- **Format coverage**: Support common timestamp patterns\n- **Error resilience**: Graceful handling of invalid timestamps\n- **Performance**: No significant import slowdown\n- **Backward compatibility**: Existing YAML imports continue working\n","status":"open","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-17T11:58:09.597001Z","created_by":"eucalypt_private/crew/koala","updated_at":"2026-01-17T12:15:04.308513Z","external_ref":"gh-38","labels":["io"]}
{"id":"eu-5m1","title":"Digest: mol-witness-patrol","description":"Patrol 14: Quiet","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-21T10:28:27.431291Z","updated_at":"2026-01-21T18:48:28.39491Z","closed_at":"2026-01-21T10:28:27.431228Z","close_reason":"Squashed from 10 wisps"}
{"id":"eu-5o9","title":"Digest: mol-witness-patrol","description":"Patrol 13: Quiet","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-21T10:27:33.484549Z","updated_at":"2026-01-21T18:48:28.395469Z","closed_at":"2026-01-21T10:27:33.484506Z","close_reason":"Squashed from 10 wisps"}
{"id":"eu-5si","title":"GC: Implement full reference updating system","description":"## Overview\n\nImplement a complete reference updating system to eliminate forwarding pointer indirection overhead after object evacuation.\n\n## Problem\n\nAfter object evacuation (when implemented), objects will use forwarding pointers for redirection. While functional, this approach has performance overhead:\n\n- **Performance overhead**: Following forwarding pointers adds indirection cost\n- **Memory overhead**: Forwarding pointers remain until next collection  \n- **Complexity in mutator**: All object access must handle forwarding\n\n## Solution\n\nImplement a reference updating phase that traverses the object graph after evacuation and updates all references to point directly to new locations, eliminating forwarding pointer traversal.\n\n## Technical Challenges\n\n**Architectural Constraint**: Requires mutable access to root objects, but current `collect()` function signature takes immutable references:\n\n```rust\n// Current signature\npub fn collect\u003cT: GcScannable\u003e(heap: \u0026mut Heap, roots: \u0026[\u0026T], clock: \u0026Clock)\n\n// Required signature  \npub fn collect\u003cT: GcScannable\u003e(heap: \u0026mut Heap, roots: \u0026mut [\u0026mut T], clock: \u0026Clock)\n```\n\nThis requires:\n1. Changing the `collect()` signature to take mutable roots\n2. Updating all call sites throughout the codebase\n3. Implementing reference update traversal for all object types\n4. Handling the complexity of updating references during collection\n\n## Implementation Plan\n\n1. **Design phase**: Analyse impact of signature change across codebase\n2. **Infrastructure**: Extend `update_references()` method in `GcScannable` trait (skeleton already exists)\n3. **Root mutations**: Modify collection interface to support mutable root access\n4. **Object graph traversal**: Implement comprehensive reference updating for all STG object types\n5. **Integration**: Add reference update phase to collection process\n6. **Testing**: Verify correctness and measure performance improvement\n\n## Context and Dependencies\n\n**Current Status**:\n- Evacuation infrastructure exists (fragmentation analysis, collection strategies)\n- Actual object evacuation is not yet implemented\n- Headers support forwarding pointers but evacuation doesn't use them\n\n**Priority**: **Medium**\n- Performance improvement for fragmented heaps\n- Completes true Immix algorithm implementation\n- Requires significant API changes\n\n## Dependencies\n\n- **Blocked on Issue #23**: Must implement object evacuation first\n- Evacuation must be working and using forwarding pointers before reference updating is needed\n- Should be implemented after evacuation is stable and tested\n\n## Notes\n\nThis issue cannot proceed until object evacuation (Issue #23) is implemented, as there are no forwarding pointers to update in the current mark-in-place collector.\n","status":"open","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-17T11:58:06.475879Z","created_by":"eucalypt_private/crew/koala","updated_at":"2026-01-17T12:14:58.804226Z","external_ref":"gh-53"}
{"id":"eu-5vl","title":"Rationalise CLI","description":"# CLI Rationalisation\n\n## Current Issues\n\n### 1. Inconsistent Flag Grouping\n- Mix of single-letter (`-d`, `-j`, `-l`) and long flags (`--dump-stg`, `--quote-embed`)\n- Some flags have inconsistent naming (e.g., `-j` for JSON vs `--export-type`)\n- No clear grouping of related functionality\n\n### 2. Confusing Command Structure\n- Everything handled through flags rather than subcommands\n- Similar operations scattered: `--dump-*` flags for different phases\n- Testing (`-T`) mixed with evaluation commands\n\n### 3. Awkward Flag Names\n- `-B` for batch mode is unclear\n- `-Q` for no-prelude is non-intuitive  \n- `-N` for name-inputs has no clear purpose in help\n- `-O` for open-browser seems random\n\n### 4. Missing Subcommand Structure\nNatural subcommands would be:\n- `eu run` (default behavior)\n- `eu test` (replace `-T`)\n- `eu dump` (consolidate `--dump-*` flags)\n- `eu fmt` (future formatting command)\n- `eu version` (replace `-v`)\n\n### 5. STG Settings Pollution\n- STG-specific flags (`--stg-*`) cluttering main interface\n- These should be hidden or grouped better\n\n## Proposed Solution\n\nMigrate to a modern subcommand-based CLI using `clap` v4:\n\n```\neu [GLOBAL_OPTIONS] \u003cSUBCOMMAND\u003e\n\nSUBCOMMANDS:\n    run      Evaluate eucalypt code (default)\n    test     Run tests\n    dump     Dump intermediate representations  \n    fmt      Format eucalypt source code\n    version  Show version information\n\nGLOBAL OPTIONS:\n    -t, --target \u003cTARGET\u003e     Target to run\n    -o, --output \u003cFILE\u003e       Output file\n    -x, --format \u003cFORMAT\u003e     Export format (yaml, json, toml, text)\n    -L, --lib-path \u003cPATH\u003e     Add library path\n    --no-prelude              Don't load standard prelude\n    --debug                   Enable debug mode\n```\n\nThis provides:\n- Clear separation of concerns\n- Consistent flag naming\n- Room for future commands (fmt, lsp, etc.)\n- Better help organization\n- Backwards compatibility through aliases\n","status":"closed","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-17T11:58:05.374129Z","created_by":"eucalypt_private/crew/koala","updated_at":"2026-01-20T11:41:09.686689Z","closed_at":"2026-01-20T11:05:10.750161Z","external_ref":"gh-65"}
{"id":"eu-5xj","title":"Nullary Operators","description":"Add support for 0-arity (nullary) operators. See openspec/changes/add-nullary-operators/ for full spec.","status":"closed","priority":2,"issue_type":"epic","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-20T11:08:53.308311Z","created_by":"greg","updated_at":"2026-01-20T12:19:15.906227Z","closed_at":"2026-01-20T12:19:15.906227Z","close_reason":"Closed"}
{"id":"eu-64j","title":"Bring eucalypt-mode.el into editors/emacs/","description":"Move eucalypt-mode.el Emacs major mode into the main repository under editors/emacs/ directory. This consolidates editor support within the main project.","status":"closed","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-20T11:45:13.399719Z","created_by":"greg","updated_at":"2026-01-21T15:30:48.010962Z","closed_at":"2026-01-21T15:30:48.010962Z","close_reason":"Added to editors/emacs/ in commit 628e724"}
{"id":"eu-6w9","title":"Use Claude Code to write release notes in the publish build","description":"# Claude Code Release Notes Generation Design\n\n## Implementation Complete ✅\n\nSuccessfully implemented Claude Code integration for intelligent release notes generation, replacing the basic git-changelog tool with sophisticated AI-powered analysis.\n\n## Technical Implementation\n\n### Architecture\n- **Direct Anthropic API integration**: Uses curl and the Messages API for reliable automation\n- **Comprehensive prompt template**: `.github/release-notes-prompt.md` provides detailed categorization guidelines\n- **GitHub workflow integration**: Modified `.github/workflows/build-rust.yaml` to use Claude API\n- **Robust fallback**: Falls back to basic git log if API fails\n\n### Workflow Changes\n```yaml\n- name: Generate release notes with Claude API\n  env:\n    ANTHROPIC_API_KEY: ${{ secrets.ANTHROPIC_API_KEY }}\n  run: |\n    # Collect git data and generate intelligent release notes via Anthropic API\n    # Falls back to basic git log if API fails\n```\n\n### Benefits over git-changelog\n1. **User-focused**: Explains impact rather than just listing technical changes\n2. **Intelligent categorization**: Groups changes into Features, Fixes, Performance, Internal, Dependencies\n3. **Consistent formatting**: Professional, readable structure across all releases\n4. **Context-aware**: Understands Eucalypt-specific patterns and terminology\n5. **Significance filtering**: Highlights important changes, de-emphasizes internal details\n\n## Setup Requirements\n\n### 1. GitHub Repository Secret\nAdd `ANTHROPIC_API_KEY` to repository secrets:\n- Go to repository Settings → Secrets and variables → Actions  \n- Add new repository secret: `ANTHROPIC_API_KEY`\n- Set value to your Anthropic API key\n\n### 2. API Key Requirements\n- Must have access to Claude 3.5 Sonnet model\n- Sufficient credits for release generation calls\n- Active billing account at console.anthropic.com\n\n### 3. Verification\nThe workflow will automatically use Claude API for the next release. If API fails, it gracefully falls back to basic git log format.\n\n## Status: Ready for Production ✅\n\n- [x] Analyze current git-changelog output format and limitations\n- [x] Create comprehensive release notes prompt template  \n- [x] Implement GitHub workflow with direct Anthropic API integration\n- [x] Add robust error handling and fallback mechanism\n- [x] Test prompt effectiveness with recent commit data\n- [x] Document setup requirements and API key configuration\n\n## Next Release\nThe next release build will automatically use Claude-generated release notes, providing professional, user-focused documentation of changes and improvements.\n","status":"closed","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-17T11:58:05.655532Z","created_by":"eucalypt_private/crew/koala","updated_at":"2026-01-17T11:58:05.706309Z","closed_at":"2026-01-17T11:58:05.706311Z","external_ref":"gh-66"}
{"id":"eu-77s","title":"Tab-to-space conversion","description":"Implement tab-to-space conversion with alignment preservation (assuming 2 or 4 char tab width).","status":"open","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-20T10:53:37.651056Z","created_by":"greg","updated_at":"2026-01-20T10:53:37.651056Z","dependencies":[{"issue_id":"eu-77s","depends_on_id":"eu-ngy","type":"blocks","created_at":"2026-01-20T10:57:07.006334Z","created_by":"greg"}]}
{"id":"eu-7ey9","title":"Error propagation silently swallowed in core module","description":"Multiple locations in the core module silently discard errors instead of propagating them.\n\n**Locations:**\n- src/core/simplify/compress.rs:57 - `Err(_) =\u003e None, //TODO: propagate`\n- src/core/desugar/rowan_ast.rs:767 - TODO mentions missing native implementation\n\n**Impact:** Silent error swallowing can mask bugs and make debugging difficult.\n\n**Recommendation:** Replace `Err(_) =\u003e None` patterns with proper error propagation using `?` operator or explicit error handling.\n\n(Refiled from ep-wv1)","status":"open","priority":2,"issue_type":"bug","created_at":"2026-01-21T18:40:56.622818Z","created_by":"mayor","updated_at":"2026-01-21T18:40:56.622818Z","labels":["code-quality","error-handling"]}
{"id":"eu-7kc","title":"0-arity operators","description":"## Analysis: 0-arity operators\n\n### Current State\n**Operator Arity Support (Current Parser):**\n- `Fixity` enum in `src/core/expr.rs` supports:\n  - `UnaryPrefix`, `UnaryPostfix` (arity 1)  \n  - `InfixLeft`, `InfixRight` (arity 2)\n- **No support for arity 0 (nullary) operators**\n\n### What are 0-arity Operators?\n**Definition:** Operators that take no arguments - essentially constants that look like operators.\n\n**Examples:**\n- Mathematical constants: `π`, `∞`, `ε`\n- Set theory: `∅` (empty set symbol) \n- Special values: `⊥` (bottom), `⊤` (top)\n- Context-dependent: `now`, `here`, `self`\n\n### Rowan Parser Status\n**Partially implemented**: 0-arity operators are already parsed by the Rowan parser on `origin/refactor/rowan` branch.\n\n### Use Case: Empty Set Symbol\nEnables using `∅` effectively as a constant, providing clean mathematical notation for empty collections.\n\n### Implementation Requirements\n\n#### Current Parser Extension\n1. **Extend `Fixity` enum** with `Nullary` variant\n2. **Update shunting yard algorithm** in `src/core/cook/shunt.rs`\n3. **Handle nullary operators** as immediate values (no argument consumption)\n\n#### Integration with Rowan Parser\n- **Consistency**: Ensure both parsers handle nullary operators identically\n- **Migration path**: Current parser support enables immediate use\n- **Future-proofing**: Aligns with Rowan implementation\n\n### Benefits\n- **Mathematical notation**: Natural constants like `π`, `∅`\n- **Language completeness**: Support full operator arity spectrum  \n- **Clean syntax**: Operator-style constants vs verbose identifiers\n- **DSL capabilities**: Domain-specific nullary operators\n\n### Priority\nHigh - important language feature, partially implemented in Rowan\n\n### Implementation Plan\n1. **Phase 1**: Extend current parser to match Rowan capabilities\n2. **Phase 2**: Verify consistency between parsers\n3. **Phase 3**: Add standard mathematical nullary operators\n4. **Phase 4**: Support user-defined nullary operators\n\n### Relationship to Other Issues\n- **Rowan Parser Integration**: Builds on existing Rowan implementation\n- **Operator System Completion**: Completes arity support (0, 1, 2)\n- **Mathematical DSL**: Enables mathematical notation improvements\n","status":"closed","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-17T11:58:05.146581Z","created_by":"eucalypt_private/crew/koala","updated_at":"2026-01-20T11:41:09.6873Z","closed_at":"2026-01-20T11:10:53.882243Z","external_ref":"gh-32","labels":["core"]}
{"id":"eu-7l8","title":"Digest: mol-witness-patrol","description":"Patrol 5: Rig quiet.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-20T09:05:51.018733Z","updated_at":"2026-01-20T09:05:51.018733Z","closed_at":"2026-01-20T09:05:51.018686Z","close_reason":"Squashed from 10 wisps"}
{"id":"eu-7ml","title":"Wire nullary operator body to core","description":"Wire nullary operator body expression through to core expression system","status":"closed","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-20T11:09:02.917794Z","created_by":"greg","updated_at":"2026-01-22T21:03:40.637085Z","closed_at":"2026-01-22T21:03:40.637085Z","close_reason":"Closed","dependencies":[{"issue_id":"eu-7ml","depends_on_id":"eu-2w7","type":"blocks","created_at":"2026-01-20T11:10:08.133265Z","created_by":"greg"}]}
{"id":"eu-7p4","title":"Handle args in load_core","description":"Handle args pseudo-input in source.rs::load_core() dispatching to args pseudoblock creator","status":"open","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-20T11:17:35.253533Z","created_by":"greg","updated_at":"2026-01-20T11:17:35.253533Z","dependencies":[{"issue_id":"eu-7p4","depends_on_id":"eu-t88","type":"blocks","created_at":"2026-01-20T11:18:51.105494Z","created_by":"greg"}]}
{"id":"eu-7ud","title":"YAML anchors","description":"## Analysis: YAML anchors\n\n### Scope\nSupport YAML anchors (`\u0026name`) and aliases (`*name`) when **importing YAML files**.\n\n### YAML Anchors \u0026 Aliases Feature\nStandard YAML feature for referencing and reusing values:\n```yaml\n# YAML with anchors and aliases\ndefaults: \u0026default-config\n  timeout: 30\n  retries: 3\n  \nservice-a:\n  config: *default-config\n  name: \"Service A\"\n\nservice-b:\n  config: *default-config  \n  name: \"Service B\"\n```\n\n### Current State\n**Unknown**: Need to investigate current behavior when importing YAML with anchors/aliases.\n\n### Design Questions\n\n#### Value Representation\n**How should resolved anchors be represented in eucalypt?**\n\n**Option 1: Full Expansion**\n```eu\n# Each alias becomes independent copy\nservice-a: {\n  config: {timeout: 30, retries: 3}\n  name: \"Service A\"\n}\nservice-b: {\n  config: {timeout: 30, retries: 3} \n  name: \"Service B\"\n}\n```\n\n**Option 2: Deduplication/Sharing**\n- Share common values in memory\n- Preserve reference relationships\n- Potential for space optimization\n\n#### Semantic Mapping\n**Challenges mapping YAML anchors to eucalypt:**\n1. **Reference vs value semantics**: YAML aliases vs eucalypt values\n2. **Mutability**: YAML allows reference updates, eucalypt is immutable\n3. **Circular references**: How to handle anchor cycles?\n4. **Complex structures**: Anchored lists, nested anchors\n\n### Implementation Considerations\n\n#### Investigation Needed\n1. **Current behavior**: What happens with anchored YAML imports?\n2. **YAML parser support**: Does rust yaml parser resolve anchors?\n3. **Memory implications**: Impact of expansion vs sharing\n4. **Error cases**: Invalid references, circular anchors\n\n#### Technical Challenges\n- **Resolution order**: When to resolve anchors during import\n- **Scope handling**: Anchor visibility within documents\n- **Performance**: Efficient resolution of complex anchor graphs\n- **Error reporting**: Clear errors for broken references\n\n### Priority\nLow - foundational for merge keys but needs design work\n\n### Relationship to Other Issues\n- **Issue #6 (YAML merge keys)**: Depends on anchor support\n- **Issue #16 (Multi document streams)**: Anchor scope across documents?\n\n### Use Cases\n- **Configuration reuse**: DRY principle in YAML configs\n- **Template patterns**: Shared configuration blocks\n- **Kubernetes YAML**: Common pattern in K8s manifests\n- **Legacy support**: Existing YAML files with anchors\n\n### Design Work Required\n1. **Semantic model**: How anchors map to eucalypt values\n2. **Resolution strategy**: Expansion vs sharing approach\n3. **Error handling**: Invalid references, cycles\n4. **Performance analysis**: Memory and speed implications\n5. **Multi-document**: Anchor scope in document streams\n\n### Implementation Plan\n1. **Investigation**: Current anchor handling behavior\n2. **Design**: Choose resolution and representation strategy\n3. **Implementation**: Enhance YAML import for anchors\n4. **Testing**: Comprehensive anchor/alias test cases\n5. **Documentation**: Document anchor support and limitations\n\n### Example Scenarios to Handle\n```yaml\n# Simple anchor/alias\nshared: \u0026shared {key: value}\nuser1: {data: *shared}\n\n# Nested anchors  \nconfig: \u0026config\n  db: \u0026db {host: localhost}\n  cache: *db\n\n# Circular reference (error case)\na: \u0026a {b: *b}\nb: \u0026b {a: *a}\n```\n","status":"open","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-17T11:58:09.969777Z","created_by":"eucalypt_private/crew/koala","updated_at":"2026-01-17T12:15:04.819795Z","external_ref":"gh-7","labels":["io"]}
{"id":"eu-7ws","title":"Digest: mol-witness-patrol","description":"Patrol 10: All quiet. No mail, no polecats, no cleanup wisps. Refinery running. Pinged deacon.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-21T10:24:01.962408Z","updated_at":"2026-01-21T18:48:28.386602Z","closed_at":"2026-01-21T10:24:01.962344Z","close_reason":"Squashed from 10 wisps"}
{"id":"eu-82o","title":"ToSourceDoc for StringPattern","description":"Implement ToSourceDoc for StringPattern (string interpolation).","status":"open","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-20T10:53:16.251978Z","created_by":"greg","updated_at":"2026-01-20T10:53:16.251978Z","dependencies":[{"issue_id":"eu-82o","depends_on_id":"eu-r3h","type":"blocks","created_at":"2026-01-20T10:56:35.029274Z","created_by":"greg"}]}
{"id":"eu-85m","title":"Digest: mol-witness-patrol","description":"Patrol 19: System quiet. No polecats, refinery running, no gates, no swarms. Deacon still NOT running. Inbox clear.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-21T11:05:40.989275Z","updated_at":"2026-01-21T18:48:28.39518Z","closed_at":"2026-01-21T11:05:40.989228Z","close_reason":"Squashed from 10 wisps"}
{"id":"eu-85u","title":"Eucalypt source formatting","description":"Ability to format eucalypt source (and potential AST, Core and STG) as per https://yorickpeterse.com/articles/how-to-write-a-code-formatter/ and the prettier algorithm.\n\n## Requirements\n\n### Core Formatting Requirements\n\n**R1. Content Preservation**: Preserve string literals, comments, section headers during formatting\n\n**R2. Dot Spacing Fix**: Fix `a . b` → `a.b` (remove spaces around dots, preserve decimal numbers)\n\n**R3. Colon Spacing Fix**: Fix `name : value` → `name: value` (remove space before colon in declarations)\n\n**R4. List Comma Spacing Fix**: Fix `[a,b,c]` → `[a, b, c]` (add space after commas)\n\n**R5. Block Spacing Fix**: Fix `{a:1}` → `{ a: 1 }` (add spaces inside braces)\n\n**R6. Line Breaking**: Break long lines when they exceed configured width\n\n**R7. Tab Detection and Reformatting**: Detect tabs and trigger appropriate handling (see R26)\n\n### Alignment and Indentation Requirements\n\n**R8. Good Alignment Preservation**: Preserve intentional alignment patterns when using spaces\n\n**R9. Excess Whitespace Normalization**: Normalize excess whitespace (5+ spaces) in single-line blocks to single spaces\n\n**R10. Blank Line Preservation**: Preserve blank lines in multi-line blocks\n\n**R11. Nested Block Indentation Preservation**: Don't modify proper indentation in nested blocks\n\n**R12. Consistent Indentation**: Indentation should be consistent multiples of indent_size\n\n### Semantic and Context Preservation\n\n**R13. Semantic Preservation**: Preserve semantic differences like `f(x)` vs `f (x)` \n\n**R14. Well-Formatted Code Detection**: Don't reformat code that's already well-formatted\n\n**R15. Conservative Spacing**: Only fix spacing violations, don't change user formatting choices\n\n### Advanced Formatting Logic\n\n**R16. Smart Line Breaking**: When breaking lines, break at logical boundaries (operators, natural grouping points)\n\n**R17. Context-Aware Indentation**: Line breaking should account for existing indentation in nested contexts\n\n**R18. Nesting Level Tracking**: Each nesting level should account for accumulated indentation\n\n### Tab Handling\n\n**R26. Tab-to-Space Alignment Conversion**: \n- Tab characters are always wrong and constitute misalignment\n- If tabs can be determined to be intended for alignment (by assuming tab width of 2 or 4 chars), reproduce the alignment using appropriate number of spaces\n- If tabs can't be \"legitimised\" as intentional alignment, trigger full reformatting of the appropriate level node\n\n## Design Notes\n\nThe implementation should support two distinct formatting modes:\n\n1. **Conservative Mode**: Fix spacing violations while preserving good formatting\n2. **Full Reformatting Mode**: Generate well-formatted output from scratch for any AST node\n\nWhen violations are detected that warrant reformatting (tabs, bad alignment), switch to full reformatting mode for that entire node subtree.\n","status":"closed","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-17T11:58:05.237161Z","created_by":"eucalypt_private/crew/koala","updated_at":"2026-01-20T11:41:09.687861Z","closed_at":"2026-01-20T10:59:15.733604Z","external_ref":"gh-64"}
{"id":"eu-863","title":"Create JSONL test fixture","description":"Create test JSONL file in harness/test/aux/","status":"open","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-20T11:33:41.914811Z","created_by":"greg","updated_at":"2026-01-20T11:33:41.914811Z","dependencies":[{"issue_id":"eu-863","depends_on_id":"eu-9lw","type":"blocks","created_at":"2026-01-20T11:34:01.894591Z","created_by":"greg"}]}
{"id":"eu-88f","title":"Harness test: mixed arity operators","description":"Add test for nullary operators mixed with unary/binary operators","status":"closed","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-20T11:09:13.274286Z","created_by":"greg","updated_at":"2026-01-22T21:03:41.890505Z","closed_at":"2026-01-22T21:03:41.890505Z","close_reason":"Closed","dependencies":[{"issue_id":"eu-88f","depends_on_id":"eu-xjv","type":"blocks","created_at":"2026-01-20T11:10:49.276876Z","created_by":"greg"}]}
{"id":"eu-8b6","title":"Digest: mol-witness-patrol","description":"Patrol 15: Rig quiet. Handing off after 15 routine patrols.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-20T09:09:02.931643Z","updated_at":"2026-01-20T09:09:02.931643Z","closed_at":"2026-01-20T09:09:02.931599Z","close_reason":"Squashed from 10 wisps"}
{"id":"eu-8d8","title":"Dead code elimination inside blocks","description":"## Analysis: Dead code elimination inside blocks\n\n### Problem Statement\n**Existing dead code elimination** is defeated by blocks - compiler can't determine whether functions defined in blocks are actually referenced.\n\n### Current Limitation\nDead code elimination works at top level but fails to analyze block member references:\n```eu\n{\n  helper1: x -\u003e x + 1    # Used by main\n  helper2: y -\u003e y * 2    # Never used - should be eliminated  \n  helper3: z -\u003e z + 10   # Used conditionally - hard to analyze\n  main: data -\u003e helper1(data)\n}\n```\n\n**Issue**: Compiler can't tell that `helper2` is dead code that could be eliminated.\n\n### Analysis Challenges\n\n#### Static Analysis Complexity\n- **Block member access**: Dynamic property access `block.member`\n- **Indirect references**: Functions passed as values to other functions\n- **Conditional usage**: Runtime-dependent access patterns\n- **Reflection-like access**: Computed property names\n\n#### Current Dead Code Elimination\n**Investigation needed**:\n1. **Where implemented**: Which compilation phase handles DCE?\n2. **Current scope**: What dead code can already be eliminated?\n3. **Block limitations**: Exactly why blocks defeat the analysis?\n\n### Implementation Approaches\n\n#### Option 1: Enhanced Static Analysis\n**Improve compiler's ability to track block member usage**:\n- **Reference tracking**: Follow property access chains\n- **Call graph analysis**: Build usage graph within blocks\n- **Conservative elimination**: Only remove provably unused members\n\n#### Option 2: Usage Annotations\n**Allow explicit marking of dead code**:\n```eu\n{\n  helper: x -\u003e x + 1     # Used\n  _debug: x -\u003e print(x)  # Unused (marked with _)\n  main: data -\u003e helper(data)\n}\n```\n\n#### Option 3: Whole-program Analysis\n**Analyze complete program for block usage patterns**:\n- **Cross-block references**: Track usage across block boundaries\n- **Export analysis**: Only preserve referenced functions\n- **Aggressive elimination**: Remove unused chains\n\n### Technical Considerations\n\n#### Analysis Complexity\n- **Aliasing**: Blocks passed around as values\n- **Dynamic access**: Runtime property access patterns\n- **Metaprogramming**: Computed member access\n- **Error handling**: Don't break valid dynamic usage\n\n#### Performance Impact\n- **Compilation time**: Cost of enhanced analysis\n- **Runtime benefit**: Smaller code size, faster execution\n- **Memory usage**: Reduced program size\n\n### Use Cases\n- **Library blocks**: Remove unused utility functions\n- **Configuration**: Eliminate unused config processors\n- **Template helpers**: Remove unused template functions\n- **Code generation**: Clean up generated block code\n\n### Priority\n**Needs investigation** to determine:\n1. **Current DCE implementation**: What exists today?\n2. **Block analysis gaps**: Specific limitations with blocks\n3. **Impact assessment**: How much dead code exists in practice?\n4. **Implementation complexity**: Cost vs benefit analysis\n\n### Investigation Required\n1. **Audit current DCE**: Where and how it works today\n2. **Block analysis**: Why blocks defeat current DCE\n3. **Usage patterns**: How blocks are actually used in eucalypt\n4. **Benefit measurement**: Potential code size reduction\n\n### Related Considerations\n- **Compilation phases**: Where DCE fits in compilation pipeline\n- **Optimization passes**: Integration with other optimizations  \n- **Debugging**: Preserving code for debugging vs elimination\n- **Incremental compilation**: How DCE affects compilation caching\n\n### Example Problem\n```eu\nutils: {\n  add: (x, y) -\u003e x + y        # Used\n  multiply: (x, y) -\u003e x * y   # Used  \n  divide: (x, y) -\u003e x / y     # UNUSED - should be eliminated\n  debug: x -\u003e print(x)        # UNUSED - should be eliminated\n}\n\nmain: data -\u003e utils.add(data, utils.multiply(data, 2))\n```\n\n**Goal**: Eliminate `utils.divide` and `utils.debug` automatically.\n","status":"open","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-17T11:58:08.487887Z","created_by":"eucalypt_private/crew/koala","updated_at":"2026-01-17T12:15:03.321596Z","external_ref":"gh-27","labels":["perf"]}
{"id":"eu-8f2g","title":"GC sweep moves all blocks between lists","description":"In src/eval/memory/heap.rs:519-531, the sweep phase pops all blocks from rest, checks recyclability, and pushes to either recycled or unusable. This is O(blocks) with poor cache locality due to LinkedList traversal.\n\n```rust\npub fn sweep(\u0026mut self) {\n    let mut unusable: LinkedList\u003cBumpBlock\u003e = LinkedList::default();\n    while let Some(mut block) = self.rest.pop_front() {\n        if block.recycle() {\n            self.recycled.push_back(block);\n        } else {\n            unusable.push_back(block);\n        }\n    }\n    self.rest.append(\u0026mut unusable);\n}\n```\n\n**Fix:** Use Vec instead of LinkedList for better cache locality.\n\n**Source:** Performance Review hq-leg-om5os","status":"closed","priority":2,"issue_type":"chore","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-21T12:28:32.038213Z","created_by":"mayor","updated_at":"2026-01-21T14:10:40.401113Z","closed_at":"2026-01-21T14:10:40.401113Z","close_reason":"Changed HeapState.recycled and HeapState.rest from LinkedList to VecDeque. VecDeque provides better cache locality than LinkedList for the sweep operation's sequential access pattern.","labels":["performance"]}
{"id":"eu-8hj","title":"Comma spacing normalisation","description":"Implement comma spacing normalisation: one space after commas in lists ([a,b] -\u003e [a, b]).","status":"open","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-20T10:53:27.565187Z","created_by":"greg","updated_at":"2026-01-20T10:53:27.565187Z","dependencies":[{"issue_id":"eu-8hj","depends_on_id":"eu-r3h","type":"blocks","created_at":"2026-01-20T10:56:43.073413Z","created_by":"greg"}]}
{"id":"eu-8k1","title":"Harness test: basic ↑ usage","description":"Add harness test for basic ↑ operator usage","status":"open","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-20T11:27:54.201841Z","created_by":"greg","updated_at":"2026-01-20T11:27:54.201841Z","dependencies":[{"issue_id":"eu-8k1","depends_on_id":"eu-2b4","type":"blocks","created_at":"2026-01-20T11:28:09.108426Z","created_by":"greg"}]}
{"id":"eu-8mj","title":"Digest: mol-witness-patrol","description":"Patrol 6: Rig quiet.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-20T09:06:11.498236Z","updated_at":"2026-01-20T09:06:11.498236Z","closed_at":"2026-01-20T09:06:11.498182Z","close_reason":"Squashed from 10 wisps"}
{"id":"eu-8my","title":"Implement arity() for Nullary","description":"Implement arity() returning 0 for Nullary variant","status":"closed","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-20T11:09:01.583188Z","created_by":"greg","updated_at":"2026-01-22T21:03:39.812179Z","closed_at":"2026-01-22T21:03:39.812179Z","close_reason":"Closed","dependencies":[{"issue_id":"eu-8my","depends_on_id":"eu-9we","type":"blocks","created_at":"2026-01-20T11:09:46.457441Z","created_by":"greg"}]}
{"id":"eu-8nqz","title":"eucalypt-mode.el: multicharacter symbols only highlight colon and first char","description":"Multicharacter symbols like :PASS or :FAIL are not fully highlighted in eucalypt-mode.el.\n\n**Current behavior:** Only the colon and first character are highlighted (e.g., ':P' in ':PASS')\n\n**Expected behavior:** The entire symbol should be highlighted (e.g., ':PASS')\n\nThis is likely a regex issue in the font-lock keywords for symbol highlighting.","status":"open","priority":2,"issue_type":"bug","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-21T18:38:01.883404Z","created_by":"mayor","updated_at":"2026-01-21T18:38:01.883404Z"}
{"id":"eu-8o8","title":"Project mode - autoprocess xxx.eu.ext","description":"## Analysis: Project mode - autoprocess xxx.eu.ext\n\n### Goal\n**Automatically process eucalypt template files** based on naming pattern, generating output files by executing templates.\n\n### File Pattern Convention\n```\nx.eu.yaml  →  x.yaml     (execute eucalypt, output YAML)\nx.eu.json  →  x.json     (execute eucalypt, output JSON)\nx.eu.toml  →  x.toml     (execute eucalypt, output TOML)\nx.eu.html  →  x.html     (execute eucalypt, output HTML)\nx.eu.txt   →  x.txt      (execute eucalypt, output text)\n```\n\n### Usage Examples\n\n#### Configuration Generation\n```bash\n# Directory structure\nproject/\n  ├── config.eu.yaml    # Eucalypt template\n  ├── nginx.eu.conf     # Eucalypt template\n  └── data.json         # Static file\n\n# Command\neu --project-mode .\n\n# Result\nproject/\n  ├── config.eu.yaml\n  ├── config.yaml       # Generated\n  ├── nginx.eu.conf\n  ├── nginx.conf        # Generated\n  └── data.json         # Unchanged\n```\n\n#### Development Workflow\n```bash\n# Watch mode for continuous generation\neu --project-mode --watch .\n\n# Specific directory\neu --project-mode configs/\n\n# With options\neu --project-mode --force .  # Overwrite existing\n```\n\n### Implementation Features\n\n#### Directory Processing\n- **Recursive scanning**: Find all `.eu.ext` files\n- **Pattern matching**: Identify template files\n- **Batch execution**: Process all templates\n- **Skip non-templates**: Ignore regular files\n\n#### Output Generation\n- **Format detection**: Use extension to determine output format\n- **Path preservation**: Maintain directory structure\n- **Name transformation**: `x.eu.yaml` → `x.yaml`\n- **Format selection**: `-x` option from filename\n\n#### Dependency Handling\n- **Import tracking**: Detect when templates import other files\n- **Regeneration**: Update when dependencies change\n- **Order resolution**: Process dependencies first\n- **Cycle detection**: Handle circular dependencies\n\n### Use Cases\n\n#### Project Scaffolding\n```bash\n# Template project\ntemplates/\n  ├── Dockerfile.eu.txt\n  ├── docker-compose.eu.yaml\n  ├── package.eu.json\n  └── .gitignore.eu.txt\n\n# Generate project files\neu --project-mode templates/ --output new-project/\n```\n\n#### Configuration Management\n```bash\n# Environment-specific configs\nconfigs/\n  ├── base.eu.yaml\n  ├── dev.eu.yaml\n  ├── prod.eu.yaml\n\n# Generate all configs\neu --project-mode configs/\n```\n\n#### Documentation Generation\n```bash\n# Generate docs from templates\ndocs/\n  ├── README.eu.md\n  ├── API.eu.html\n  └── examples.eu.txt\n```\n\n### CLI Options\n\n#### Project Mode Flags\n```bash\neu --project-mode [directory]     # Process directory\neu --project-mode --watch         # Watch for changes\neu --project-mode --force         # Overwrite existing\neu --project-mode --dry-run       # Show what would be done\neu --project-mode --verbose       # Show processing details\neu --project-mode --output DIR    # Alternative output directory\n```\n\n#### Configuration File\n```.eucalypt-project``` file for project settings:\n```yaml\nproject-mode:\n  ignore:\n    - \"**/node_modules/**\"\n    - \"**/.git/**\"\n  force: false\n  watch: true\n```\n\n### Benefits\n- **Automation**: Batch template processing\n- **Convention**: Clear file naming pattern\n- **Integration**: Works with build systems\n- **Flexibility**: Any output format supported\n- **Development**: Watch mode for rapid iteration\n\n### Technical Considerations\n\n#### File System Operations\n- **Atomic writes**: Avoid partial files\n- **Permission handling**: Check write permissions\n- **Error recovery**: Handle individual file failures\n- **Backup**: Option to backup before overwrite\n\n#### Performance\n- **Parallel processing**: Process independent files concurrently\n- **Caching**: Avoid reprocessing unchanged templates\n- **Incremental**: Only process modified files\n- **Memory**: Handle large directories efficiently\n\n### Priority\nMedium - useful workflow automation feature\n\n### Implementation Plan\n1. **Pattern detection**: Implement `.eu.ext` recognition\n2. **Batch processor**: Directory scanning and processing\n3. **CLI integration**: Add --project-mode option\n4. **Watch mode**: File system monitoring\n5. **Dependency tracking**: Smart regeneration\n6. **Testing**: Various project structures\n\n### Related Features\n- **Multi-target output (Issue #16)**: Similar batch processing\n- **Import system**: Dependency tracking\n- **CLI enhancements**: Project-level operations\n\n### Success Criteria\n- **Intuitive naming**: Clear pattern convention\n- **Reliable generation**: Consistent output\n- **Fast processing**: Efficient for large projects\n- **Developer friendly**: Good error messages\n","status":"open","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-17T11:58:10.725768Z","created_by":"eucalypt_private/crew/koala","updated_at":"2026-01-17T12:15:05.843356Z","external_ref":"gh-22","labels":["cli"]}
{"id":"eu-8om","title":"Capture args after -- separator","description":"Update CLI parsing to capture arguments after -- separator","status":"open","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-20T11:17:33.681825Z","created_by":"greg","updated_at":"2026-01-20T11:17:33.681825Z","dependencies":[{"issue_id":"eu-8om","depends_on_id":"eu-1dn","type":"blocks","created_at":"2026-01-20T11:18:39.557806Z","created_by":"greg"}]}
{"id":"eu-8s0","title":"Warnings","description":"## Analysis: Warnings\n\n### Goal\nImplement a **comprehensive warning system** for eucalypt, similar to Python's warnings module.\n\n### Scope\nSupport for **all warning types**:\n- **Compiler warnings**: Deprecated syntax, suspicious patterns\n- **Runtime warnings**: Performance issues, deprecated functions\n- **User-defined warnings**: Allow eucalypt code to emit warnings\n\n### Warning Characteristics\n- **Non-fatal**: Execution continues after warning\n- **Stderr output**: Warnings go to stderr, preserving stdout for data\n- **Source location**: Reference eucalypt code location (like errors)\n- **Filterable**: Ability to suppress or elevate warnings\n\n### Warning Types\n\n#### Built-in Warning Categories\n```eu\n# Deprecation warnings\nDeprecationWarning: Function 'old-func' is deprecated, use 'new-func'\n\n# Performance warnings  \nPerformanceWarning: Large list operation may be slow\n\n# Syntax warnings\nSyntaxWarning: Suspicious pattern that might not work as expected\n\n# Runtime warnings\nRuntimeWarning: Division by zero in non-critical path\n```\n\n#### User-Defined Warnings\n```eu\n# Emit custom warnings from eucalypt code\nwarn(\"Configuration value missing, using default\")\nwarn(\"API rate limit approaching\", category: :UserWarning)\n```\n\n### Implementation Approach\n\n#### Warning Infrastructure\n1. **Warning types**: Define warning category hierarchy\n2. **Emission system**: Functions to emit warnings\n3. **Filtering**: Control which warnings are shown\n4. **Formatting**: Consistent warning output format\n\n#### Output Format\nSimilar to error format with source location:\n```\n[0m[1m[38;5;11mwarning[0m[1m: deprecated function usage[0m\n  [0m[34m┌─[0m module.eu:45:12\n  [0m[34m│[0m\n[0m[34m45[0m [0m[34m│[0m result: old-func(data)\n  [0m[34m│[0m         [0m[33m^^^^^^^^[0m [0m[33mdeprecated since v0.3.0[0m\n  [0m[34m│[0m\n  [0m[34m=[0m help: use 'new-func' instead\n```\n\n### API Design\n\n#### Compiler Warnings\nAutomatic detection during compilation:\n- **Deprecated features**: Old syntax, functions\n- **Suspicious patterns**: Likely errors\n- **Performance pitfalls**: Known slow patterns\n\n#### Runtime Warning API\n```eu\n# Basic warning\nwarn(\"Something concerning happened\")\n\n# Categorized warning\nwarn(\"Using fallback\", category: :RuntimeWarning)\n\n# Warning with location\nwarn-at(location, \"Problem at specific location\")\n\n# Conditional warning\nwarn-if(condition, \"Only warn if condition true\")\n```\n\n#### Warning Control\n```bash\n# CLI options\neu --warnings=error script.eu   # Treat warnings as errors\neu --warnings=ignore script.eu  # Suppress all warnings\neu --warnings=once script.eu    # Show each warning once\n\n# Or via environment\nEU_WARNINGS=error eu script.eu\n```\n\n### Use Cases\n\n#### Deprecation Management\n```eu\n# Mark functions as deprecated\n{deprecated: \"Use new-func instead\"}\nold-func(x): x + 1  # Triggers warning when used\n```\n\n#### Data Validation\n```eu\n# Warn on suspicious data\nprocess-data(data): {\n  if data.size \u003e 10000:\n    warn(\"Large dataset may cause performance issues\")\n  # Continue processing...\n}\n```\n\n#### Configuration Handling\n```eu\n# Warn on missing config with defaults\nconfig: load-config() default-on-missing({\n  timeout: warn-default(30, \"No timeout configured\")\n})\n```\n\n### Technical Considerations\n\n#### Integration Points\n- **Compiler phases**: Where to detect compile-time warnings\n- **Runtime system**: Warning emission during execution\n- **Error handling**: Relationship with error system\n- **Output system**: Stderr handling, formatting\n\n#### Performance\n- **Minimal overhead**: Warnings shouldn't slow execution\n- **Lazy evaluation**: Only format warnings if shown\n- **Deduplication**: Avoid repeated warnings\n\n### Benefits\n- **Better debugging**: Early problem detection\n- **Smooth migration**: Deprecation management\n- **User feedback**: Non-fatal issue reporting\n- **Code quality**: Encourage best practices\n\n### Priority\nMedium - important for user experience and code quality\n\n### Implementation Plan\n1. **Warning types**: Define category hierarchy\n2. **Compiler integration**: Add warning detection\n3. **Runtime API**: Implement warn() functions\n4. **Output formatting**: Consistent warning display\n5. **Control mechanisms**: CLI and environment options\n6. **Documentation**: Warning usage guide\n\n### Related Issues\n- **Error handling**: Similar output format to errors\n- **Issue #43 (Error testing)**: Warnings should be testable too\n- **Issue #11 (v2 prelude)**: Deprecation warnings for v1→v2\n","status":"open","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-17T11:58:10.268156Z","created_by":"eucalypt_private/crew/koala","updated_at":"2026-01-17T12:15:05.209129Z","external_ref":"gh-5","labels":["topic"]}
{"id":"eu-914","title":"Update command-line.md docs","description":"Update command-line.md with -- argument passing documentation","status":"open","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-20T11:17:47.029433Z","created_by":"greg","updated_at":"2026-01-20T11:17:47.029433Z","labels":["lib"],"dependencies":[{"issue_id":"eu-914","depends_on_id":"eu-uoh","type":"blocks","created_at":"2026-01-20T11:19:03.39239Z","created_by":"greg"}]}
{"id":"eu-97k","title":"ToSourceDoc for List","description":"Implement ToSourceDoc for List with proper comma spacing and line breaking.","status":"open","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-20T10:53:15.314741Z","created_by":"greg","updated_at":"2026-01-20T10:53:15.314741Z","dependencies":[{"issue_id":"eu-97k","depends_on_id":"eu-r3h","type":"blocks","created_at":"2026-01-20T10:56:34.506595Z","created_by":"greg"}]}
{"id":"eu-9bu","title":"Tab-triggered mode switching","description":"Implement mode switching to full reformatting when tabs cannot be legitimised as alignment.","status":"open","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-20T10:53:37.891308Z","created_by":"greg","updated_at":"2026-01-20T10:53:37.891308Z","dependencies":[{"issue_id":"eu-9bu","depends_on_id":"eu-77s","type":"blocks","created_at":"2026-01-20T10:57:07.138436Z","created_by":"greg"}]}
{"id":"eu-9g1","title":"Digest: mol-witness-patrol","description":"Patrol 13: Rig quiet.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-20T09:08:25.323492Z","updated_at":"2026-01-20T09:08:25.323492Z","closed_at":"2026-01-20T09:08:25.323433Z","close_reason":"Squashed from 10 wisps"}
{"id":"eu-9hx","title":"Desugar DeclarationKind::Nullary","description":"Handle DeclarationKind::Nullary in desugaring phase","status":"closed","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-20T11:09:02.257447Z","created_by":"greg","updated_at":"2026-01-22T21:03:40.017909Z","closed_at":"2026-01-22T21:03:40.017909Z","close_reason":"Closed","dependencies":[{"issue_id":"eu-9hx","depends_on_id":"eu-9we","type":"blocks","created_at":"2026-01-20T11:10:07.860877Z","created_by":"greg"}]}
{"id":"eu-9lw","title":"Register jsonl format","description":"Register jsonl format in src/import/mod.rs match statement","status":"open","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-20T11:33:40.997641Z","created_by":"greg","updated_at":"2026-01-20T11:33:40.997641Z","dependencies":[{"issue_id":"eu-9lw","depends_on_id":"eu-c3i","type":"blocks","created_at":"2026-01-20T11:34:01.744992Z","created_by":"greg"}]}
{"id":"eu-9me","title":"Digest: mol-witness-patrol","description":"Patrol 1: No active polecats, no pending MRs, no cleanup wisps. Deacon healthy. Inbox empty.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-20T09:02:37.217134Z","updated_at":"2026-01-20T09:02:37.217134Z","closed_at":"2026-01-20T09:02:37.217092Z","close_reason":"Squashed from 10 wisps"}
{"id":"eu-9mm","title":"Division by zero when indent_size=0 in formatter","description":"In src/syntax/export/format.rs:440, tab expansion calculates:\n```rust\nlet spaces = self.config.indent_size - (col % self.config.indent_size);\n```\n\nIf indent_size is 0, this causes a division by zero panic.\n\n**Impact:** Program crash if user provides `--indent 0`.\n\n**Fix:** Validate indent_size in FormatterConfig::new() with `.max(1)`.\n\n**Source:** Correctness Review hq-leg-az4n6","status":"closed","priority":1,"issue_type":"bug","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-21T12:27:09.260388Z","created_by":"mayor","updated_at":"2026-01-21T14:02:16.865162Z","closed_at":"2026-01-21T14:02:16.865162Z","close_reason":"Added .max(1) to indent_size in FormatterConfig::new() to prevent division by zero when indent_size=0."}
{"id":"eu-9we","title":"Add Nullary to Fixity enum","description":"Add Nullary variant to Fixity enum in src/core/expr.rs","status":"closed","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-20T11:09:01.225022Z","created_by":"greg","updated_at":"2026-01-22T21:03:39.507019Z","closed_at":"2026-01-22T21:03:39.507019Z","close_reason":"Closed"}
{"id":"eu-a6z","title":"Digest: mol-witness-patrol","description":"Patrol 21: System quiet. No polecats, refinery running, no gates, no swarms. Deacon still NOT running. Inbox clear.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-21T11:10:57.453584Z","updated_at":"2026-01-21T18:48:28.359049Z","closed_at":"2026-01-21T11:10:57.45353Z","close_reason":"Squashed from 10 wisps"}
{"id":"eu-ab4","title":"O(depth) environment frame traversal","description":"In src/eval/machine/env.rs:220-229, every local variable access traverses the environment chain. The cell() function is called from get() (line 238) for every Ref::L(index) resolution. For deeply nested closures, this creates O(depth) overhead per variable access.\n\nAlso, bindings.clone() on line 223 clones the Array on every access.\n\n**Impact:** Slow nested closure execution.\n\n**Fix:** Flatten environments or cache computed indices.\n\n**Source:** Performance Review hq-leg-om5os","status":"closed","priority":1,"issue_type":"feature","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-21T12:27:59.111679Z","created_by":"mayor","updated_at":"2026-01-21T14:11:43.482197Z","closed_at":"2026-01-21T14:11:43.482197Z","close_reason":"Reviewed: Array.clone() is cheap (pointer+length copy). The O(depth) traversal issue would require architectural changes - either flattening environments at compile time or caching computed indices in Ref::L. Both affect the core variable resolution mechanism. Consider a separate design ticket for environment optimization.","labels":["performance"]}
{"id":"eu-akk","title":"Digest: mol-witness-patrol","description":"Patrol 14: Rig quiet.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-20T09:08:43.037452Z","updated_at":"2026-01-20T09:08:43.037452Z","closed_at":"2026-01-20T09:08:43.037395Z","close_reason":"Squashed from 10 wisps"}
{"id":"eu-ayp","title":"Tight operator for list head","description":"## Analysis: Tight operator for list head\n\n### Problem Statement\n**Awkward syntax** requiring parentheses: `(x head).property` instead of desired `x head.property`.\n\n### Current Issue\nThe `head` function has **lower precedence** than property access, forcing parentheses for chaining:\n```eu\n# Current (awkward)\n(items head).name\n(users head).email\n\n# Desired (natural)\nitems ⊙.name      # with tight operator\nusers ⊙.email\n```\n\n### Solution: Tight-Binding Unary Operator\nCreate a **unary operator** with **higher precedence** than property access for list head operation.\n\n### Unicode Symbol Research\n**Inspiration from UIUA** and other array languages:\n- **⊙** (white circle) - could represent \"first/top\"\n- **⌈** (ceiling) - \"top\" element\n- **↑** (up arrow) - \"first\" or \"take from top\"\n- **◦** (bullet operator) - but conflicts with current anaphora use\n- **⋄** (diamond) - distinctive and unused\n\n### Implementation Requirements\n\n#### Operator Properties\n- **Unary prefix**: `⊙list` \n- **High precedence**: Tighter than property access\n- **Equivalent to head**: Same semantics as existing `head` function\n\n#### Grammar Integration\n- **Lexer**: Recognize chosen Unicode symbol\n- **Parser**: Handle as unary prefix operator\n- **Precedence**: Higher than `.` (property access)\n\n### Syntax Examples\n```eu\n# Before\n(users head).name\n(items head).price\n((data.users) head).email\n\n# After (with ⊙)\n⊙users.name\n⊙items.price  \n⊙data.users.email\n```\n\n### Benefits\n- **Cleaner syntax**: No parentheses needed\n- **Better readability**: More natural expression flow\n- **Consistent**: Aligns with property chaining patterns\n- **Concise**: Shorter than `head` function call\n\n### Implementation Considerations\n\n#### Symbol Choice\n- **Unicode support**: Ensure symbol renders well\n- **Distinctiveness**: Avoid confusion with existing operators\n- **Memorability**: Symbol should suggest \"first/head\"\n- **Input method**: Consider how users will type it\n\n#### Precedence Rules\n- **Higher than property**: `⊙list.prop` works correctly\n- **Lower than literals**: `⊙[1,2,3]` parses as expected\n- **Consistent**: Follows logical precedence hierarchy\n\n### Priority\nMedium - quality of life improvement for common operation\n\n### Related Considerations\n- **Tail operator**: Might want similar for `tail`\n- **Other list ops**: Could extend pattern to other operations\n- **Documentation**: Update syntax guides\n- **Migration**: `head` function remains available\n\n### Research Action\n**Check UIUA operators** at https://www.uiua.org/ for inspiration on appropriate Unicode symbols for array/list operations.\n","status":"closed","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-17T11:58:06.307567Z","created_by":"eucalypt_private/crew/koala","updated_at":"2026-01-20T11:41:09.688401Z","closed_at":"2026-01-20T11:28:09.953102Z","external_ref":"gh-9","labels":["lib"]}
{"id":"eu-b4c","title":"VM: Bytecode implementation","description":"## Analysis: VM: Bytecode implementation\n\n### Goal\nImplement STG (Spineless Tagless G-machine) execution using bytecode for **performance and portability**.\n\n### Implementation Options\n\n#### Option 1: Custom Bytecode\n- **Define our own bytecode** format optimized for STG semantics\n- **Full control** over instruction set and optimizations\n- **STG-specific operations** as native bytecode instructions\n\n#### Option 2: Target Existing VM\n- **WebAssembly (WASM)** - excellent portability, growing ecosystem\n- **JVM bytecode** - mature ecosystem, good tooling\n- **Other VMs** - BEAM, CLR, etc.\n\n### Relationship to Current Architecture\n**Replacement** for current direct STG evaluation:\n- Current: STG AST → Direct evaluation\n- Future: STG AST → Bytecode → VM execution\n\n### Benefits\n- **Performance**: Bytecode interpretation typically faster than AST walking\n- **Portability**: Run eucalypt programs anywhere the VM runs\n- **Optimization**: Bytecode-level optimizations possible\n- **Debugging**: Better debugging/profiling infrastructure\n\n### Technical Considerations\n\n#### STG-Specific Challenges\n- **Lazy evaluation** representation in bytecode\n- **Thunk updates** and indirection handling\n- **Garbage collection** integration\n- **Closure representation** in bytecode format\n\n#### Literature References\n- **\"Implementing lazy functional languages on stock hardware: the Spineless Tagless G-machine\"**\n- **STG bytecode implementations** in other languages\n- **Functional language VMs** (OCaml, Erlang BEAM)\n\n### Implementation Phases\n1. **Research phase**: Study STG bytecode implementations\n2. **Design phase**: Choose bytecode format (custom vs existing)\n3. **Core implementation**: Basic STG operations in bytecode\n4. **Optimization phase**: Performance improvements\n5. **Tooling phase**: Debugger, profiler, etc.\n\n### Priority\nMedium - infrastructure improvement, lower than language/syntax enhancements\n\n### Trade-offs\n- **Custom bytecode**: More work but perfect fit for STG\n- **WASM target**: Great portability but may complicate lazy evaluation\n- **Complexity**: Significant implementation effort\n- **Maintenance**: Another layer in the execution stack\n\n### Success Criteria\n- **Performance improvement** over current implementation\n- **Portability** to multiple platforms\n- **Maintained semantics** of lazy evaluation\n- **Debugging capabilities** improvement\n","status":"open","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-17T11:58:06.807304Z","created_by":"eucalypt_private/crew/koala","updated_at":"2026-01-17T12:15:00.901938Z","external_ref":"gh-25","labels":["vm"]}
{"id":"eu-b5q","title":"Tight Head Operator (↑)","description":"Add ↑ as tight-binding prefix operator for list head. See openspec/changes/add-tight-head-operator/ for spec.","status":"closed","priority":2,"issue_type":"epic","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-20T11:27:44.411711Z","created_by":"greg","updated_at":"2026-01-20T11:55:09.729949Z","closed_at":"2026-01-20T11:55:09.729949Z","close_reason":"Implemented ↑ operator in prelude with precedence 95, added tests in harness/test/055_tight_head_operator.eu"}
{"id":"eu-b71","title":"Digest: mol-witness-patrol","description":"Patrol 10: Rig quiet.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-20T09:07:28.664439Z","updated_at":"2026-01-20T09:07:28.664439Z","closed_at":"2026-01-20T09:07:28.664396Z","close_reason":"Squashed from 10 wisps"}
{"id":"eu-bdj","title":"Idempotency tests","description":"Create idempotency tests: format twice, verify identical output.","status":"open","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-20T10:53:52.432312Z","created_by":"greg","updated_at":"2026-01-20T10:53:52.432312Z","dependencies":[{"issue_id":"eu-bdj","depends_on_id":"eu-fq7","type":"blocks","created_at":"2026-01-20T10:58:41.59167Z","created_by":"greg"}]}
{"id":"eu-ber","title":"Render prelude docs","description":"## Analysis: Render prelude docs\n\n### Goal\n**Generate HTML documentation** from prelude source code, integrating with better documentation surfacing capabilities.\n\n### Requirements\n- **Source code generation**: Extract docs from prelude source\n- **HTML output**: Formatted, navigable HTML documentation\n- **Integration**: Part of better documentation surfacing (Issue #11)\n- **Comprehensive coverage**: Document all prelude functions\n\n### Current State Investigation Needed\n1. **Prelude location**: Where are prelude functions defined?\n2. **Documentation format**: How are functions currently documented?\n3. **Extraction method**: How to parse documentation from source?\n4. **Coverage assessment**: Which functions lack documentation?\n\n### Documentation Generation Approach\n\n#### Source Analysis\n- **Parse prelude files**: Extract function definitions and docs\n- **Metadata extraction**: Function signatures, descriptions, examples\n- **Type information**: Parameter and return types where available\n- **Usage examples**: Extract or generate usage examples\n\n#### HTML Generation\n- **Structured output**: Organized by categories/modules\n- **Search capability**: Find functions by name or purpose\n- **Cross-references**: Links between related functions\n- **Examples**: Runnable code examples where possible\n\n### Documentation Structure\n\n#### Function Documentation\n```html\n\u003cdiv class=\"function\"\u003e\n  \u003ch3\u003emap\u003c/h3\u003e\n  \u003cdiv class=\"signature\"\u003elist.map(function, list)\u003c/div\u003e\n  \u003cdiv class=\"description\"\u003e\n    Apply function to each element of list, returning new list.\n  \u003c/div\u003e\n  \u003cdiv class=\"example\"\u003e\n    \u003ccode\u003e[1, 2, 3] map(_ * 2)  # → [2, 4, 6]\u003c/code\u003e\n  \u003c/div\u003e\n  \u003cdiv class=\"see-also\"\u003e\n    Related: \u003ca href=\"#filter\"\u003efilter\u003c/a\u003e, \u003ca href=\"#fold\"\u003efold\u003c/a\u003e\n  \u003c/div\u003e\n\u003c/div\u003e\n```\n\n#### Category Organization\n- **List operations**: map, filter, fold, etc.\n- **String functions**: String manipulation\n- **Block operations**: Block/object functions  \n- **Math functions**: Arithmetic and mathematical operations\n- **I/O functions**: Input/output operations\n- **Utility functions**: General utilities\n\n### Integration with v2 Prelude (Issue #11)\n\n#### Modular Documentation\nAlign with v2 prelude organization:\n- **list.** namespace documentation\n- **string.** namespace documentation\n- **block.** namespace documentation\n- **math.** namespace documentation\n\n#### Migration Documentation\n- **v1 → v2 mapping**: Show function name changes\n- **Deprecation notices**: Highlight deprecated functions\n- **Migration examples**: How to update code\n\n### Implementation Approach\n\n#### Documentation Extraction\n1. **Parser integration**: Use existing eucalypt parser\n2. **Comment processing**: Extract documentation comments\n3. **Signature analysis**: Determine function signatures\n4. **Example extraction**: Find usage examples in source\n\n#### HTML Generation\n1. **Template system**: HTML templates for documentation pages\n2. **Static site generation**: Build complete documentation site\n3. **Asset management**: CSS, JavaScript for interactive features\n4. **Build integration**: Generate docs as part of build process\n\n### Features\n\n#### Core Features\n- **Function reference**: Complete function documentation\n- **Search functionality**: Find functions quickly\n- **Category browsing**: Explore by functional area\n- **Cross-references**: Links between related functions\n\n#### Enhanced Features\n- **Live examples**: Interactive code examples\n- **Version comparison**: v1 vs v2 differences\n- **Usage patterns**: Common usage examples\n- **Performance notes**: Efficiency considerations\n\n### Benefits\n- **Discoverability**: Users can find relevant functions\n- **Learning**: Clear examples and explanations\n- **Reference**: Quick lookup during development\n- **Migration**: Guidance for v1 → v2 transition\n\n### Priority\nHigh - essential for user experience and prelude usability\n\n### Implementation Plan\n1. **Analysis phase**: Investigate current prelude structure and documentation\n2. **Extraction system**: Build documentation extraction from source\n3. **Template design**: Create HTML templates for documentation\n4. **Generation pipeline**: Automate documentation build process\n5. **Integration**: Connect with build system and distribution\n\n### Integration Points\n- **Build system**: Generate docs automatically\n- **CLI help**: Link to online documentation\n- **IDE integration**: Future LSP could reference docs\n- **Website**: Host documentation for easy access\n\n### Success Criteria\n- **Complete coverage**: All prelude functions documented\n- **Easy navigation**: Users can quickly find what they need\n- **Clear examples**: Every function has working examples\n- **Maintainable**: Easy to update as prelude evolves\n","status":"open","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-17T11:58:08.990125Z","created_by":"eucalypt_private/crew/koala","updated_at":"2026-01-17T12:15:03.943108Z","external_ref":"gh-36","labels":["lib"]}
{"id":"eu-bpa","title":"Digest: mol-witness-patrol","description":"Patrol 12: Rig quiet.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-20T09:08:05.71948Z","updated_at":"2026-01-20T09:08:05.71948Z","closed_at":"2026-01-20T09:08:05.719431Z","close_reason":"Squashed from 10 wisps"}
{"id":"eu-bpe","title":"STG: Inline into STG wrappers","description":"## Analysis: STG: Inline into STG wrappers\n\n### Current Status\n**Unclear intent** - the specific optimization intended by this issue needs investigation and clarification.\n\n### Context\n**Inlining is crucial for STG performance** - but the specific \"STG wrappers\" that should be inlined are not defined.\n\n### Investigation Needed\n\n#### STG Implementation Analysis\n1. **Current wrapper functions**: What wrapper functions exist in the STG implementation?\n2. **Performance bottlenecks**: Where are inlining opportunities in the current code?\n3. **Call site analysis**: Which function calls have high overhead?\n4. **Optimization opportunities**: What specific inlining would improve performance?\n\n#### Possible STG Inlining Targets\n- **Built-in operations**: Arithmetic, comparison, list operations\n- **Memory allocation**: Object creation and GC interaction\n- **Function application**: Call/apply mechanisms\n- **Thunk evaluation**: Lazy evaluation overhead\n- **Pattern matching**: Case analysis optimization\n- **Primitive operations**: Core STG primitives\n\n### STG Performance Considerations\n- **Function call overhead**: Reducing indirection costs\n- **Closure creation**: Optimizing closure allocation\n- **Tail call optimization**: Efficient recursive calls\n- **Specialization**: Type-specific optimizations\n- **Dead code elimination**: Removing unused code paths\n\n### Priority\n**Low - needs investigation** to determine specific optimization targets\n\n### Action Required\n1. **Audit STG implementation**: Identify current wrapper functions and inlining opportunities\n2. **Performance profiling**: Measure where inlining would provide benefits\n3. **Define specific targets**: Clarify what \"STG wrappers\" should be inlined\n4. **Benchmark impact**: Quantify performance improvements\n\n### Related Considerations\n- **Issue #25 (VM: Bytecode)**: Inlining strategies for bytecode implementation\n- **Issue #41 (STG: Case optimization)**: Related STG performance work\n- **Compilation pipeline**: Where inlining fits in optimization passes\n\n### Design Work Required\nThis issue needs **substantial clarification** to define:\n- What specific wrappers exist in the STG implementation\n- Which inlining optimizations would provide meaningful performance gains\n- How to implement and measure the impact of these optimizations\n\n### Recommendation\n**Investigation phase** to understand current STG structure and identify specific inlining opportunities before proceeding with implementation.\n","status":"open","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-17T11:58:09.193085Z","created_by":"eucalypt_private/crew/koala","updated_at":"2026-01-17T12:15:04.183044Z","external_ref":"gh-40","labels":["stg"]}
{"id":"eu-brj","title":"VM: In-heap indexmap","description":"## Analysis: VM: In-heap indexmap\n\n### Current State\n**Blocks implemented as association lists** - needlessly inefficient in many cases, especially for larger blocks.\n\n### Problem\n- **O(n) lookups**: Association lists require linear search\n- **Memory overhead**: List nodes for each key-value pair\n- **Performance**: Horrendously inefficient for common operations\n\n### Proposed Solution\n**Optimize with Rust indexmap implementation** stored in GC-managed heap:\n- **O(1) lookups**: Hash-based access\n- **Compact storage**: Better memory layout\n- **Preserve order**: IndexMap maintains insertion order like current blocks\n\n### Implementation Challenges\n\n#### Compatibility Complexity\n- **Internals exposed**: Built-ins and prelude access block internals\n- **Translation overhead**: Converting between representations\n- **API preservation**: Must maintain existing block behavior\n\n#### Specific Concerns\n1. **Prelude functions** that manipulate association list structure directly\n2. **Pattern matching** on block internals\n3. **Serialization** that depends on list representation\n4. **GC integration** for heap-allocated indexmaps\n\n### Potential Approach\n\n#### Hybrid Implementation\n- **Small blocks**: Keep association list (simple, fast for small n)\n- **Large blocks**: Automatically promote to indexmap\n- **Transparent conversion**: Hide implementation details\n\n#### Migration Strategy\n1. **Identify dependencies**: Audit prelude/built-ins using internals\n2. **Abstract interface**: Create abstraction over block representation\n3. **Gradual migration**: Support both representations initially\n4. **Performance testing**: Measure actual improvements\n\n### Benefits (if complexity can be managed)\n- **Performance**: Dramatic improvement for block-heavy code\n- **Scalability**: Better behavior with large blocks\n- **Memory efficiency**: Reduced allocation overhead\n\n### Priority\nLow - optimization with significant compatibility complexity\n\n### Related Considerations\n- **Symbol interning (Issue #24)**: Would work well together\n- **GC integration**: Needs careful heap management\n- **Benchmarking**: Need to measure real-world impact\n\n### Open Questions\n- How much code actually depends on association list internals?\n- Could we abstract the interface without breaking changes?\n- Is the translation overhead worth the lookup performance gain?\n- Should we optimize only for large blocks?\n","status":"open","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-17T11:58:08.047394Z","created_by":"eucalypt_private/crew/koala","updated_at":"2026-01-17T12:15:02.730242Z","external_ref":"gh-15","labels":["vm"]}
{"id":"eu-btr","title":"Dot spacing normalisation","description":"Implement dot spacing normalisation: remove spaces around dots (a . b -\u003e a.b), preserve decimal numbers.","status":"open","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-20T10:53:27.061118Z","created_by":"greg","updated_at":"2026-01-20T10:53:27.061118Z","dependencies":[{"issue_id":"eu-btr","depends_on_id":"eu-r3h","type":"blocks","created_at":"2026-01-20T10:56:42.79639Z","created_by":"greg"}]}
{"id":"eu-byz","title":"Violation detection","description":"Implement violation detection for conservative mode: detect spacing violations, tabs, excess whitespace.","status":"open","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-20T10:53:38.139383Z","created_by":"greg","updated_at":"2026-01-20T10:53:38.139383Z","dependencies":[{"issue_id":"eu-byz","depends_on_id":"eu-ngy","type":"blocks","created_at":"2026-01-20T10:57:34.600198Z","created_by":"greg"}]}
{"id":"eu-bz6","title":"Selective reformatting","description":"Implement selective reformatting at violation sites only, preserving surrounding formatting.","status":"open","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-20T10:53:38.390416Z","created_by":"greg","updated_at":"2026-01-20T10:53:38.390416Z","dependencies":[{"issue_id":"eu-bz6","depends_on_id":"eu-byz","type":"blocks","created_at":"2026-01-20T10:57:34.737812Z","created_by":"greg"}]}
{"id":"eu-c0g","title":"Redundant wildcard pattern creates temporary Vec","description":"In src/driver/options.rs:290:\n```rust\n_ =\u003e \u0026Vec::new(),\n```\n\nThis wildcard catches Some(Commands::Version). Creating a temporary Vec::new() is unusual.\n\n**Fix:** Handle Version explicitly with `Some(Commands::Version) =\u003e \u0026cli.files`\n\n**Source:** Correctness Review hq-leg-az4n6","status":"closed","priority":2,"issue_type":"chore","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-21T12:27:31.289801Z","created_by":"mayor","updated_at":"2026-01-21T14:03:12.541919Z","closed_at":"2026-01-21T14:03:12.541919Z","close_reason":"Replaced wildcard pattern with explicit Some(Commands::Version) =\u003e \u0026cli.files to avoid creating temporary Vec."}
{"id":"eu-c3i","title":"Create jsonl parser module","description":"Create src/import/jsonl.rs with read_jsonl() function parsing each line as JSON","status":"open","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-20T11:33:40.029779Z","created_by":"greg","updated_at":"2026-01-20T11:33:40.029779Z"}
{"id":"eu-c8m5","title":"Rust 2024 edition lifetime syntax warnings","description":"The codebase has multiple lifetime syntax warnings that will become errors in Rust 2024 edition.\n\n**Affected files:**\n- src/core/expr.rs (lines 147, 151, 155, 159)\n- src/eval/machine/vm.rs (lines 718-725, 738)  \n- src/eval/memory/array.rs (line 272)\n\n**Issue:** Functions returning iterator types with elided lifetimes use inconsistent syntax. The compiler warns about 'hiding a lifetime that is elided elsewhere'.\n\n**Recommendation:** Explicitly annotate lifetimes or use `'_` placeholder consistently per Rust 2024 conventions.\n\n(Refiled from ep-d5r)","status":"open","priority":2,"issue_type":"bug","created_at":"2026-01-21T18:40:57.794181Z","created_by":"mayor","updated_at":"2026-01-21T18:40:57.794181Z","labels":["code-quality","rust-edition"]}
{"id":"eu-ciu","title":"Harness test: special characters in args","description":"Add test for args with special characters and spaces","status":"open","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-20T11:17:46.64097Z","created_by":"greg","updated_at":"2026-01-20T11:17:46.64097Z","dependencies":[{"issue_id":"eu-ciu","depends_on_id":"eu-7p4","type":"blocks","created_at":"2026-01-20T11:18:55.472786Z","created_by":"greg"}]}
{"id":"eu-cny2","title":"Reformat mode strips comments","description":"The --reformat mode removes all comments from .eu files.\n\nExample in 004_bools.eu:\n```\n# Original:\n# alias the ugly builtins\nt: __TRUE\n\n# After --reformat:\nt: __TRUE\n```\n\nComments should be preserved - they contain important documentation.","status":"closed","priority":2,"issue_type":"bug","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-21T15:26:09.898215Z","created_by":"eucalypt_private/crew/koala","updated_at":"2026-01-22T21:24:53.345367Z","closed_at":"2026-01-22T21:24:53.345367Z","close_reason":"Verified fixed: Comments are preserved in reformat mode. Both leading comments and declaration comments are maintained."}
{"id":"eu-cui","title":"Digest: mol-refinery-patrol","description":"Patrol: merged 3 branches (obsidian, quartz, jasper), all tests passed, no conflicts","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-21T11:57:32.755372Z","updated_at":"2026-01-21T18:48:28.361132Z","closed_at":"2026-01-21T11:57:32.755308Z","close_reason":"Squashed from 11 wisps","dependencies":[{"issue_id":"eu-cui","depends_on_id":"eu-z9v","type":"parent-child","created_at":"2026-01-21T11:57:32.756116Z","created_by":"eucalypt_private/refinery"}]}
{"id":"eu-d005","title":"Reformat mode removes trailing newline","description":"The --reformat mode doesn't ensure files end with a newline.\n\nGit diff shows:\n```\n-RESULT: if(and(trues.all, falses.none), :PASS, :FAIL)\n+RESULT: if(and(trues.all, falses.none), :PASS, :FAIL)\n\\ No newline at end of file\n```\n\nFiles should end with a newline per POSIX convention.","status":"closed","priority":3,"issue_type":"bug","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-21T15:26:12.924746Z","created_by":"eucalypt_private/crew/koala","updated_at":"2026-01-22T21:24:53.549334Z","closed_at":"2026-01-22T21:24:53.549334Z","close_reason":"Verified fixed: Trailing newline is present in reformat mode output. The format_unit function already ensures trailing newline."}
{"id":"eu-da3","title":"Sorting blocks / sorted blocks","description":"## Analysis: Sorting blocks / sorted blocks\n\n### Goal\n**Sort key-value pairs within blocks by key name** for performant lookup when blocks are used as data structures.\n\n### Current State\n- **Insertion order preserved**: Blocks currently maintain insertion order\n- **Linear lookup**: Key access requires O(n) search through keys\n- **Performance bottleneck**: Large blocks have poor lookup performance\n\n### Implementation Approaches\n\n#### Option 1: Metadata-based Sorting\nBlock maintains sorted state via metadata:\n```eu\n# Sorted block maintains order automatically\nsorted-block: block.sort-keys({c: 3, a: 1, b: 2})\n# → {a: 1, b: 2, c: 3} with sorted metadata\n\n# Future insertions respect sort order\nresult: sorted-block.set(\"d\", 4)  # Maintains sort\n```\n\n#### Option 2: Sort-preserving Functions\nSeparate functions that maintain sort order:\n```eu\n# Standard functions (insertion order)\nblock.set(key, value)\nblock.merge(other)\n\n# Sort-preserving variants\nsorted-block.set(key, value)     # Insert in sorted position\nsorted-block.merge(other)        # Merge maintaining sort\n```\n\n#### Option 3: Explicit Sort Function\nSort function optimized for already-sorted blocks:\n```eu\n# Initial sort\nsorted: block.sort-keys(unsorted-block)\n\n# Re-sort (very fast if already sorted)\nre-sorted: block.sort-keys(mostly-sorted-block)\n```\n\n### Performance Benefits\n- **Binary search**: O(log n) key lookup instead of O(n)\n- **Range queries**: Efficient key range operations\n- **Optimized operations**: Merge, intersection, difference\n- **Cache efficiency**: Better memory locality for key access\n\n### Design Considerations\n\n#### Implementation Strategy\n- **Backward compatibility**: Don't break existing insertion-order behavior\n- **Opt-in optimization**: Sorted blocks are explicit choice\n- **Performance**: Sort operations should be efficient\n- **Memory**: Minimal overhead for tracking sort state\n\n#### Technical Challenges\n- **Key comparison**: Consistent string comparison rules\n- **Mixed operations**: Interaction between sorted/unsorted blocks\n- **Serialization**: Preserve sort order in export/import\n- **Type safety**: Ensure sorted invariants maintained\n\n### Use Cases\n- **Large configuration blocks**: Fast lookup in config data\n- **Dictionary/map operations**: When blocks used as hash tables\n- **Data processing**: Sorted access patterns\n- **Performance-critical code**: Where lookup speed matters\n\n### Priority\nLow - optimization feature requiring significant design work\n\n### Design Work Needed\n1. **API design**: How users request/maintain sorted blocks\n2. **Performance analysis**: Measure actual benefits vs overhead\n3. **Implementation strategy**: Metadata vs separate types vs functions\n4. **Compatibility**: Interaction with existing block operations\n5. **Testing**: Comprehensive benchmarks and correctness tests\n\n### Relationship to Other Issues\n- **Independent of Issue #26** (prelude: sorting lists)\n- **Related to Issue #15** (VM: In-heap indexmap) - both about block performance\n- **Could benefit from Issue #24** (Symbol pool \u0026 interning) for efficient key comparison\n\n### Example API (tentative)\n```eu\n# Create sorted block\nsorted: {c: 3, a: 1, b: 2} block.sort-keys\n# → {a: 1, b: 2, c: 3}\n\n# Check if sorted\nis-sorted: block.is-sorted?(my-block)\n\n# Maintain sort on modification\nupdated: sorted block.set-sorted(\"d\", 4)  # Preserves order\n```\n","status":"open","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-17T11:58:08.567814Z","created_by":"eucalypt_private/crew/koala","updated_at":"2026-01-17T12:15:03.478593Z","external_ref":"gh-3","labels":["lib"]}
{"id":"eu-dc8z","title":"VM stack trace allocates during error handling","description":"In src/eval/machine/vm.rs:563-581, stack_trace allocates intermediate structures during error handling:\n```rust\npub fn stack_trace(\u0026self, view: \u0026MutatorHeapView) -\u003e Vec\u003cSmid\u003e {\n    self.stack.iter().rev()\n        .filter_map(|cont| { ... })\n        .filter(|smid| *smid != Smid::default())\n        .dedup()\n        .collect()\n}\n```\n\nWhile errors should be rare, this adds overhead when they occur.\n\n**Source:** Performance Review hq-leg-om5os","status":"closed","priority":2,"issue_type":"chore","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-21T12:28:30.373736Z","created_by":"mayor","updated_at":"2026-01-21T14:06:44.860872Z","closed_at":"2026-01-21T14:06:44.860872Z","close_reason":"Reviewed: The stack_trace allocation is acceptable because (1) it only occurs during error handling which is rare, and (2) the Vec\u003cSmid\u003e must be owned by ExecutionError::Traced anyway. No change needed.","labels":["performance"]}
{"id":"eu-dd5","title":"Hash built-ins","description":"## Analysis: Hash built-ins\n\n### Requirements\n**Cryptographic hash functions** - start with a single hash function of **good cryptographic strength**.\n\n### Implementation Approach\n\n#### Phase 1: Single Strong Hash\n**One high-quality cryptographic hash function**:\n- **Algorithm choice**: SHA-256 or SHA-3 (good strength, widely supported)\n- **Universal handling**: Works with all STG types\n- **Rust implementation**: Built-in function implemented in Rust\n- **Prelude exposure**: Exposed via prelude functions\n\n#### Future Enhancement\n**Fast hash option** for non-cryptographic use cases:\n- **Algorithm**: xxHash, FNV, or similar (speed over cryptographic strength)\n- **Use cases**: Hash tables, checksums, data structures\n\n### STG Type Handling\n**Handle all STG types well** without extensibility requirement:\n- **Primitive types**: Numbers, strings, booleans, null\n- **Collections**: Lists, blocks (recursive hashing)\n- **Structured hashing**: Consistent across similar values\n- **Deterministic**: Same input always produces same hash\n\n### API Design\n```eu\n# Basic hash function\nhash(\"hello world\")  # → \"a591a6d40bf420404a011733cfb7b190d62c65bf0bcda32b57b277d9ad9f146e\"\n\n# Hash any data structure\nhash({name: \"Alice\", age: 30})\nhash([1, 2, 3, [4, 5]])\n\n# Future: specify algorithm\nhash(data, :sha256)    # Explicit algorithm\nfast-hash(data)        # Non-cryptographic\n```\n\n### Implementation Details\n\n#### Rust Built-in\n- **Crate choice**: sha2, sha3, or ring for cryptographic hashing\n- **Recursive handling**: Deep hashing of nested structures\n- **Memory efficient**: Stream processing for large data\n- **Error handling**: Invalid inputs, memory limits\n\n#### Prelude Integration\n- **Simple interface**: Single function for common case\n- **Type polymorphic**: Works with any eucalypt value\n- **Documentation**: Clear examples and use cases\n\n### Use Cases\n- **Data integrity**: Verify data hasn't changed\n- **Content addressing**: Hash-based keys\n- **Caching**: Cache invalidation based on content\n- **Deduplication**: Identify identical values\n- **Security**: Password verification (with proper salting)\n\n### Benefits\n- **Data integrity**: Reliable change detection\n- **Performance**: Fast comparison of large structures\n- **Security**: Cryptographically strong verification\n- **Simplicity**: Single function handles all types\n\n### Priority\nMedium - useful utility function for data processing\n\n### Considerations\n- **Deterministic ordering**: Ensure blocks hash consistently\n- **Performance**: Balance security with speed\n- **Compatibility**: Stable hash values across versions\n- **Dependencies**: Additional Rust crates for crypto functions\n\n### Future Extensions\n- **Algorithm choice**: Multiple hash algorithms\n- **Streaming**: Hash large files efficiently  \n- **HMAC**: Keyed hashing for authentication\n- **User types**: When extensible types are supported\n","status":"open","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-17T11:58:07.61522Z","created_by":"eucalypt_private/crew/koala","updated_at":"2026-01-17T12:15:01.661351Z","external_ref":"gh-10","labels":["lib"]}
{"id":"eu-di2","title":"JSON Embedding","description":"## Analysis: JSON Embedding\n\n### Goal\nEnable **eucalypt embedding in JSON files** similar to YAML's `\\!eu` tag support, allowing templated JSON with eucalypt execution.\n\n### Current State\n- **YAML embedding**: `\\!eu` tag allows eucalypt in YAML docs\n- **JSON limitation**: No equivalent mechanism for JSON files\n\n### Use Case\nWrite eucalypt expressions in JSON files and have eucalypt execute/expand them:\n```json\n{\n  \"name\": \"config\",\n  \"version\": \"__EU__: version.major + '.' + version.minor\",\n  \"timestamp\": \"__EU__: now format('iso8601')\",\n  \"items\": \"__EU__: items map(.name)\"\n}\n```\n\n### Design Challenges\n\n#### JSON Constraints\n- **No custom tags**: JSON doesn't support YAML-style tags\n- **String-based**: Must embed in string values\n- **Valid JSON**: Input must parse as valid JSON\n\n### Design Alternatives\n\n#### Option 1: String-based Markers\n**Embed eucalypt in special string patterns**:\n```json\n{\n  \"value\": \"__EU__: 2 + 2\",\n  \"name\": \"{{eu: user.name}}\",\n  \"items\": \"{items map(.id)}\"\n}\n```\n\n#### Option 2: Special File Extension\n**Use distinct file extension** to indicate templated JSON:\n- `.json.eu` - JSON with eucalypt embedding\n- `.jeut` - JSON eucalypt template  \n- `.template.json` - Template JSON\n\n#### Option 3: Command Line Specification\n**Explicit mode via CLI**:\n```bash\neu --json-template file.json\neu --format json-template file.json\neu json-template@file.json\n```\n\n#### Option 4: Metadata Detection\n**Auto-detect** based on content patterns or metadata\n\n### Implementation Considerations\n\n#### Parsing Strategy\n1. **Parse as JSON**: Validate JSON structure first\n2. **Scan for markers**: Find eucalypt expressions\n3. **Replace expressions**: Evaluate and substitute\n4. **Generate JSON**: Output expanded JSON\n\n#### Expression Scope\n- **Global context**: Access to all eucalypt features\n- **Template variables**: Pass data to template\n- **Import support**: Template can import other files\n\n### Benefits\n- **JSON templating**: Dynamic JSON generation\n- **Configuration**: Environment-specific configs\n- **API responses**: Template API data\n- **Build systems**: Generated JSON configs\n\n### Priority\nMedium - useful for JSON-heavy workflows\n\n### Design Questions for Resolution\n1. **Marker syntax**: Which embedding pattern is most readable?\n2. **File extension**: New extension or CLI specification?\n3. **Error handling**: How to report template errors?\n4. **Escaping**: How to include literal marker text?\n5. **Nesting**: Can eucalypt expressions contain JSON?\n\n### Example Workflow\n```bash\n# Input: config.json.eu\n{\n  \"database\": {\n    \"host\": \"__EU__: env.DB_HOST\", \n    \"port\": \"__EU__: env.DB_PORT parse-int\"\n  }\n}\n\n# Command\neu json-template@config.json.eu \u003e config.json\n\n# Output: config.json  \n{\n  \"database\": {\n    \"host\": \"localhost\",\n    \"port\": 5432\n  }\n}\n```\n\n### Related Considerations\n- **Security**: Arbitrary code execution in templates\n- **Performance**: Template compilation and caching\n- **Debugging**: Error reporting in templated files\n- **Tooling**: IDE support for mixed JSON/eucalypt\n","status":"open","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-17T11:58:07.256019Z","created_by":"eucalypt_private/crew/koala","updated_at":"2026-01-17T12:15:01.422415Z","external_ref":"gh-4","labels":["io"]}
{"id":"eu-dkk","title":"ToSourceDoc for Declaration","description":"Implement ToSourceDoc for Declaration and DeclarationHead with colon spacing.","status":"open","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-20T10:53:15.786244Z","created_by":"greg","updated_at":"2026-01-20T10:53:15.786244Z","dependencies":[{"issue_id":"eu-dkk","depends_on_id":"eu-r3h","type":"blocks","created_at":"2026-01-20T10:56:34.769307Z","created_by":"greg"}]}
{"id":"eu-dlr","title":"Catch { name: name } recursion","description":"## Analysis: Catch { name: name } recursion\n\n### Problem Statement\nThe pattern `{ name: name }` is a common mistake, especially for developers coming from other languages, but eucalypt currently enters an infinite loop instead of providing a helpful error message.\n\n### Current Behavior\n- `eu -e \"{ name: name }\"` → **infinite loop, hangs program**\n- Similar patterns like `f: f(f)` also cause infinite loops (as seen in `harness/test/errors/004_circular.eu`)\n- No detection or prevention of recursive definitions\n- Users must kill the process manually\n\n### Expected Behavior\n**Helpful error message** such as:\n```\nerror: recursive definition detected\n  ┌─ \u003cinput\u003e:1:3\n  │\n1 │ { name: name }\n  │   ^^^^   ^^^^ references itself\n  │   │\n  │   defined here\n  │\n  = help: did you mean to reference an outer scope variable?\n  = help: use a different name or qualify the reference\n```\n\n### Common Use Cases This Affects\n1. **Destructuring-like patterns**: `{ name: name }` (from JavaScript/other languages)\n2. **Accidental self-reference**: `x: x + 1` \n3. **Mutual recursion**: `a: b, b: a`\n4. **Function recursion**: `f: f(x)` without proper recursion setup\n\n### Implementation Approach\n\n#### Detection Strategy\n1. **Static analysis** during binding/verification phase\n2. **Dependency graph** construction for block definitions\n3. **Cycle detection** in definition dependencies\n4. **Error reporting** with precise source locations\n\n#### Technical Implementation\n- **Location**: Extend `src/core/verify/binding.rs` or create new verification pass\n- **Algorithm**: Topological sort with cycle detection on definition graph\n- **Error handling**: Generate helpful error messages with source spans\n- **Performance**: O(n) analysis, minimal overhead\n\n#### Error Message Design\n- **Clear problem identification**: \"recursive definition\"\n- **Source location**: Point to both definition and reference\n- **Helpful suggestions**: Common alternatives or fixes\n- **Language-aware**: Recognize patterns from other languages\n\n### Benefits\n- **Better user experience**: Clear error instead of hang\n- **Faster development**: Quick feedback on common mistakes  \n- **Language robustness**: Prevent infinite loops from user code\n- **Onboarding**: Help developers transitioning from other languages\n\n### Priority\nMedium-High - language robustness and user experience improvement\n\n### Related Issues\n- Error message quality improvement (relates to Issue #43)\n- General recursion handling in eucalypt language design\n","status":"open","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-17T11:58:07.793346Z","created_by":"eucalypt_private/crew/koala","updated_at":"2026-01-17T12:15:01.781561Z","external_ref":"gh-42","labels":["errors"],"dependencies":[{"issue_id":"eu-dlr","depends_on_id":"eu-twg","type":"relates-to","created_at":"2026-01-17T11:59:47.989596Z","created_by":"eucalypt_private/crew/koala"}]}
{"id":"eu-dm8","title":"VM: in-line storage for env-frame","description":"## Analysis: VM: in-line storage for env-frame\n\n### Current State\n**EnvironmentFrame** structure in the VM:\n```rust\npub struct EnvironmentFrame\u003cC\u003e {\n    bindings: Array\u003cC\u003e,                        // Indexed bindings\n    annotation: Smid,                          // Source annotation\n    next: Option\u003cRefPtr\u003cEnvironmentFrame\u003cC\u003e\u003e\u003e, // Next frame (cactus stack)\n}\n```\n\n### Optimization Opportunity\n**Inline storage** to reduce external references and pointer chasing:\n- Currently uses `Array\u003cC\u003e` which is a separate heap allocation\n- `next` pointer creates linked list requiring traversal\n- Each frame lookup may chase multiple pointers\n\n### Potential Optimizations\n\n#### 1. Small Frame Optimization\n**Inline small arrays directly in EnvironmentFrame**:\n```rust\npub struct EnvironmentFrame\u003cC\u003e {\n    bindings: SmallArray\u003cC, 4\u003e,  // Inline storage for \u003c= 4 elements\n    annotation: Smid,\n    next: Option\u003cRefPtr\u003cEnvironmentFrame\u003cC\u003e\u003e\u003e,\n}\n```\n\nBenefits:\n- **Cache locality**: Small frames stay in same cache line\n- **Fewer allocations**: No separate array allocation for common cases\n- **Reduced indirection**: Direct access to bindings\n\n#### 2. Flattened Environment\n**Copy parent bindings into new frames** (up to a limit):\n```rust\npub struct EnvironmentFrame\u003cC\u003e {\n    local_bindings: Array\u003cC\u003e,     // This frame's bindings\n    inherited: InlineArray\u003cC, 8\u003e, // Copied from parent frames\n    deep_next: Option\u003cRefPtr\u003cEnvironmentFrame\u003cC\u003e\u003e\u003e, // Distant frames\n}\n```\n\nBenefits:\n- **Faster lookup**: Access parent bindings without traversal\n- **Trade-off**: More memory for faster access\n- **Configurable**: Limit inheritance depth\n\n#### 3. Indexed Access Optimization\n**Cache frequently accessed indices**:\n```rust\npub struct EnvironmentFrame\u003cC\u003e {\n    bindings: Array\u003cC\u003e,\n    hot_cache: [(usize, C); 2],  // Cache recent lookups\n    annotation: Smid,\n    next: Option\u003cRefPtr\u003cEnvironmentFrame\u003cC\u003e\u003e\u003e,\n}\n```\n\n### Implementation Considerations\n\n#### Memory Trade-offs\n- **Inline storage**: Larger frame size vs fewer allocations\n- **Copying**: More memory usage vs faster access\n- **Cache effects**: Better locality vs larger structures\n\n#### Common Patterns Analysis\n**Investigation needed**:\n1. **Typical frame sizes**: How many bindings per frame?\n2. **Access patterns**: Which indices accessed most?\n3. **Frame depth**: How deep do environments typically get?\n\n#### GC Integration\n- **Inline arrays**: Must be scannable by GC\n- **Copied references**: Ensure all references tracked\n- **Memory pressure**: Balance optimization with heap usage\n\n### Benefits\n- **Performance**: Reduced pointer chasing and better cache usage\n- **Common case optimization**: Fast path for small frames\n- **Predictable access**: More consistent performance\n\n### Priority\nMedium - performance optimization with clear benefits for common cases\n\n### Implementation Plan\n1. **Profile current usage**: Measure typical frame sizes and access patterns\n2. **Prototype small frame optimization**: Inline storage for common sizes\n3. **Benchmark impact**: Measure performance improvements\n4. **GC integration**: Ensure inline storage works with collector\n5. **Incremental rollout**: Start with simplest optimization\n\n### Related Issues\n- **Issue #15 (In-heap indexmap)**: Similar optimization for blocks\n- **Issue #24 (Symbol interning)**: Reduces environment key overhead\n- **GC implementation**: Must integrate with garbage collector\n\n### Success Criteria\n- **Measurable performance improvement**: Faster environment access\n- **No functionality regression**: All tests continue passing\n- **Memory efficiency**: Reasonable memory/speed trade-off\n- **GC compatibility**: Seamless integration with collector\n","status":"open","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-17T11:58:06.969005Z","created_by":"eucalypt_private/crew/koala","updated_at":"2026-01-17T12:15:01.021642Z","external_ref":"gh-46","labels":["vm"]}
{"id":"eu-dpy","title":"Rust 2024 edition lifetime syntax warnings","description":"The codebase has multiple lifetime syntax warnings that will become errors in Rust 2024 edition.\n\n**Affected files:**\n- src/core/expr.rs (lines 147, 151, 155, 159)\n- src/eval/machine/vm.rs (lines 718-725, 738)  \n- src/eval/memory/array.rs (line 272)\n\n**Issue:** Functions returning iterator types with elided lifetimes use inconsistent syntax. The compiler warns about 'hiding a lifetime that is elided elsewhere'.\n\n**Recommendation:** Explicitly annotate lifetimes or use `'_` placeholder consistently per Rust 2024 conventions.","status":"closed","priority":2,"issue_type":"bug","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-20T15:48:53.720845Z","created_by":"eucalypt_private/polecats/obsidian","updated_at":"2026-01-21T18:48:28.364974Z","closed_at":"2026-01-21T18:40:57.795061Z","close_reason":"Refiled to eu-c8m5","labels":["code-quality","rust-edition"]}
{"id":"eu-dyx","title":"Base64 encoding functions","description":"## Analysis: Base64 encoding functions\n\n### Requirements\n1. **Encode/decode Base64** strings\n2. **Handle text and binary data**\n3. **Binary file inclusion** as Base64\n4. **Built-in implementation** exposed via prelude\n\n### Core Functions Needed\n\n#### Basic Encoding/Decoding\n```eu\n# Text encoding\nbase64.encode(\"Hello World\")     # → \"SGVsbG8gV29ybGQ=\"\nbase64.decode(\"SGVsbG8gV29ybGQ=\") # → \"Hello World\"\n\n# Binary data encoding  \nbase64.encode-bytes(binary-data)   # Handle raw bytes\nbase64.decode-bytes(encoded-text)  # Return binary data\n```\n\n#### Base64 Variants\nConsider supporting different Base64 variants:\n- **Standard**: RFC 4648 standard Base64\n- **URL-safe**: Replace +/ with -_ for URLs\n- **No padding**: Strip trailing = characters\n\n### Binary File Inclusion\n\n```eu\n# Include binary file as Base64\nlogo: base64@assets/logo.png\ncert: base64@auth/cert.pem\n```\n\n### Implementation Architecture\n\n#### Built-in Functions (Rust)\n- **Performance**: Native Rust Base64 implementation\n- **Memory efficient**: Stream processing for large files\n- **Error handling**: Invalid Base64, file not found, etc.\n- **Crate choice**: Use established Rust Base64 crate\n\n#### Prelude Exposure\n- **User-friendly API**: Convenient function names\n- **Type handling**: Automatic string/bytes handling where possible\n- **Documentation**: Clear examples and use cases\n\n### Use Cases\n\n#### Data Embedding\n- **Images**: Embed images in JSON/YAML output\n- **Documents**: Include PDFs, certificates in config\n- **Binary resources**: Any binary data in text formats\n\n#### API Integration\n- **Web APIs**: Many APIs expect Base64 encoded data\n- **Authentication**: Certificates, keys as Base64\n- **File upload**: Binary data over text protocols\n\n#### Configuration\n- **Secrets**: Base64 encoded credentials\n- **Assets**: Embedded resources in config files\n- **Templates**: Binary data in template systems\n\n### Design Considerations\n\n#### File Inclusion Integration\n- **Security**: Restrict file access to safe directories\n- **Performance**: Cache file contents, lazy loading\n- **Error handling**: Missing files, permission errors\n- **Path resolution**: Relative vs absolute paths\n\n#### Memory Management\n- **Large files**: Streaming for big binary files\n- **GC integration**: Proper memory lifecycle\n- **Limits**: Reasonable size limits for inclusion\n\n### Priority\nHigh - essential for many data interchange scenarios\n\n### Implementation Plan\n\n#### Phase 1: Core Functions\n1. **Basic encode/decode**: Text to/from Base64\n2. **Built-in implementation**: Rust functions\n3. **Prelude integration**: User-facing API\n\n#### Phase 2: Binary Support\n1. **Binary data handling**: Raw bytes support\n2. **File inclusion**: Import binary files as Base64\n3. **Import system integration**: `base64@file` syntax\n\n#### Phase 3: Variants and Polish\n1. **Multiple variants**: Standard, URL-safe, no-padding\n2. **Performance optimization**: Large file handling\n3. **Better error messages**: Clear failure feedback\n\n### Questions for Investigation\n1. **Current import system**: What file inclusion exists?\n2. **Binary data types**: How are bytes represented?\n3. **Security model**: File access restrictions?\n4. **Integration points**: Where does this fit in import system?\n","status":"open","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-17T11:58:07.523629Z","created_by":"eucalypt_private/crew/koala","updated_at":"2026-01-17T11:58:07.523629Z","external_ref":"gh-2","labels":["lib"]}
{"id":"eu-e5g","title":"Alignment preservation","description":"Implement alignment preservation for intentional columnar patterns in conservative mode.","status":"open","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-20T10:53:38.642566Z","created_by":"greg","updated_at":"2026-01-20T10:53:38.642566Z","dependencies":[{"issue_id":"eu-e5g","depends_on_id":"eu-byz","type":"blocks","created_at":"2026-01-20T10:57:34.87216Z","created_by":"greg"}]}
{"id":"eu-e6j","title":"Define FormatterConfig struct","description":"Define FormatterConfig struct with line width, indent size, and formatting mode settings.","status":"closed","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-20T10:53:02.790656Z","created_by":"greg","updated_at":"2026-01-22T21:06:08.273977Z","closed_at":"2026-01-22T21:06:08.273977Z","close_reason":"Already implemented"}
{"id":"eu-e81","title":"Digest: mol-refinery-patrol","description":"Patrol: queue empty, 0 merges, no issues","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-17T11:50:58.216007Z","updated_at":"2026-01-17T11:50:58.216007Z","closed_at":"2026-01-17T11:50:58.215945Z","close_reason":"Squashed from 11 wisps"}
{"id":"eu-eec","title":"Blank line preservation","description":"Implement blank line preservation in multi-line blocks to maintain logical grouping.","status":"open","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-20T10:53:38.885437Z","created_by":"greg","updated_at":"2026-01-20T10:53:38.885437Z","dependencies":[{"issue_id":"eu-eec","depends_on_id":"eu-byz","type":"blocks","created_at":"2026-01-20T10:57:35.0011Z","created_by":"greg"}]}
{"id":"eu-en8","title":"ToSourceDoc for Block","description":"Implement ToSourceDoc for Block with brace spacing and line breaking for declarations.","status":"open","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-20T10:53:15.546777Z","created_by":"greg","updated_at":"2026-01-20T10:53:15.546777Z","dependencies":[{"issue_id":"eu-en8","depends_on_id":"eu-r3h","type":"blocks","created_at":"2026-01-20T10:56:34.634754Z","created_by":"greg"}]}
{"id":"eu-ert","title":"prelude: sorting lists","description":"## Analysis: prelude: sorting lists\n\n### Requirements\nAdd sorting functionality to eucalypt prelude that **performs well in most cases**.\n\n### Implementation Approach\n**Type-specific functions** to handle different data types (since we don't have a good solution for ad hoc polymorphism yet - see related issue).\n\n#### Initial Target Types\n1. **Numbers** - `sort-numbers` or `numsort`\n2. **Strings** - `sort-strings` or `strsort` \n3. **ZDTs (Zoned DateTimes)** - `sort-zdts` or `zdtsort`\n\n#### Sorting Operations Needed\n- **Basic sort**: Ascending order\n- **Reverse sort**: Descending order  \n- **Sort-by**: Custom key extraction function\n- **Stable sort**: Preserve order of equal elements\n\n### Performance Considerations\n- **General good performance** across common use cases\n- **Efficient algorithms** (likely Timsort or similar)\n- **Memory efficiency** for large lists\n- **Reasonable performance** for small to medium lists\n\n### Integration with Prelude\n- **Standard library functions** available by default\n- **Consistent naming** with existing prelude functions\n- **Good documentation** and examples\n\n### Future Evolution\n- **Generic sorting** when ad hoc polymorphism solution available\n- **Custom comparators** for user-defined types\n- **Specialized sorts** (numeric, lexicographic, etc.)\n\n### Benefits\n- **Essential functionality** for data processing\n- **Better performance** than user-implemented sorts\n- **Standard library completeness** \n- **Data manipulation workflows** improvement\n\n### Priority\nMedium - useful standard library feature\n\n### Related Issues\n- **Ad hoc polymorphism** - blocking more generic sorting approach\n- **Type system improvements** - would enable unified sorting interface\n\n### Implementation Notes\n- **Algorithm choice**: Research best general-purpose sorting algorithm\n- **Type safety**: Ensure type-specific functions are properly typed\n- **Error handling**: Graceful handling of mixed types or invalid data\n- **Testing**: Comprehensive testing with various data sizes and patterns\n","status":"open","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-17T11:58:07.169343Z","created_by":"eucalypt_private/crew/koala","updated_at":"2026-01-17T12:15:01.255189Z","external_ref":"gh-26","labels":["lib"]}
{"id":"eu-esqv","title":"Create tree-sitter grammar for eucalypt","description":"attached_args: Test the grammar against .eu files in harness/test/ to ensure it parses them correctly\ndispatched_by: eucalypt_private/crew/koala\n\nCreate a tree-sitter grammar for eucalypt under editors/tree-sitter/.\n\nTree-sitter provides fast, incremental parsing that can be used for:\n- Syntax highlighting in editors (Neovim, Helix, Emacs with tree-sitter support)\n- Code folding\n- Structural navigation\n- Better indentation\n\nThis would complement the existing eucalypt-mode.el for Emacs users who prefer tree-sitter-based highlighting.","status":"closed","priority":2,"issue_type":"feature","assignee":"eucalypt_private/polecats/opal","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-21T15:32:08.143132Z","created_by":"eucalypt_private/crew/koala","updated_at":"2026-01-21T16:13:10.525585Z","closed_at":"2026-01-21T16:13:10.525585Z","close_reason":"Closed"}
{"id":"eu-evs","title":"Test fixtures: line breaking","description":"Create test fixtures for line breaking behaviour.","status":"open","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-20T10:53:51.68315Z","created_by":"greg","updated_at":"2026-01-20T10:53:51.68315Z","dependencies":[{"issue_id":"eu-evs","depends_on_id":"eu-en8","type":"blocks","created_at":"2026-01-20T10:58:41.208462Z","created_by":"greg"}]}
{"id":"eu-eyl","title":"Formatter fixes","description":"attached_molecule: eu-wisp-wf0\nattached_at: 2026-01-22T21:09:47Z\ndispatched_by: mayor\n\nParent issue for formatter bug fixes and refinements:\n- Tab-to-space alignment preservation\n- Conservative mode alignment handling\n- Trailing newline handling in reformat mode","notes":"Implemented formatter fixes:\n1. Fixed unary operator spacing (eu-jtf2) - prefix/postfix operators now have tight binding\n2. Fixed tab-to-space alignment (eu-qy8j) - uses 8-char tab stops to preserve alignment\n3. Verified other bugs were already fixed: shebang preservation (eu-2psl), comment preservation (eu-cny2), consistent indentation (eu-kklf), trailing newline (eu-d005)\n\nAll 323 tests pass.","status":"hooked","priority":2,"issue_type":"task","assignee":"eucalypt_private/polecats/obsidian","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-22T20:56:28.122926Z","created_by":"eucalypt_private/crew/koala","updated_at":"2026-01-22T21:28:20.380601Z","dependencies":[{"issue_id":"eu-eyl","depends_on_id":"eu-77s","type":"blocks","created_at":"2026-01-22T20:57:12.538345Z","created_by":"eucalypt_private/crew/koala"},{"issue_id":"eu-eyl","depends_on_id":"eu-e5g","type":"blocks","created_at":"2026-01-22T20:57:12.602425Z","created_by":"eucalypt_private/crew/koala"},{"issue_id":"eu-eyl","depends_on_id":"eu-qy8j","type":"blocks","created_at":"2026-01-22T20:57:12.66803Z","created_by":"eucalypt_private/crew/koala"},{"issue_id":"eu-eyl","depends_on_id":"eu-d005","type":"blocks","created_at":"2026-01-22T20:57:12.73257Z","created_by":"eucalypt_private/crew/koala"},{"issue_id":"eu-eyl","depends_on_id":"eu-eec","type":"blocks","created_at":"2026-01-22T21:02:45.38865Z","created_by":"eucalypt_private/crew/koala"},{"issue_id":"eu-eyl","depends_on_id":"eu-kklf","type":"blocks","created_at":"2026-01-22T21:02:45.565477Z","created_by":"eucalypt_private/crew/koala"},{"issue_id":"eu-eyl","depends_on_id":"eu-jtf2","type":"blocks","created_at":"2026-01-22T21:02:45.660618Z","created_by":"eucalypt_private/crew/koala"},{"issue_id":"eu-eyl","depends_on_id":"eu-cny2","type":"blocks","created_at":"2026-01-22T21:06:35.310872Z","created_by":"eucalypt_private/crew/koala"},{"issue_id":"eu-eyl","depends_on_id":"eu-2psl","type":"blocks","created_at":"2026-01-22T21:06:40.285417Z","created_by":"eucalypt_private/crew/koala"},{"issue_id":"eu-eyl","depends_on_id":"eu-9bu","type":"blocks","created_at":"2026-01-22T21:06:40.45654Z","created_by":"eucalypt_private/crew/koala"},{"issue_id":"eu-eyl","depends_on_id":"eu-bz6","type":"blocks","created_at":"2026-01-22T21:06:40.594477Z","created_by":"eucalypt_private/crew/koala"},{"issue_id":"eu-eyl","depends_on_id":"eu-vsq","type":"blocks","created_at":"2026-01-22T21:06:49.184305Z","created_by":"eucalypt_private/crew/koala"},{"issue_id":"eu-eyl","depends_on_id":"eu-bdj","type":"blocks","created_at":"2026-01-22T21:06:49.336696Z","created_by":"eucalypt_private/crew/koala"},{"issue_id":"eu-eyl","depends_on_id":"eu-lze","type":"blocks","created_at":"2026-01-22T21:06:49.649256Z","created_by":"eucalypt_private/crew/koala"},{"issue_id":"eu-eyl","depends_on_id":"eu-ybn","type":"blocks","created_at":"2026-01-22T21:06:53.042839Z","created_by":"eucalypt_private/crew/koala"},{"issue_id":"eu-eyl","depends_on_id":"eu-wisp-wf0","type":"blocks","created_at":"2026-01-22T21:09:46.589814Z","created_by":"mayor"}]}
{"id":"eu-f0c","title":"v2 runtime \u0026 prelude","description":"## Analysis: v2 runtime \u0026 prelude\n\n### Problem Statement\nThe prelude and built-in set have **arisen incrementally** and are **very unordered and inconsistent** in naming and organisation. Need a **reasoned overhaul** to the library.\n\n### Scope\n1. **Prelude overhaul** (higher priority - more user visible)\n2. **Built-ins reorganization** (lower priority)\n3. **Documentation improvements** (better ways of surfacing docs)\n\n### Goals for v2 Prelude\n\n#### Consistency\n- **Naming conventions**: Consistent function names\n- **Organization**: Logical grouping of related functions\n- **Parameter order**: Consistent argument patterns\n- **Return types**: Predictable behavior\n\n#### Organization Examples\n```eu\n# Current (inconsistent)\nmap, each, fold_left, reduceRight\n\n# v2 (organized)\nlist.map, list.each, list.fold-left, list.reduce-right\n```\n\n### Backward Compatibility Strategy\n**Support running with v1 prelude** to ease migration:\n```eu\n# Default to v2\neu script.eu\n\n# Explicit v1 compatibility mode\neu --prelude-version=1 script.eu\n\n# Or in metadata\n{ prelude-version: 1 }\n```\n\n### v2 Design Principles\n\n#### Modular Organization\n- **list.*** - List operations\n- **string.*** - String operations  \n- **block.*** - Block/object operations\n- **math.*** - Mathematical functions\n- **io.*** - I/O operations\n- **time.*** - Date/time operations\n\n#### Naming Conventions\n- **Consistent separators**: Use hyphens (fold-left not fold_left)\n- **Clear verbs**: map, filter, reduce (not each)\n- **Predictable patterns**: from-x, to-y, is-z\n\n#### Documentation\n- **Better surfacing**: Integrated help system\n- **Examples**: Every function with examples\n- **Categories**: Browse by category\n- **Search**: Find functions by purpose\n\n### Migration Path\n\n#### Phase 1: Design\n- **Audit current prelude**: Document all functions\n- **Design v2 structure**: Consistent organization\n- **Migration guide**: How to update code\n\n#### Phase 2: Implementation  \n- **Dual support**: Both v1 and v2 available\n- **Deprecation warnings**: Guide users to v2\n- **Tooling**: Automated migration assistance\n\n#### Phase 3: Transition\n- **Grace period**: v1 available but deprecated\n- **Community feedback**: Refine based on usage\n- **Final switch**: v2 becomes default\n\n### Benefits\n- **Discoverability**: Easier to find functions\n- **Learnability**: Consistent patterns  \n- **Maintainability**: Clear organization\n- **Documentation**: Better help integration\n\n### Priority\n**High for prelude** (user-visible), Medium for built-ins\n\n### Considerations\n- **Breaking changes**: Significant impact on existing code\n- **Migration tooling**: Help users update their code\n- **Performance**: Ensure no regression\n- **Completeness**: Address gaps in current prelude\n","status":"open","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-17T11:58:06.558906Z","created_by":"eucalypt_private/crew/koala","updated_at":"2026-01-17T12:14:58.905235Z","external_ref":"gh-11","labels":["lib"]}
{"id":"eu-fel","title":"Digest: mol-witness-patrol","description":"Patrol 12: Quiet. No activity.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-21T10:26:36.106227Z","updated_at":"2026-01-21T18:48:28.371829Z","closed_at":"2026-01-21T10:26:36.106175Z","close_reason":"Squashed from 10 wisps"}
{"id":"eu-fq7","title":"ToSourceDoc for Unit","description":"Implement ToSourceDoc for Unit (top-level program/module).","status":"open","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-20T10:53:16.954494Z","created_by":"greg","updated_at":"2026-01-20T10:53:16.954494Z","dependencies":[{"issue_id":"eu-fq7","depends_on_id":"eu-r3h","type":"blocks","created_at":"2026-01-20T10:56:35.423693Z","created_by":"greg"}]}
{"id":"eu-g06","title":"GC scan allocates Vec per object","description":"In src/eval/memory/collect.rs:48-52, every object's scan() method allocates a new Vec\u003cScanPtr\u003e. For heaps with millions of objects, this creates millions of temporary allocations during GC pauses.\n\n```rust\nfn scan\u003c'a\u003e(\u0026'a self, scope: \u0026'a dyn CollectorScope, marker: \u0026mut CollectorHeapView\u003c'a\u003e) -\u003e Vec\u003cScanPtr\u003c'a\u003e\u003e;\n```\n\n**Impact:** Significant GC pause overhead at scale.\n\n**Fix:** Use pre-allocated work buffer passed to scan(), bump allocator, or iterator-based API.\n\n**Source:** Performance Review hq-leg-om5os","status":"closed","priority":1,"issue_type":"feature","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-21T12:27:57.602311Z","created_by":"mayor","updated_at":"2026-01-21T14:14:24.27273Z","closed_at":"2026-01-21T14:14:24.27273Z","close_reason":"Changed GcScannable::scan() to take \u0026mut Vec\u003cScanPtr\u003e output parameter instead of returning Vec. This reuses a single buffer across all scan calls during GC, reducing allocations from O(objects) to O(1). Updated all 7 implementations: Continuation, SynClosure, EnvFrame, LambdaForm, HeapSyn, MachineState, and Vec\u003cNonNull\u003cT\u003e\u003e.","labels":["performance"]}
{"id":"eu-gk7","title":"Add BindSide for nullary operators","description":"Add appropriate BindSide classification for nullary operators in gap-filling","status":"closed","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-20T11:09:01.925083Z","created_by":"greg","updated_at":"2026-01-22T21:03:40.228635Z","closed_at":"2026-01-22T21:03:40.228635Z","close_reason":"Closed","dependencies":[{"issue_id":"eu-gk7","depends_on_id":"eu-9we","type":"blocks","created_at":"2026-01-20T11:09:46.798108Z","created_by":"greg"}]}
{"id":"eu-h2w","title":"Digest: mol-witness-patrol","description":"Patrol 22: System quiet. No polecats, refinery running, no gates, no swarms. Deacon still NOT running. Inbox clear.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-21T11:11:57.931093Z","updated_at":"2026-01-21T18:48:28.390746Z","closed_at":"2026-01-21T11:11:57.931033Z","close_reason":"Squashed from 10 wisps"}
{"id":"eu-h7c","title":"Digest: mol-witness-patrol","description":"Patrol 11: All quiet. No polecats, no mail. Refinery running.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-21T10:25:19.256002Z","updated_at":"2026-01-21T18:48:28.363661Z","closed_at":"2026-01-21T10:25:19.255958Z","close_reason":"Squashed from 10 wisps"}
{"id":"eu-i32","title":"Test fixtures: tab handling","description":"Create test fixtures for tab detection and conversion.","status":"open","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-20T10:53:51.928251Z","created_by":"greg","updated_at":"2026-01-20T10:53:51.928251Z","dependencies":[{"issue_id":"eu-i32","depends_on_id":"eu-ngy","type":"blocks","created_at":"2026-01-20T10:58:41.338406Z","created_by":"greg"}]}
{"id":"eu-i4a0","title":"String operations create intermediate allocations","description":"In src/eval/stg/string.rs, string intrinsics like Join, Match, Split, and Letters create intermediate Vec\u003cString\u003e collections. The Letters intrinsic (line 432) is particularly expensive:\n```rust\nlet letters: Vec\u003cString\u003e = string.chars().map(|c| iter::once(c).collect()).collect();\n```\n\nThis allocates one String per character.\n\n**Fix:** Consider lazy evaluation, streaming, or returning indices instead of materializing all characters.\n\n**Source:** Performance Review hq-leg-om5os","status":"closed","priority":2,"issue_type":"chore","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-21T12:28:29.068762Z","created_by":"mayor","updated_at":"2026-01-21T14:07:45.379221Z","closed_at":"2026-01-21T14:07:45.379221Z","close_reason":"Simplified Letters intrinsic to use c.to_string() instead of iter::once(c).collect(). Per-character String allocation is inherent to the semantics (returns list of strings) and machine_return_str_list API. Further optimization would require architectural changes.","labels":["performance"]}
{"id":"eu-i7c","title":"Brace spacing normalisation","description":"Implement brace spacing normalisation: spaces inside braces for single-line blocks ({a:1} -\u003e { a: 1 }).","status":"open","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-20T10:53:27.874311Z","created_by":"greg","updated_at":"2026-01-20T10:53:27.874311Z","dependencies":[{"issue_id":"eu-i7c","depends_on_id":"eu-r3h","type":"blocks","created_at":"2026-01-20T10:56:43.205492Z","created_by":"greg"}]}
{"id":"eu-i9yj","title":"Update eucalypt-mode.el for modern syntax","description":"dispatched_by: eucalypt_private/crew/koala\n\nUpdate eucalypt-mode.el to handle modern eucalypt syntax features:\n\n- Block metadata syntax\n- Zero arity operators\n- New prelude functions\n\nThe current mode was written in 2019 and may not properly highlight or handle newer language features.","status":"closed","priority":2,"issue_type":"task","assignee":"eucalypt_private/polecats/onyx","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-21T15:45:46.04102Z","created_by":"eucalypt_private/crew/koala","updated_at":"2026-01-21T15:57:07.508526Z","closed_at":"2026-01-21T15:57:07.508526Z","close_reason":"Closed"}
{"id":"eu-ic5","title":"Colon spacing normalisation","description":"Implement colon spacing normalisation: no space before colon, one space after (name : value -\u003e name: value).","status":"open","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-20T10:53:27.310481Z","created_by":"greg","updated_at":"2026-01-20T10:53:27.310481Z","dependencies":[{"issue_id":"eu-ic5","depends_on_id":"eu-r3h","type":"blocks","created_at":"2026-01-20T10:56:42.9405Z","created_by":"greg"}]}
{"id":"eu-iqe","title":"Add .jsonl extension mapping","description":"Add .jsonl extension mapping in Locator::ext_to_format() in src/syntax/input.rs","status":"open","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-20T11:33:39.409822Z","created_by":"greg","updated_at":"2026-01-20T11:33:39.409822Z"}
{"id":"eu-jiu","title":"Unwrap calls in render_doc should propagate Result","description":"In src/syntax/export/format.rs:68-69:\n```rust\ndoc.render(self.config.line_width, \u0026mut w).unwrap();\nString::from_utf8(w).unwrap()\n```\n\nWhile unlikely to fail in practice, using unwrap in library code is less robust than propagating errors.\n\n**Fix:** Return Result\u003cString, String\u003e from render_doc.\n\n**Source:** Correctness Review hq-leg-az4n6","status":"closed","priority":2,"issue_type":"chore","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-21T12:27:29.659373Z","created_by":"mayor","updated_at":"2026-01-21T14:05:28.805734Z","closed_at":"2026-01-21T14:05:28.805734Z","close_reason":"Changed render_doc, format_unit, and format_soup to return Result\u003cString, String\u003e, properly propagating errors from doc.render() and String::from_utf8() instead of using unwrap()."}
{"id":"eu-jtf2","title":"Reformat mode changes unary operator spacing","description":"Reformat mode adds spaces after unary operators, potentially changing semantics.\n\nExamples from 020_op_precedence.eu:\n```\n¬true → ¬ true\n(⊙foo) → (⊙ foo)\n```\n\nThis could change how the code parses - the operator definition `(⊙foo)` defines a different operator than `(⊙ foo)`.","status":"closed","priority":2,"issue_type":"bug","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-22T21:02:38.686088Z","created_by":"eucalypt_private/crew/koala","updated_at":"2026-01-22T21:24:37.353294Z","closed_at":"2026-01-22T21:24:37.353294Z","close_reason":"Fixed: Reformat mode now correctly handles unary operators without adding extra spaces. Operator declarations like (¬x) and (⊙foo) are formatted with tight binding. Expressions like ¬true no longer get a space after the prefix operator."}
{"id":"eu-kd1","title":"ZDT literal","description":"## Analysis: ZDT literal\n\n### Goal\nAdd **literal syntax** for ZDT (Zoned DateTime) values in eucalypt code, avoiding string parsing.\n\n### Current State\nZDT values currently created via functions:\n```eu\n# Current approach - string parsing\nmeeting: ZDT.PARSE(\"2023-01-15T10:30:00Z\")\nbirthday: ZDT.PARSE(\"1990-06-15\")\n```\n\n### Proposed ZDT Literal Syntax Options\n\n#### Option 1: @ Prefix (Like symbols)\n```eu\n# @ prefix for date/time literals\nstart: @2023-01-15T10:30:00Z\nend: @2023-01-15T11:30:00+05:00\ndate-only: @2023-01-15\n```\n\n#### Option 2: D Prefix (D for DateTime)\n```eu\n# D prefix similar to string literals\nmeeting: D\"2023-01-15T10:30:00Z\"\nevent: D'2023-01-15T10:30:00'\n```\n\n#### Option 3: Backtick Delimited\n```eu\n# Backticks for temporal literals\ntimestamp: `2023-01-15T10:30:00Z`\ndate: `2023-01-15`\n```\n\n#### Option 4: Angle Brackets\n```eu\n# Angle brackets for ZDT\nnow: \u003c2023-01-15T10:30:00Z\u003e\ntoday: \u003c2023-01-15\u003e\n```\n\n#### Option 5: Hash Prefix\n```eu\n# # prefix (like Clojure instant literals)\ninstant: #2023-01-15T10:30:00Z\ndate: #2023-01-15\n```\n\n### Format Support\n\n#### Required Formats\n- **ISO 8601 with timezone**: `2023-01-15T10:30:00Z`\n- **ISO 8601 with offset**: `2023-01-15T10:30:00+05:00`\n- **Date only**: `2023-01-15` (assumes 00:00:00 local time)\n\n#### Optional Formats\n- **Time with timezone**: `10:30:00Z`\n- **Readable format**: `15-Jan-2023 10:30 UTC`\n- **Microseconds**: `2023-01-15T10:30:00.123456Z`\n\n### Benefits Over String Parsing\n\n#### Compile-time Validation\n```eu\n# Syntax error at compile time\nbad: @2023-02-30T10:00:00Z  # February 30th doesn't exist\n\n# Runtime error with strings\nbad: ZDT.PARSE(\"2023-02-30T10:00:00Z\")\n```\n\n#### Performance\n- **No parsing overhead**: Direct ZDT construction\n- **Compile-time optimization**: Constant folding possible\n- **Type safety**: Known to be ZDT at compile time\n\n#### Readability\n- **Clear intent**: Obviously a datetime value\n- **Syntax highlighting**: IDEs can highlight specially\n- **Less verbose**: No function call needed\n\n### Implementation Considerations\n\n#### Lexer/Parser Changes\n- **New token type**: Recognize ZDT literals\n- **Format validation**: Check datetime validity during parsing\n- **Error reporting**: Clear errors for invalid dates\n\n#### Integration\n- **Type system**: ZDT literals have ZDT type\n- **Equality**: Literals equal to parsed equivalents\n- **Operations**: All ZDT functions work with literals\n\n### Syntax Recommendation\n\n**Recommended: Option 1 (@ prefix)**\n```eu\nmeeting: @2023-01-15T10:30:00Z\nbirthday: @1990-06-15\n```\n\n**Reasons**:\n- **Consistent**: @ already used for symbols\n- **Unambiguous**: Won't conflict with other syntax\n- **Readable**: Clear and concise\n- **Extensible**: Could support other temporal types\n\n### Priority\nMedium - quality of life improvement for date/time handling\n\n### Implementation Plan\n1. **Choose syntax**: Finalize literal syntax design\n2. **Lexer enhancement**: Add ZDT token recognition\n3. **Parser integration**: Parse ZDT literals to AST\n4. **Validation**: Compile-time date/time validation\n5. **Code generation**: Generate efficient ZDT construction\n6. **Testing**: Comprehensive format and error testing\n\n### Related Issues\n- **Issue #38 (YAML Timestamps)**: Complements YAML timestamp import\n- **Issue #51 (ZDT min/max)**: Works with all ZDT operations\n- **Date/time system**: Part of comprehensive temporal support\n\n### Open Questions\n1. **Timezone defaulting**: What if no timezone specified?\n2. **Local time**: How to specify local timezone?\n3. **Other temporal types**: Duration literals? Period literals?\n4. **Format flexibility**: How strict should parsing be?\n","status":"open","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-17T11:58:09.820577Z","created_by":"eucalypt_private/crew/koala","updated_at":"2026-01-17T12:15:04.603037Z","external_ref":"gh-47","labels":["core"]}
{"id":"eu-kfe","title":"Set implementation","description":"## Analysis: Set implementation\n\n### Requirements\nAdd **Set data type** to eucalypt with native Rust implementation and prelude sugar.\n\n### Implementation Architecture\n\n#### Native Rust Implementation\n- **Built-in data type**: Native set type in STG representation\n- **Rust operations**: Core set operations implemented in Rust for performance\n- **Memory efficient**: Hash-based implementation (HashSet or similar)\n\n#### Prelude Integration\n- **Syntactic sugar**: User-friendly functions via prelude\n- **Consistent API**: Follow naming conventions from v2 prelude design\n- **Composable**: Works well with other eucalypt data types\n\n### Core Set Operations\n\n#### Construction\n- **Empty set**: Zero-arity operator `∅` (relates to Issue #32)\n- **From list**: `set.from-list([1, 2, 3, 2])` → `{1, 2, 3}`\n- **Singleton**: `set.singleton(5)` → `{5}`\n\n#### Basic Operations\n- **Add**: `set.add(item, set)`\n- **Remove**: `set.remove(item, set)`\n- **Contains**: `set.contains(item, set)`\n- **Size**: `set.size(set)`\n\n#### Set Algebra\n- **Union**: `set.union(set1, set2)`\n- **Intersection**: `set.intersect(set1, set2)`\n- **Difference**: `set.diff(set1, set2)`\n- **Symmetric difference**: `set.sym-diff(set1, set2)`\n\n#### Predicates\n- **Empty**: `set.empty?(set)`\n- **Subset**: `set.subset?(set1, set2)`\n- **Disjoint**: `set.disjoint?(set1, set2)`\n\n### Syntax Examples\n```eu\n# Empty set (zero-arity operator)\nempty: ∅\n\n# Create sets\nnums: [1, 2, 3, 2] set.from-list    # {1, 2, 3}\nodds: [1, 3, 5] set.from-list       # {1, 3, 5}\n\n# Set operations\nunion: nums set.union(odds)          # {1, 2, 3, 5}\ncommon: nums set.intersect(odds)     # {1, 3}\nhas-two: nums set.contains(2)        # true\n```\n\n### No Literal Syntax (Initially)\n- **Future consideration**: Might add `{1, 2, 3}` syntax later\n- **Current approach**: Constructor functions only\n- **Avoids complexity**: No parser changes needed initially\n\n### Type System Integration\n- **Separate discussion**: Type system implications (see related issue)\n- **Runtime typing**: Sets have distinct type at runtime\n- **Error handling**: Type errors for invalid operations\n\n### Dependencies and Relationships\n\n#### Issue #32 (Zero-arity operators)\n- **Empty set symbol**: `∅` as zero-arity operator\n- **Implementation dependency**: Requires nullary operator support\n\n#### Issue #11 (v2 prelude)\n- **Consistent naming**: `set.*` namespace\n- **Organized API**: Part of systematic prelude design\n\n### Benefits\n- **Mathematical operations**: Natural set algebra\n- **Data deduplication**: Remove duplicates efficiently\n- **Membership testing**: Fast contains() operations\n- **Algorithmic support**: Better data structure choices\n\n### Priority\nMedium - useful data type, may depend on other enhancements (zero-arity ops, prelude v2)\n\n### Implementation Considerations\n- **Hash function**: Needs consistent hashing for set membership\n- **Ordering**: Sets are unordered (unlike lists)\n- **Equality**: Set equality ignores order\n- **Serialization**: How to export sets to JSON/YAML\n- **Performance**: O(1) membership testing, efficient set operations\n\n### Future Enhancements\n- **Literal syntax**: `{1, 2, 3}` notation\n- **Set comprehensions**: Generate sets with predicates\n- **Specialized sets**: Ordered sets, bit sets, etc.\n","status":"open","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-17T11:58:07.083172Z","created_by":"eucalypt_private/crew/koala","updated_at":"2026-01-17T12:15:01.138336Z","external_ref":"gh-8","labels":["vm"],"dependencies":[{"issue_id":"eu-kfe","depends_on_id":"eu-7kc","type":"relates-to","created_at":"2026-01-17T11:59:47.91891Z","created_by":"eucalypt_private/crew/koala"}]}
{"id":"eu-kklf","title":"Reformat mode has inconsistent indentation","description":"The --reformat mode produces inconsistent indentation within blocks.\n\nExample in 004_bools.eu:\n```\ntrues: {\na: eq(or(f, and(t, t)), t)    # no indent\n  b: eq(f, not(t))             # 2-space indent\n  c: or(t, t)                  # 2-space indent\n}\n```\n\nThe first declaration in a block loses its indentation while subsequent ones keep it.","status":"closed","priority":2,"issue_type":"bug","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-21T15:26:10.579558Z","created_by":"eucalypt_private/crew/koala","updated_at":"2026-01-22T21:24:53.445761Z","closed_at":"2026-01-22T21:24:53.445761Z","close_reason":"Verified fixed: Block indentation is consistent in reformat mode. All declarations have proper 2-space indentation."}
{"id":"eu-knx","title":"STG: Case optimisation","description":"## Analysis: STG: Case optimisation\n\n### Goal\n**Optimize away redundant case statements** where pattern matching is unnecessary.\n\n### Current Problem\nPointless case statements are generated when pattern matching on a constructor with only one branch handling that same constructor:\n\n```stg\nCase Data(x, y, z)\n  Data(a, b, c) -\u003e expression(a, b, c)\n```\n\n**Optimization**: This should be simplified to direct field access without case analysis.\n\n### Optimization Strategy\n\n#### Redundant Case Elimination\n**When case has only one branch matching the scrutinee type**:\n```stg\n# Before optimization\nCase Data(x, y, z)\n  Data(a, b, c) -\u003e a + b + c\n\n# After optimization  \nlet a = x, b = y, c = z in a + b + c\n```\n\n#### Pattern Recognition\nDetect cases where:\n1. **Single constructor**: Case only handles one constructor\n2. **Type match**: Constructor matches the scrutinee type\n3. **No guards**: No additional conditions on the pattern\n4. **Simple binding**: Just extracting fields\n\n### Implementation Approach\n\n#### Compilation Phase Integration\n**Add optimization pass** during STG generation:\n1. **Case analysis**: Identify redundant case statements\n2. **Field extraction**: Convert pattern bindings to direct field access\n3. **Expression substitution**: Replace case with optimized form\n4. **Validation**: Ensure optimization preserves semantics\n\n#### Safety Checks\n- **Type safety**: Verify constructor/type matching\n- **Completeness**: Ensure single branch covers all cases\n- **Side effects**: Don't optimize if pattern has side effects\n- **Lazy evaluation**: Preserve evaluation order\n\n### Benefits\n- **Performance**: Eliminate unnecessary pattern matching overhead\n- **Code size**: Smaller generated STG code\n- **Execution speed**: Direct field access vs case dispatch\n- **Optimization pipeline**: Enable further optimizations\n\n### Examples\n\n#### Simple Field Access\n```stg\n# Generated (redundant)\nCase Tuple(x, y)\n  Tuple(a, b) -\u003e a\n\n# Optimized\nx  # Direct access to first field\n```\n\n#### Multiple Field Usage\n```stg\n# Generated (redundant)\nCase Record(name, age, email)\n  Record(n, a, e) -\u003e n ++ \" is \" ++ show(a)\n\n# Optimized  \nlet n = name, a = age in n ++ \" is \" ++ show(a)\n```\n\n### Implementation Considerations\n\n#### When NOT to Optimize\n- **Multiple constructors**: Case handles different types\n- **Pattern guards**: Additional conditions exist\n- **Irrefutable patterns**: Pattern might fail\n- **Side effects**: Pattern matching has observable effects\n\n#### Integration Points\n- **STG compiler**: Add optimization pass after initial STG generation\n- **Type information**: Use type system to verify safety\n- **Pattern analysis**: Detect redundant patterns accurately\n\n### Priority\nMedium - performance optimization for generated STG code\n\n### Success Criteria\n- **Automatic detection**: Identify all redundant case statements\n- **Safe optimization**: Never change program semantics\n- **Measurable improvement**: Performance gains in pattern-heavy code\n- **No regressions**: Existing functionality preserved\n\n### Related Optimizations\n- **Dead code elimination**: Remove unused case branches\n- **Case fusion**: Combine multiple case statements\n- **Specialization**: Type-specific optimizations\n- **Inlining**: Related to Issue #40 (STG inlining)\n\n### Technical Notes\nThis optimization should be:\n- **Conservative**: Only optimize clearly redundant cases\n- **Fast**: Minimal compilation overhead\n- **Composable**: Work with other STG optimizations\n- **Debuggable**: Maintain debugging information\n","status":"open","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-17T11:58:09.107309Z","created_by":"eucalypt_private/crew/koala","updated_at":"2026-01-17T12:15:04.061472Z","external_ref":"gh-41","labels":["stg"]}
{"id":"eu-ksh","title":"Pass captured args to options","description":"Pass captured args through to options processing","status":"open","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-20T11:17:34.06169Z","created_by":"greg","updated_at":"2026-01-20T11:17:34.06169Z","dependencies":[{"issue_id":"eu-ksh","depends_on_id":"eu-8om","type":"blocks","created_at":"2026-01-20T11:18:39.694384Z","created_by":"greg"}]}
{"id":"eu-lt0","title":"CLI refer to top-level","description":"## Analysis: CLI refer to top-level\n\n### Problem Statement\nWhen using `-e` CLI switch to evaluate expressions against imported data, **no way to refer to the top-level document** without explicitly naming the input.\n\n### Current Limitation\n```bash\n# This doesn't work - no way to reference the JSON\ncat data.json | eu -e \"something.x.y.z\"\n\n# Must explicitly name the input\ncat data.json | eu data=- -e \"data.something.x.y.z\"\n```\n\n### Proposed Solution\n**Default name for top-level input** when using `-e`:\n\n#### Option 1: Implicit Root Name\n```bash\n# \"root\" or \"data\" as default name\ncat data.json | eu -e \"root.something.x.y.z\"\ncat data.json | eu -e \"data.something.x.y.z\"  \n```\n\n#### Option 2: Special Syntax\n```bash\n# Special syntax for top-level reference\ncat data.json | eu -e \"@.something.x.y.z\"     # @ = root\ncat data.json | eu -e \"$.something.x.y.z\"     # $ = root (JSONPath style)\ncat data.json | eu -e \"_.something.x.y.z\"     # _ = root\n```\n\n#### Option 3: Context Variable\n```bash\n# \"this\" or \"it\" as implicit context\ncat data.json | eu -e \"this.something.x.y.z\"\ncat data.json | eu -e \"it.something.x.y.z\"\n```\n\n### Use Cases\n- **JSON processing**: Quick queries on JSON data\n- **Pipeline operations**: Transform data in shell pipelines\n- **Data exploration**: Examine nested structures\n- **Quick extraction**: Pull specific values from documents\n\n### Current Workarounds\n```bash\n# Explicit naming (verbose)\ncat data.json | eu data=- -e \"data.something.x.y.z\"\n\n# Multiple inputs (complex)\neu data=data.json -e \"data.something.x.y.z\"\n```\n\n### Design Considerations\n\n#### Default Name Choice\n- **\"root\"**: Clear meaning, not commonly used\n- **\"data\"**: Intuitive for data processing\n- **\"input\"**: Explicit about source\n- **\"it\"**: Short, common in functional languages\n\n#### Compatibility\n- **Backward compatible**: Don't break existing named inputs\n- **Override behavior**: What if user explicitly names input \"root\"?\n- **Multiple inputs**: How does default work with multiple files?\n\n#### Edge Cases\n- **No input**: What if no stdin/files provided?\n- **Multiple inputs**: Which one is the \"top-level\"?\n- **Named conflicts**: User explicitly uses the default name\n\n### Benefits\n- **Convenience**: Much shorter expressions\n- **Intuitive**: Natural for shell pipeline usage\n- **Consistent**: Always works regardless of input source\n\n### Priority\nMedium - significant usability improvement for CLI usage\n\n### Implementation Approach\n1. **Choose default name**: Decide on \"root\", \"data\", \"it\", etc.\n2. **Conflict resolution**: Handle explicit naming conflicts\n3. **Documentation**: Update CLI help and examples\n4. **Testing**: Comprehensive edge case testing\n\n### Recommended Default\n**\"it\"** - short, common in functional programming, unlikely to conflict:\n```bash\ncat data.json | eu -e \"it.users[0].name\"\neu data.json -e \"it.config.database.host\"\n```\n","status":"open","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-17T11:58:10.176685Z","created_by":"eucalypt_private/crew/koala","updated_at":"2026-01-17T12:15:05.080217Z","external_ref":"gh-14","labels":["cli"]}
{"id":"eu-lze","title":"Add stdin/stdout support","description":"Add stdin/stdout support for piping formatted output.","status":"open","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-20T10:53:51.154745Z","created_by":"greg","updated_at":"2026-01-20T10:53:51.154745Z","dependencies":[{"issue_id":"eu-lze","depends_on_id":"eu-1pd","type":"blocks","created_at":"2026-01-20T10:58:05.216097Z","created_by":"greg"}]}
{"id":"eu-m9z","title":"Implement --write option","description":"Implement --write option for in-place file modification.","status":"open","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-20T10:53:50.631881Z","created_by":"greg","updated_at":"2026-01-20T10:53:50.631881Z","dependencies":[{"issue_id":"eu-m9z","depends_on_id":"eu-1pd","type":"blocks","created_at":"2026-01-20T10:58:04.955001Z","created_by":"greg"}]}
{"id":"eu-ma6y","title":"Document eucalypt architecture in docs/architecture.md","description":"dispatched_by: eucalypt_private/crew/koala\n\nAnalyse and review eucalypt's design and architecture and document thoroughly in docs/architecture.md.\n\nShould cover:\n- Overall system architecture and module structure\n- Parsing pipeline (lexer, parser, AST)\n- Core expression representation\n- STG compilation and evaluation model\n- Memory management and garbage collection\n- The prelude and standard library\n- Driver and CLI architecture\n- Key design decisions and trade-offs","status":"closed","priority":2,"issue_type":"task","assignee":"eucalypt_private/polecats/quartz","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-21T15:35:50.608062Z","created_by":"eucalypt_private/crew/koala","updated_at":"2026-01-21T15:54:06.385133Z","closed_at":"2026-01-21T15:54:06.385133Z","close_reason":"Closed"}
{"id":"eu-mc9","title":"JSONL Format Support","description":"Add JSON Lines format import support. See openspec/changes/add-jsonl-format/ for spec.","status":"open","priority":2,"issue_type":"epic","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-20T11:33:28.886442Z","created_by":"greg","updated_at":"2026-01-20T11:33:28.886442Z"}
{"id":"eu-mrg","title":"Technical debt: 50+ TODO/FIXME/HACK comments","description":"The codebase contains 50+ TODO, FIXME, and HACK comments indicating incomplete or temporary implementations.\n\n**Notable examples:**\n- src/eval/stg/syntax.rs:108 - 'circular Rc leak' TODO\n- src/eval/machine/vm.rs:516 - HACK for dynamic typing workaround\n- src/eval/stg/compiler.rs:955 - HACK to get something 'right in desugar phase instead'\n- src/syntax/input.rs:36 - 'TODO: fix panics on non UTF-8 file name'\n- src/eval/memory/heap.rs:2024, 2040 - 'TODO: fix' comments\n\n**Recommendation:** Create dedicated issues for critical TODOs and track resolution.","status":"open","priority":3,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-20T15:49:21.07252Z","created_by":"eucalypt_private/polecats/obsidian","updated_at":"2026-01-21T18:48:28.393297Z","labels":["technical-debt"]}
{"id":"eu-mul","title":"Gap-filling for nullary operators","description":"Update fill_gaps in fill.rs to classify nullary operators correctly","status":"open","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-20T11:09:11.84251Z","created_by":"greg","updated_at":"2026-01-20T11:09:11.84251Z","dependencies":[{"issue_id":"eu-mul","depends_on_id":"eu-gk7","type":"blocks","created_at":"2026-01-20T11:10:13.990405Z","created_by":"greg"}]}
{"id":"eu-n1i","title":"Create args pseudoblock function","description":"Create create_args_pseudoblock(args: Vec\u003cString\u003e) in io.rs returning acore::list of strings","status":"open","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-20T11:17:34.464388Z","created_by":"greg","updated_at":"2026-01-20T11:17:34.464388Z"}
{"id":"eu-n50","title":"Stream List Inputs","description":"## Analysis: Stream List Inputs\n\n### Current Input System\nEucalypt uses the input syntax: `[name=][format@][URL/file]`\n\nExamples:\n- `eu yaml@-` - treat stdin as YAML data\n- `eu json@a.txt` - treat file a.txt as JSON \n- `eu data=yaml@-` - treat stdin as YAML and name it \"data\"\n\nCurrent implementation in `src/import/mod.rs` loads entire files into memory as `RcExpr`.\n\n### Stream List Inputs Requirements\nEnable processing of line-based streaming data formats for incremental processing:\n- JSON Lines (JSONL) - one JSON object per line, processed incrementally\n- Streaming CSV - process rows as they arrive\n- YAML document streams - multiple YAML documents processed incrementally\n- Real-time data processing - handle data as it arrives\n\n### Key Difference from Issue #48\n- **Issue #48 (JSONL)**: Static file parsing - loads entire JSONL file into memory as list\n- **Issue #52 (Streaming)**: Incremental processing - processes data as iterator/stream without loading everything into memory\n\n### Implementation Considerations\n1. **Parser modifications**: Extend parsers to support incremental parsing\n2. **Memory management**: Streaming to avoid unbounded memory accumulation\n3. **Language integration**: How eucalypt code consumes streams vs single documents\n4. **CLI integration**: Extend existing `format@locator` syntax for streaming variants\n\n### Technical Approach\n- **Streaming variants**: `jsonl-stream@-`, `csv-stream@-`\n- **Iterator-based processing**: Return iterator of expressions instead of single `RcExpr`\n- **Lazy evaluation**: Process items as needed\n\n### Priority\nMedium - language feature for handling larger datasets efficiently without memory constraints\n\n### Relationship to Other Issues\n**Related to Issue #48 (JSONL Support)**: \n- #48: Static JSONL file parsing (higher priority, simpler)\n- #52: General streaming/incremental processing (medium priority, more complex)\n- This issue addresses the streaming use case that #48 doesn't cover\n","status":"open","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-17T11:58:06.172621Z","created_by":"eucalypt_private/crew/koala","updated_at":"2026-01-17T12:14:58.533817Z","external_ref":"gh-52","labels":["topic"],"dependencies":[{"issue_id":"eu-n50","depends_on_id":"eu-uds","type":"relates-to","created_at":"2026-01-17T11:59:54.000738Z","created_by":"eucalypt_private/crew/koala"},{"issue_id":"eu-n50","depends_on_id":"eu-mc9","type":"blocks","created_at":"2026-01-20T11:34:06.893405Z","created_by":"greg"}]}
{"id":"eu-n5h","title":"Harness test: basic JSONL import","description":"Add harness test for basic JSONL import","status":"open","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-20T11:33:42.632324Z","created_by":"greg","updated_at":"2026-01-20T11:33:42.632324Z","dependencies":[{"issue_id":"eu-n5h","depends_on_id":"eu-863","type":"blocks","created_at":"2026-01-20T11:34:02.023587Z","created_by":"greg"}]}
{"id":"eu-n9z","title":"Digest: mol-witness-patrol","description":"Patrol 4: Rig quiet.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-20T09:05:23.951347Z","updated_at":"2026-01-20T09:05:23.951347Z","closed_at":"2026-01-20T09:05:23.9513Z","close_reason":"Squashed from 10 wisps"}
{"id":"eu-nbc","title":"Version assertions","description":"## Analysis: Version assertions\n\n### Requirements\nScripts should be able to declare which eucalypt version they require, with **fail-fast** behavior if requirements aren't met.\n\n### Implementation Approach\n\n#### Version Declaration\n**Metadata-based** version requirements:\n```eu\n{\n  eucalypt-version: \"\u003e=0.2.0\"\n}\n\n# Or more specific requirements\n{\n  eucalypt-version: \"~0.2.5\"  # 0.2.5 or higher in 0.2.x series\n}\n\n# Or exact version\n{\n  eucalypt-version: \"=0.2.7\"\n}\n```\n\n#### Version Specification Granularity\n**Flexible specification** - declare as specifically as required:\n- **Major only**: `\"1\"` or `\"\u003e=1\"`\n- **Major.minor**: `\"1.2\"` or `\"~1.2\"`\n- **Full version**: `\"1.2.3\"` or `\"=1.2.3\"`\n- **Ranges**: `\"\u003e=1.2.0, \u003c2.0.0\"`\n\n#### Version Syntax Support\nCommon version constraint patterns:\n- `\"=1.2.3\"` - Exact version\n- `\"\u003e=1.2.0\"` - Minimum version\n- `\"~1.2.0\"` - Compatible versions (\u003e=1.2.0, \u003c1.3.0)\n- `\"^1.2.0\"` - Compatible with SemVer (\u003e=1.2.0, \u003c2.0.0)\n\n### Behavior\n**Fail-fast** when version requirements not met:\n```\nerror: eucalypt version mismatch\n  required: \u003e=0.3.0\n  current:  0.2.8\n  \nThis script requires eucalypt version 0.3.0 or higher.\n```\n\n### Implementation Details\n- **Check at parse time**: Before executing any code\n- **Clear error messages**: Show required vs actual version\n- **Version parsing**: Handle semantic versioning properly\n- **Backward compatibility**: Scripts without version metadata run normally\n\n### Benefits\n- **Compatibility assurance**: Scripts fail predictably on wrong versions\n- **Clear communication**: Version requirements documented in code\n- **Future-proofing**: Scripts can specify compatibility ranges\n- **Better error messages**: Users know exactly what version is needed\n\n### Priority\nMedium - useful for script distribution and compatibility\n\n### Technical Considerations\n- **Version comparison**: Implement proper SemVer comparison\n- **Multiple constraints**: Support AND/OR version constraints\n- **Performance**: Minimal overhead for version checking\n- **Testing**: Comprehensive tests for version matching logic\n","status":"open","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-17T11:58:08.227875Z","created_by":"eucalypt_private/crew/koala","updated_at":"2026-01-17T12:15:02.97091Z","external_ref":"gh-20","labels":["core"]}
{"id":"eu-ngy","title":"Tab detection","description":"Implement tab detection in source code.","status":"open","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-20T10:53:37.374734Z","created_by":"greg","updated_at":"2026-01-20T10:53:37.374734Z","dependencies":[{"issue_id":"eu-ngy","depends_on_id":"eu-en8","type":"blocks","created_at":"2026-01-20T10:57:06.863796Z","created_by":"greg"}]}
{"id":"eu-nym","title":"Implement --width option","description":"Implement --width option for configurable line width (default 80).","status":"open","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-20T10:53:50.368744Z","created_by":"greg","updated_at":"2026-01-20T10:53:50.368744Z","dependencies":[{"issue_id":"eu-nym","depends_on_id":"eu-1pd","type":"blocks","created_at":"2026-01-20T10:58:04.824091Z","created_by":"greg"}]}
{"id":"eu-oj7","title":"Multi document streams \u0026 multi target","description":"## Analysis: Multi document streams \u0026 multi target\n\n### Scope\nTwo related but distinct features:\n1. **Multi-document streams**: Support YAML/JSON streams with multiple documents (input and output)\n2. **Multi-target output**: Generate multiple files from single eucalypt run\n\n### Multi-Document Streams\n\n#### Input Support\nHandle files containing multiple YAML documents:\n```yaml\n---\nname: config1\nvalue: 42\n---\nname: config2  \nvalue: 84\n```\n\n#### Output Support\nGenerate multi-document streams:\n```eu\neu script.eu --multi-doc \u003e output.yaml\n```\n\n### Multi-Target Output\n\n#### Use Case\nGenerate multiple files from single eucalypt source:\n```eu\n{\n  target: \"nginx.conf\"\n  filename: \"/etc/nginx/nginx.conf\"\n}: {\n  # nginx configuration\n}\n\n{\n  target: \"supervisor.conf\"\n  filename: \"/etc/supervisor/supervisor.conf\"  \n}: {\n  # supervisor configuration\n}\n```\n\nSingle run generates both files - useful for:\n- **Dotfile generation**: Multiple config files from one source\n- **Project scaffolding**: Generate project structure\n- **Configuration management**: Related configs from single source\n\n### Implementation Approach\n\n#### Multi-Document Parsing\n- Extend YAML parser to handle `---` document separators\n- Return list of documents instead of single document\n- Support in import system: `yaml-multi@file.yaml`\n\n#### Multi-Target Generation\n- **Metadata-driven**: Use `filename` or `output` metadata\n- **CLI support**: `eu script.eu --write-targets`\n- **Directory handling**: Create directories as needed\n- **Conflict resolution**: Handle existing files appropriately\n\n### Benefits\n- **Configuration management**: Better tooling for config generation\n- **Data processing**: Handle multi-document formats naturally  \n- **Workflow improvement**: Single run for related outputs\n- **Template systems**: More powerful code generation\n\n### Priority\nMedium - useful feature for real-world workflows\n\n### Relationship to Other Issues\n**Independent of Issue #52** (Stream List Inputs) - this is about multiple complete documents, not streaming processing\n\n### Technical Considerations\n- **Memory usage**: Multiple documents in memory\n- **Error handling**: Failure in one target shouldn't stop others\n- **Permissions**: File writing requires appropriate permissions\n- **Safety**: Prevent accidental file overwrites\n- **Progress reporting**: Show which files are being written\n","status":"open","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-17T11:58:07.343915Z","created_by":"eucalypt_private/crew/koala","updated_at":"2026-01-17T12:15:01.541853Z","external_ref":"gh-16","labels":["cli"]}
{"id":"eu-ow2","title":"ToSourceDoc for ParenExpr","description":"Implement ToSourceDoc for ParenExpr (parenthesised expressions).","status":"open","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-20T10:53:16.702363Z","created_by":"greg","updated_at":"2026-01-20T10:53:16.702363Z","dependencies":[{"issue_id":"eu-ow2","depends_on_id":"eu-r3h","type":"blocks","created_at":"2026-01-20T10:56:35.290767Z","created_by":"greg"}]}
{"id":"eu-pfb","title":"Harness test: JSONL various types","description":"Add test for JSONL with various JSON types (objects, arrays, primitives)","status":"open","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-20T11:33:43.256927Z","created_by":"greg","updated_at":"2026-01-20T11:33:43.256927Z","dependencies":[{"issue_id":"eu-pfb","depends_on_id":"eu-863","type":"blocks","created_at":"2026-01-20T11:34:02.154641Z","created_by":"greg"}]}
{"id":"eu-pj5","title":"Command Line Args (Phase 1)","description":"Basic access to command line arguments via __ARGS pseudo-input. See openspec/changes/add-command-line-args/ for full spec.","status":"closed","priority":2,"issue_type":"epic","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-20T11:17:24.568963Z","created_by":"greg","updated_at":"2026-01-20T12:04:03.576285Z","closed_at":"2026-01-20T12:04:03.576285Z","close_reason":"Implemented __args pseudo-input for CLI arguments. Args captured after -- separator, available as list. Tests in harness/test/056_args.eu. Documented in docs/command-line.md."}
{"id":"eu-ptu","title":"Eucalypt Documentation Refresh","description":"Docs build is currently failing.\n\nNeed to review / refresh documentation. Potentially create a better website with a docs section.\n","status":"open","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-17T11:58:10.968192Z","created_by":"eucalypt_private/crew/koala","updated_at":"2026-01-17T11:58:10.968192Z","external_ref":"gh-67"}
{"id":"eu-pvc","title":"Digest: mol-witness-patrol","description":"Patrol 2: Rig quiet - no polecats, no MRs, no cleanups.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-20T09:04:01.996646Z","updated_at":"2026-01-20T09:04:01.996646Z","closed_at":"2026-01-20T09:04:01.996599Z","close_reason":"Squashed from 10 wisps"}
{"id":"eu-q4l","title":"ToSourceDoc for Soup","description":"Implement ToSourceDoc for Soup (expression sequences with operators).","status":"open","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-20T10:53:16.024262Z","created_by":"greg","updated_at":"2026-01-20T10:53:16.024262Z","dependencies":[{"issue_id":"eu-q4l","depends_on_id":"eu-r3h","type":"blocks","created_at":"2026-01-20T10:56:34.899774Z","created_by":"greg"}]}
{"id":"eu-qc2e","title":"Redundant key cloning in regex cache","description":"In src/eval/stg/string.rs:45-58, the regex caching function clones the key string twice when inserting:\n```rust\nlet key = text.as_ref().to_string();  // First allocation\nif !rcache.contains(\u0026key) {\n    let re = Regex::new(text.as_ref()).map_err(|_| ExecutionError::BadRegex(key.clone()))?;\n    rcache.put(key.clone(), re);  // Second clone\n}\n```\n\n**Fix:** Use entry API or restructure to avoid double cloning.\n\n**Source:** Performance Review hq-leg-om5os","status":"closed","priority":2,"issue_type":"chore","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-21T12:28:27.55801Z","created_by":"mayor","updated_at":"2026-01-21T14:04:15.337748Z","closed_at":"2026-01-21T14:04:15.337748Z","close_reason":"Restructured cached_regex to avoid pre-allocating the key string. Now uses text.as_ref() directly for contains/get, only allocating when inserting. Reduces allocations from 2 to 1 on cache miss, and from 1 to 0 on cache hit.","labels":["performance"]}
{"id":"eu-qfj","title":"HTML import","description":"## Analysis: HTML import\n\n### Goal\nImport HTML files and parse them into eucalypt data structures, similar to how other languages represent HTML/DOM as nested data.\n\n### HTML Representation in Eucalypt\n\n#### DOM Tree Structure\nRepresent HTML as nested blocks with consistent structure:\n```eu\n# HTML: \u003cdiv class=\"container\"\u003e\u003cp\u003eHello\u003c/p\u003e\u003cp\u003eWorld\u003c/p\u003e\u003c/div\u003e\n# Eucalypt representation:\n{\n  tag: \"div\"\n  attributes: {class: \"container\"}\n  children: [\n    {\n      tag: \"p\"\n      attributes: {}\n      children: [\"Hello\"]\n    }\n    {\n      tag: \"p\" \n      attributes: {}\n      children: [\"World\"]\n    }\n  ]\n}\n```\n\n#### Text Nodes and Mixed Content\n```eu\n# HTML: \u003cp\u003eText \u003cstrong\u003ebold\u003c/strong\u003e more text\u003c/p\u003e\n# Eucalypt representation:\n{\n  tag: \"p\"\n  attributes: {}\n  children: [\n    \"Text \"\n    {tag: \"strong\", attributes: {}, children: [\"bold\"]}\n    \" more text\"\n  ]\n}\n```\n\n### Implementation Approach\n\n#### HTML Parser Integration\n- **Rust HTML parser**: Use established crate (scraper, html5ever, etc.)\n- **Error handling**: Invalid HTML, malformed markup\n- **Standards compliance**: HTML5 parsing rules\n- **Performance**: Efficient parsing for large documents\n\n#### Import System Integration\nAdd HTML to existing import formats:\n```bash\neu html@document.html        # Import HTML file\neu html@-                    # Import HTML from stdin\neu content=html@page.html    # Named HTML import\n```\n\n### Use Cases\n\n#### Web Scraping\n```eu\n# Extract data from HTML\npage: html@scrape-target.html\ntitles: page find(\"//h1\") map(.children[0])\nlinks: page find(\"//a\") map(.attributes.href)\n```\n\n#### Template Processing\n```eu\n# Process HTML templates\ntemplate: html@template.html\nprocessed: template transform-nodes(update-content)\n```\n\n#### Content Extraction\n```eu\n# Extract structured data\narticle: html@article.html\ncontent: article find(\"//article\")[0]\nmetadata: content find(\"//meta\") extract-metadata\n```\n\n#### Document Analysis\n```eu\n# Analyze HTML structure\ndoc: html@document.html\nheadings: doc find(\"//h1|//h2|//h3\") extract-text\nimages: doc find(\"//img\") map(.attributes.src)\n```\n\n### Data Structure Design\n\n#### Core Element Structure\n```eu\nelement: {\n  tag: \"string\"           # Element tag name\n  attributes: {}           # Key-value attribute pairs\n  children: []             # Array of child elements/text\n}\n```\n\n#### Special Cases\n- **Text nodes**: Plain strings in children array\n- **Comments**: Special representation or ignored\n- **DOCTYPE**: Document metadata handling\n- **Self-closing tags**: Consistent representation\n\n### Integration with Other Features\n\n#### XPath-style Searching (Issue #13)\nHTML import would work excellently with XPath searching:\n```eu\ndoc: html@page.html\nresults: doc find(\"//div[@class='content']//p\")\n```\n\n#### JSON/YAML Export\nHTML data structures export naturally:\n```bash\neu html@page.html -x json \u003e structured-data.json\n```\n\n### Technical Considerations\n\n#### Parser Choice\n- **html5ever**: Rust's standard HTML parser\n- **scraper**: Higher-level interface\n- **Custom wrapper**: Eucalypt-specific parsing logic\n\n#### Performance\n- **Large documents**: Streaming vs full parse\n- **Memory usage**: Efficient representation\n- **Error recovery**: Graceful handling of bad HTML\n\n#### Standards Compliance\n- **HTML5 parsing**: Follow spec for edge cases\n- **Character encoding**: UTF-8, other encodings\n- **Validation**: Optional strict vs loose parsing\n\n### Benefits\n- **Web data processing**: Extract data from HTML documents\n- **Template systems**: Process HTML templates with eucalypt\n- **Content migration**: Convert HTML to structured data\n- **Web scraping**: Structured approach to data extraction\n\n### Priority\nMedium - useful for web-related data processing workflows\n\n### Implementation Plan\n1. **Choose HTML parser**: Evaluate Rust HTML parsing crates\n2. **Design representation**: Finalize eucalypt HTML data structure\n3. **Import integration**: Add HTML format to import system\n4. **Testing**: Comprehensive HTML parsing test cases\n5. **Documentation**: Usage examples and best practices\n\n### Related Issues\n- **Issue #13 (XPath searching)**: Perfect complement for HTML processing\n- **Import system**: Extends existing format support\n- **Export formats**: HTML structures export to JSON/YAML naturally\n","status":"open","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-17T11:58:08.736511Z","created_by":"eucalypt_private/crew/koala","updated_at":"2026-01-17T12:15:03.706472Z","external_ref":"gh-35","labels":["io"]}
{"id":"eu-qge","title":"ToSourceDoc for ApplyTuple","description":"Implement ToSourceDoc for ApplyTuple (function application arguments).","status":"open","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-20T10:53:16.477235Z","created_by":"greg","updated_at":"2026-01-20T10:53:16.477235Z","dependencies":[{"issue_id":"eu-qge","depends_on_id":"eu-r3h","type":"blocks","created_at":"2026-01-20T10:56:35.160033Z","created_by":"greg"}]}
{"id":"eu-qhul","title":"Documentation review and update","description":"dispatched_by: eucalypt_private/crew/koala\n\nReview and update project documentation to ensure it is current and comprehensive.\n\nAreas to consider:\n- README and getting started guide\n- Language reference and syntax documentation\n- Prelude function documentation\n- CLI usage and options\n- Examples and tutorials","status":"closed","priority":2,"issue_type":"task","assignee":"eucalypt_private/polecats/jasper","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-21T15:34:12.511636Z","created_by":"eucalypt_private/crew/koala","updated_at":"2026-01-21T15:59:53.483352Z","closed_at":"2026-01-21T15:59:53.483352Z","close_reason":"Closed"}
{"id":"eu-qlw","title":"Add eu fmt --help documentation","description":"Add comprehensive --help documentation for the eu fmt subcommand.","status":"open","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-20T10:53:57.865002Z","created_by":"greg","updated_at":"2026-01-20T10:53:57.865002Z","dependencies":[{"issue_id":"eu-qlw","depends_on_id":"eu-1pd","type":"blocks","created_at":"2026-01-20T10:59:00.156719Z","created_by":"greg"}]}
{"id":"eu-qvk","title":"Quote-embed inputs","description":"## Analysis: Quote-embed inputs \u0026 AST metaprogramming\n\n### Goal\nEnable **manipulation of eucalypt syntax in eucalypt** by getting eucalypt data structures that represent the AST instead of executing code.\n\n### Scope\n**Complete metaprogramming system** with two main capabilities:\n1. **Quote syntax**: Quote expressions within eucalypt files\n2. **Quote import**: Import eucalypt files as AST data structures\n\n### Quote-Embed Mechanisms\n\n#### 1. Quote Syntax in Files\nQuote expressions to get AST instead of execution:\n```eu\n# Normal execution\nresult: 2 + 3  # → 5\n\n# Quote syntax (AST as data)\nast: quote(2 + 3)  # → {type: \"add\", left: 2, right: 3}\n\n# Quote blocks\nblock-ast: quote({\n  x: 10\n  y: x + 5\n})\n```\n\n#### 2. Quote Import\nImport eucalypt files as AST data structures:\n```bash\neu quote-eu@source.eu        # Import AST instead of executing\neu ast=quote-eu@module.eu    # Named AST import\n```\n\n### Use Cases\n\n#### Documentation Generation\n**Flexible doc rendering** (primary motivation):\n```eu\n# Analyze function definitions for documentation\nsource-ast: quote-eu@module.eu\nfunctions: source-ast extract-functions\ndocs: functions map(generate-docs)\n```\n\n#### Code Analysis\n**Static analysis within eucalypt**:\n```eu\n# Analyze code structure\nast: quote(complex-function-definition)\ncomplexity: ast measure-complexity\ndependencies: ast extract-dependencies\n```\n\n#### Future Macro System\n**Code transformation and generation**:\n```eu\n# Transform AST and re-evaluate\noriginal: quote(complex-expression)\noptimized: original optimize-ast\nresult: eval(optimized)  # Future: evaluate transformed AST\n```\n\n### AST Data Structure Design\n\n#### Consistent Representation\n**Unified AST format** for all eucalypt syntax:\n```eu\n# Expression representation\nexpression: {\n  type: \"function-call\"\n  function: {type: \"identifier\", name: \"map\"}\n  arguments: [\n    {type: \"identifier\", name: \"items\"}\n    {type: \"lambda\", parameter: \"x\", body: {...}}\n  ]\n  source: {file: \"module.eu\", line: 10, column: 5}\n  metadata: {...}\n}\n```\n\n#### AST Node Types\n- **Literals**: Numbers, strings, symbols, booleans\n- **Identifiers**: Variable and function names\n- **Function calls**: Application expressions\n- **Blocks**: Block/object structures\n- **Lists**: List literals and expressions\n- **Lambdas**: Function definitions\n- **Metadata**: Attached metadata\n\n### Implementation Approach\n\n#### Quote Syntax Implementation\n1. **Parser extension**: Recognize `quote()` syntax\n2. **AST generation**: Convert parsed expressions to data structures\n3. **Source preservation**: Maintain file/line information\n4. **Nested quoting**: Handle quotes within quotes\n\n#### Quote Import Implementation\n1. **Import format**: Add `quote-eu` to import system\n2. **Parser integration**: Reuse existing parser for AST generation\n3. **File handling**: Process entire files as AST\n4. **Error handling**: Parse errors in quoted files\n\n### Technical Considerations\n\n#### AST Fidelity\n- **Complete representation**: Preserve all syntax information\n- **Source locations**: Maintain file/line/column information\n- **Comments**: Include documentation comments where possible\n- **Formatting**: Preserve original structure where relevant\n\n#### Performance\n- **Parse overhead**: Cost of generating AST vs normal execution\n- **Memory usage**: AST data structures vs compiled code\n- **Caching**: Cache parsed AST for repeated imports\n\n#### Integration\n- **Type system**: AST nodes as first-class eucalypt values\n- **Error reporting**: Meaningful errors for AST manipulation\n- **Debugging**: Source mapping for transformed code\n\n### Benefits\n- **Metaprogramming**: Code that manipulates code\n- **Documentation tools**: Extract docs from source AST  \n- **Code analysis**: Static analysis capabilities within eucalypt\n- **Future macros**: Foundation for macro system\n- **Template systems**: Code generation and transformation\n\n### Priority\nMedium - enables flexible documentation and metaprogramming capabilities\n\n### Implementation Plan\n1. **AST data structure design**: Define canonical eucalypt AST representation\n2. **Quote syntax**: Implement inline `quote()` function\n3. **Quote import**: Implement `quote-eu@` import format\n4. **Integration testing**: Ensure AST fidelity and usability\n5. **Documentation**: Guide for metaprogramming patterns\n\n### Relationship to Other Issues\n- **Issue #36 (Render prelude docs)**: Quote-embed enables flexible doc generation\n- **Issue #18 (Render to string)**: Related eval/metaprogramming capability\n\n### Example Workflows\n\n#### Documentation Generation\n```eu\n# Extract function docs from source\nmodule-ast: quote-eu@my-module.eu\nfunctions: module-ast find-nodes({type: \"function\"})\ndocs: functions map(extract-signature) render-html\n```\n\n#### Code Analysis\n```eu\n# Analyze complexity\ncode-ast: quote(complex-algorithm)\nmetrics: {\n  complexity: code-ast measure-complexity\n  depth: code-ast max-nesting-depth\n  calls: code-ast count-function-calls\n}\n```\n\n#### Template Processing\n```eu\n# Generate similar functions\ntemplate: quote(process-TYPE(data) -\u003e data.TYPE validate)\ntypes: [\"user\", \"order\", \"product\"]\nfunctions: types map(type -\u003e template.substitute({TYPE: type}))\n```\n","status":"open","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-17T11:58:08.823273Z","created_by":"eucalypt_private/crew/koala","updated_at":"2026-01-17T12:15:03.82248Z","external_ref":"gh-37","labels":["cli"]}
{"id":"eu-qw4","title":"YAML merge keys","description":"## Analysis: YAML merge keys\n\n### Scope\nSupport YAML's `\u003c\u003c` merge key syntax when **importing YAML files** (not adding merge keys to eucalypt syntax).\n\n### YAML Merge Keys Feature\nStandard YAML feature for combining mappings:\n```yaml\n# YAML with merge keys\ndefaults: \u0026defaults\n  timeout: 30\n  retries: 3\n\nproduction:\n  \u003c\u003c: *defaults\n  host: prod.example.com\n  timeout: 60  # Override default\n\n# Should resolve to:\n# production:\n#   timeout: 60\n#   retries: 3  \n#   host: prod.example.com\n```\n\n### Current State\n**Unknown**: Need to investigate current behavior when importing YAML with merge keys.\n\n### Implementation Requirements\n\n#### YAML Import Enhancement\nExtend YAML import to properly handle `\u003c\u003c` merge syntax:\n- **Parse merge keys**: Recognize `\u003c\u003c` in YAML\n- **Resolve references**: Follow anchors and merge values\n- **Proper precedence**: Later values override merged ones\n- **Multiple merges**: Support merging multiple references\n\n#### Investigation Needed\n1. **Current behavior**: What happens when we import YAML with merge keys?\n2. **YAML parser**: Does rust yaml parser support merge keys?\n3. **Error handling**: How should invalid merges be handled?\n\n### Eucalypt Syntax Consideration\n**No merge keys in eucalypt syntax** - unless we remove block application in favor of explicit operators.\n\n**Alternative**: Eucalypt already has application operator for shallow merge operations.\n\n### Use Cases\n- **Configuration files**: YAML configs using merge for DRY principle\n- **Kubernetes manifests**: Common pattern in K8s YAML\n- **CI/CD configs**: Build configs with shared settings\n- **Legacy YAML**: Support existing YAML files with merges\n\n### Priority\nLow - not many people use YAML merge keys\n\n### Implementation Plan\n1. **Investigation phase**: Test current merge key behavior\n2. **Parser enhancement**: Ensure YAML parser handles merges correctly\n3. **Testing**: Comprehensive test cases with various merge patterns\n4. **Documentation**: Document merge key support limitations\n\n### Technical Considerations\n- **YAML spec compliance**: Follow YAML 1.1/1.2 merge behavior\n- **Performance**: Merge resolution during import\n- **Error reporting**: Clear errors for invalid merge syntax\n- **Nested merges**: Handle complex merge scenarios\n\n### Compatibility Questions\n- **Anchor support**: Do we properly support YAML anchors/aliases?\n- **Circular references**: How to handle merge cycles?\n- **Type conflicts**: What happens when merging incompatible types?\n\n### Example Import\n```bash\n# YAML file with merge keys\neu yaml@config-with-merges.yaml\n\n# Should properly resolve all \u003c\u003c merges\n```\n","status":"open","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-17T11:58:10.085239Z","created_by":"eucalypt_private/crew/koala","updated_at":"2026-01-17T12:15:04.950144Z","external_ref":"gh-6","labels":["io"]}
{"id":"eu-qy8j","title":"Conservative fmt: tab-to-space breaks alignment","description":"When converting tabs to spaces in conservative mode, the formatter doesn't know the starting column position in the line. This causes alignment to break.\n\nExample in 004_bools.eu:\n```\n# Original (tabs align RHS):\nt:\t __TRUE\nf:\t __FALSE\nif:      __IF\n\n# After fmt (alignment lost):\nt:   __TRUE\nf:   __FALSE\nif: __IF\n```\n\nRoot cause in format.rs normalize_whitespace(): tracks column within whitespace token, not line column.\n\nThis same issue causes:\n- Continuation line misalignment (010_prelude.eu - comma under bracket)\n- Deep nesting indentation errors (026_imports.eu)\n- Trailing comment alignment loss (gc test files)\n\nProposed fix (b1): In conservative mode, pass line column context to normalize_whitespace and calculate correct spaces to preserve alignment intent.","status":"closed","priority":2,"issue_type":"bug","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-21T15:25:57.280298Z","created_by":"eucalypt_private/crew/koala","updated_at":"2026-01-22T21:24:37.460335Z","closed_at":"2026-01-22T21:24:37.460335Z","close_reason":"Fixed: Conservative mode now uses standard 8-character tab stops when converting tabs to spaces, preserving the original alignment intent."}
{"id":"eu-r3h","title":"Implement whitespace analysis utilities","description":"Implement whitespace analysis utilities for Rowan nodes to detect spacing violations, tabs, and alignment patterns.","status":"open","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-20T10:53:03.238951Z","created_by":"greg","updated_at":"2026-01-20T10:53:03.238951Z"}
{"id":"eu-rig-eucalypt_private","title":"eucalypt_private","description":"Rig identity bead for eucalypt_private.\n\nrepo: git@github.com:curvelogic/eucalypt-private.git\nprefix: ep\nstate: active","status":"open","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-17T11:43:14.139221Z","created_by":"greg","updated_at":"2026-01-17T11:43:14.139221Z","labels":["gt:rig"]}
{"id":"eu-rlq","title":"Rowan-based parsing","description":"## Overview\n\nRowan-based parsing implementation to replace LALRPOP parser, providing foundation for LSP and tooling infrastructure.\n\n## Status: Part 1 COMPLETE ✅\n\n**Part 1** (Rowan parser implementation) has been completed and merged. All core functionality working, all tests passing.\n\n**Part 2** (AST migration) is planned as a separate branch/PR to complete the architectural cleanup.\n\n## Part 1 Achievements ✅\n\n### Core Implementation\n- **Rowan parser**: ✅ Complete replacement of LALRPOP parser\n- **STG generation**: ✅ Identical output to LALRPOP parser\n- **Integration**: ✅ Fully integrated into compilation pipeline\n- **String interpolation**: ✅ All dotted lookup patterns working\n- **Embedded lambda parsing**: ✅ YAML \\!eu::fn syntax working\n- **Block anaphora**: ✅ •, •0, •1 tokens and parsing implemented\n- **Core embedding**: ✅ Backtick embedding syntax working\n- **Operator precedence**: ✅ Fixed metadata application in cooking phase\n\n### Test Results\n- **Unit tests**: ✅ 262 tests passing\n- **Harness tests**: ✅ 59 tests passing  \n- **All failing tests resolved**: ✅\n  - test_harness_020 (operator precedence) - FIXED\n  - test_harness_023 (embedded lambda) - FIXED  \n  - test_harness_048 (core embedding) - FIXED\n\n### Quality \u0026 Performance\n- **Clippy warnings**: ✅ All 22 warnings resolved\n- **Code formatting**: ✅ Applied via cargo fmt\n- **Performance**: ✅ Benchmarked - comparable to LALRPOP\n  - Parse stage: 12.3ms (vs 12.6ms LALRPOP) - slightly faster\n  - Translate stage: 5.7ms (vs 2.9ms LALRPOP) - acceptable overhead\n- **Old parser removal**: ✅ All LALRPOP remnants removed\n\n### Features Implemented  \n- **String patterns**: ✅ Full interpolation with format specs\n- **Declaration parsing**: ✅ All declaration types supported\n- **Metadata syntax**: ✅ Backtick metadata working\n- **Operator declarations**: ✅ Prefix, postfix, binary operators\n- **Block expressions**: ✅ Nested blocks with metadata\n- **List expressions**: ✅ With trailing commas\n- **Function calls**: ✅ Application tuples working\n\n## Part 2 Plan: AST Migration\n\n### Scope\nRemove all traces of old LALRPOP AST and complete migration to Rowan AST throughout codebase.\n\n### Key Areas  \n1. **Core embedding** (Priority) - Rewrite `src/core/export/embed.rs` to use Rowan AST\n2. **Pretty printing** - Create new source formatter using Rowan AST  \n3. **Import analysis** - Remove legacy AST conversion functions\n4. **Complete cleanup** - Remove `src/syntax/ast.rs` and all old AST references\n\n### Success Criteria\n- Single AST representation (Rowan) throughout system\n- Core embedding works with Rowan AST\n- All tests continue passing\n- Clean, maintainable architecture\n\n## Branch Status\n- **refactor/rowan**: ✅ Complete and pushed\n- **Next**: Create new branch for Part 2 AST migration work\n","status":"closed","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-17T11:58:05.5143Z","created_by":"eucalypt_private/crew/koala","updated_at":"2026-01-17T11:58:05.565049Z","closed_at":"2026-01-17T11:58:05.565052Z","external_ref":"gh-45","labels":["parse"]}
{"id":"eu-smb","title":"Harness test: multiple nullary operators","description":"Add test for multiple nullary operators in same expression","status":"closed","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-20T11:09:13.628706Z","created_by":"greg","updated_at":"2026-01-22T21:03:42.105252Z","closed_at":"2026-01-22T21:03:42.105252Z","close_reason":"Closed","dependencies":[{"issue_id":"eu-smb","depends_on_id":"eu-xjv","type":"blocks","created_at":"2026-01-20T11:10:49.401342Z","created_by":"greg"}]}
{"id":"eu-sts","title":"Add __ARGS usage example","description":"Add example showing __ARGS usage in documentation","status":"open","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-20T11:17:47.425229Z","created_by":"greg","updated_at":"2026-01-20T11:17:47.425229Z","dependencies":[{"issue_id":"eu-sts","depends_on_id":"eu-uoh","type":"blocks","created_at":"2026-01-20T11:19:03.527605Z","created_by":"greg"}]}
{"id":"eu-t88","title":"Inject __ARGS pseudo-input","description":"Add __ARGS pseudo-input injection in process_defaults() alongside __io and __build","status":"open","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-20T11:17:34.847684Z","created_by":"greg","updated_at":"2026-01-20T11:17:34.847684Z","dependencies":[{"issue_id":"eu-t88","depends_on_id":"eu-ksh","type":"blocks","created_at":"2026-01-20T11:18:50.848218Z","created_by":"greg"},{"issue_id":"eu-t88","depends_on_id":"eu-n1i","type":"blocks","created_at":"2026-01-20T11:18:50.981121Z","created_by":"greg"}]}
{"id":"eu-ttd","title":"Implement --check option","description":"Implement --check option for CI integration (exit non-zero if formatting needed).","status":"closed","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-20T10:53:50.892234Z","created_by":"greg","updated_at":"2026-01-22T21:06:26.986628Z","closed_at":"2026-01-22T21:06:26.986628Z","close_reason":"Already implemented","dependencies":[{"issue_id":"eu-ttd","depends_on_id":"eu-1pd","type":"blocks","created_at":"2026-01-20T10:58:05.087018Z","created_by":"greg"}]}
{"id":"eu-twg","title":"Tester: Support Error Message Tests","description":"## Analysis: Tester Support for Error Message Tests\n\n### Current State\n\n**Success Tests:**\n- Use test harness with `RESULT: __IF(condition, :PASS, :FAIL)` pattern\n- Located in `harness/test/*.eu` and integrated into `tests/harness_test.rs`\n- Systematic validation through `eu -T` test runner\n\n**Error Tests:**\n- Exist in `harness/test/errors/` directory (20+ error test files)\n- Currently **no validation mechanism** - they just fail when run manually\n- No integration with test harness or automated testing\n- No way to verify specific error messages\n\n**Example Error Tests:**\n- `006_div_by_zero.eu` → \"unresolved free variable reference [2653]\"\n- `010_assert.eu` → \"panic: Assertion failed\"\n- `021_bad_num_parse.eu` → \"bad number format: blah\"\n\n### Current Test Infrastructure\n\n**Test Runner (`eu -T`):**\n- Builds test plan from targets and validations\n- Generates evidence file with: `exit`, `stdout`, `stderr`, `result`, `stats`\n- Validates based on `RESULT` key value\n- Supports custom validators\n\n**Problem:** Error tests not integrated into this system\n\n### Implementation Plan\n\n#### Phase 1: Basic Error Test Integration\n1. **Extend test runner** to handle error tests\n2. **Add error expectation metadata** in test files\n3. **Modify validator** to check `stderr` content when error expected\n4. **Integrate existing error tests** into `tests/harness_test.rs`\n\n#### Phase 2: Enhanced Error Validation  \n1. **Pattern matching** for error messages (regex support)\n2. **Error code validation** (specific error types)\n3. **Multiple error expectations** (for complex scenarios)\n\n#### Phase 3: Error Message Quality\n1. **Error message consistency** checks\n2. **Regression testing** for error message changes\n3. **Documentation generation** from error tests\n\n### Benefits\n- **Improved error messages** through systematic testing\n- **Regression prevention** for error reporting\n- **Better user experience** through validated error feedback\n\n### Priority\nHigh - improving error messages is critical for user experience, but after Rowan parsing implementation\n\n### Technical Notes\n- Leverage existing test infrastructure (`eu -T`, evidence generation)\n- Error tests already exist, just need validation framework\n- Can reuse current test metadata system for error expectations\n","status":"open","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-17T11:58:07.702597Z","created_by":"eucalypt_private/crew/koala","updated_at":"2026-01-17T11:58:07.702597Z","external_ref":"gh-43","labels":["tester"]}
{"id":"eu-tzx","title":"General application of data structures","description":"## Analysis: General application of data structures\n\n### Current State\n**Ad hoc function application** for certain data structures:\n- **Blocks**: Applied as functions perform merge operations\n- **Strings**: Have function application behavior\n- **Issue**: This is ad hoc, specific, and potentially incoherent\n\n### The Problem\nCurrent situation raises several concerns:\n1. **Coherence**: Is the current overloading semantically consistent?\n2. **Grammar conflicts**: 0- and 1-ary overloading may conflict with eucalypt's fixed-arity assumptions\n3. **Partial application**: How does this interact with currying?\n4. **Predictability**: Users may be surprised by data structures acting as functions\n\n### Design Questions\n\n#### Fundamental Question\n**Should any data structure be applicable as a function?** If so, what does this mean?\n\n#### Current Examples to Analyze\n- **Block application**: `{a: 1} {b: 2}` → merge behavior\n- **String application**: What does string application currently do?\n- **List application**: Could `[1,2,3](index)` make sense?\n- **Other types**: Numbers, booleans, etc.\n\n#### Semantic Coherence Issues\n- **Variable arity**: Data structures as functions have 0-ary (value) and 1-ary (function) interpretations\n- **Fixed arity assumption**: Eucalypt's currying assumes fixed arity\n- **Type confusion**: When is something data vs function?\n\n### Potential Approaches\n\n#### Option 1: Remove Ad Hoc Applications\n- **Explicit operations only**: No automatic function behavior\n- **Clear semantics**: Data is data, functions are functions\n- **Breaking change**: Would affect existing code\n\n#### Option 2: Generalize Systematically  \n- **Define clear rules**: What application means for each type\n- **Consistent semantics**: All data structures follow same pattern\n- **Document thoroughly**: Make behavior predictable\n\n#### Option 3: Limited Application\n- **Keep current behavior**: But document and justify it\n- **No expansion**: Don't add more ad hoc cases\n- **Clarify semantics**: Make current behavior more coherent\n\n### Grammar and Implementation Concerns\n- **Parser ambiguity**: Distinguishing data from function application\n- **Type system**: How to type-check variable arity\n- **Optimization**: Performance impact of dynamic dispatch\n- **Error messages**: Clear feedback when application fails\n\n### Priority\nMedium - the discomfort with coherence is valid and needs resolution\n\n### Next Steps\n1. **Audit current behavior**: Document exactly what applies as functions\n2. **Analyze use cases**: Where is this feature actually used?\n3. **Design principles**: Establish coherent rules for application\n4. **Impact assessment**: What would changes break?\n\n### For Discussion\n- Is merge-on-application for blocks actually useful?\n- What does string application currently do and why?\n- Should we move toward explicit operations only?\n- How do other languages handle this problem?\n","status":"open","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-17T11:58:08.138384Z","created_by":"eucalypt_private/crew/koala","updated_at":"2026-01-17T12:15:02.851242Z","external_ref":"gh-17","labels":["topic"]}
{"id":"eu-u1m","title":"min / max implementations for ZDTs","description":"## Analysis: min / max implementations for ZDTs\n\nThis issue requests min/max comparison implementations for Zoned DateTime (ZDT) values.\n\n### Current Status\n- Extensive ZDT infrastructure exists in time processing modules\n- Multiple ZDT intrinsics implemented: ZDT, ZDT.FROM_EPOCH, ZDT.FIELDS, ZDT.PARSE, ZDT.FORMAT  \n- No min/max comparison functions currently exist for ZDT objects\n\n### Implementation Scope\n- Add ZDT.MIN and ZDT.MAX intrinsic functions\n- Enable comparison operations between ZDT values based on chronological ordering\n- Support for finding earliest/latest datetime in collections\n\n### Priority\nMedium - useful for date/time processing workflows\n\n### Technical Notes\n- ZDTs use chrono-tz for timezone-aware datetime handling\n- Comparison should account for timezone differences (convert to UTC for comparison)\n- Consider edge cases: different timezones, daylight saving transitions\n","status":"open","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-17T11:58:09.681845Z","created_by":"eucalypt_private/crew/koala","updated_at":"2026-01-17T12:15:04.479052Z","external_ref":"gh-51","labels":["lib"]}
{"id":"eu-u1q","title":"Block anaphora to fancy underbracket","description":"## Analysis: Block anaphora to fancy underbracket\n\n### Current State\nBlock anaphora currently uses the **bullet symbol (•)** as the \"hole\" for implicit arguments in block contexts.\n\n### Proposed Change\n**Replace bullet symbol (•) with fancy underbracket symbol** for block anaphora to:\n1. **Free up bullet symbol** for list contexts where it's more semantically appropriate\n2. **Use fancy underbracket** which may be more visually distinctive for anaphora\n\n### Implementation Scope\nThis is a **symbol replacement task** requiring updates to:\n\n#### Code Changes Needed\n1. **Lexer/Parser**: Update token recognition for anaphora symbol\n2. **AST representation**: Update symbol constants\n3. **Core expression handling**: Update anaphora processing\n4. **Error messages**: Update any error text referencing the symbol\n5. **Test files**: Update all test cases using block anaphora\n6. **Example code**: Update any embedded examples\n\n#### Documentation Changes Needed\n1. **Language documentation**: Update syntax descriptions\n2. **User guides**: Update examples and explanations\n3. **API documentation**: Update any symbol references\n4. **README/getting started**: Update introductory examples\n\n#### Files to Investigate\n- `src/syntax/lexer.rs` - token definitions\n- `src/core/anaphora.rs` - anaphora handling\n- `harness/test/031_block_anaphora.eu` - test cases\n- `docs/` directory - all documentation\n- Any hardcoded symbol constants\n\n### Benefits\n- **Better semantic alignment**: Bullet for lists, underbracket for anaphora\n- **Visual distinction**: Fancy underbracket may be more distinctive\n- **Consistency**: Aligns symbol usage with semantic meaning\n\n### Priority\nMedium - cosmetic improvement with semantic benefits\n\n### Implementation Notes\n- **Symbol choice**: Need to confirm specific fancy underbracket Unicode character\n- **Backward compatibility**: Consider migration path for existing code\n- **Testing**: Comprehensive testing of symbol recognition\n- **Documentation**: Thorough documentation update across all materials\n","status":"open","priority":4,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-17T11:58:06.078285Z","created_by":"eucalypt_private/crew/koala","updated_at":"2026-01-20T11:41:09.688926Z","external_ref":"gh-29","labels":["parse"]}
{"id":"eu-u27","title":"Digest: mol-witness-patrol","description":"Patrol 20: System quiet. No polecats, refinery running, no gates, no swarms. Deacon still NOT running. Inbox clear.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-21T11:07:21.065349Z","updated_at":"2026-01-21T18:48:28.377971Z","closed_at":"2026-01-21T11:07:21.065294Z","close_reason":"Squashed from 10 wisps"}
{"id":"eu-ubu","title":"Separate Compilation","description":"## Analysis: Separate Compilation\n\n### Goal\nInvestigate **pre-compiling eucalypt files** as separate units with a proper module system, rather than current source-level combination.\n\n### Current Limitations\n**Source-level combination has disadvantages**:\n- Recompilation of unchanged code\n- No module boundaries or encapsulation\n- Slower builds for large projects\n- Difficult to distribute libraries\n\n### Compilation Unit: Files\n**Each file as a compilation unit**:\n- File = Module = Compilation boundary\n- Clear separation between modules\n- Enable caching of compiled modules\n\n### Investigation Areas\n\n#### Module System Design\n**Research needed**:\n1. **Module interface**: How modules export/import definitions\n2. **Namespace management**: Avoiding name conflicts\n3. **Dependency tracking**: Which modules depend on which\n4. **Version handling**: Module version compatibility\n\n#### Compilation Approaches\n**Options to investigate**:\n\n**Option 1: Intermediate Representation**\n- Compile to IR that preserves module structure\n- Link IR modules before final compilation\n- Similar to LLVM IR approach\n\n**Option 2: Bytecode Modules**\n- Compile to eucalypt bytecode format\n- Runtime linking of bytecode modules\n- Relates to Issue #25 (Bytecode implementation)\n\n**Option 3: Serialized STG**\n- Compile to serialized STG representation\n- Faster than parsing but retains flexibility\n\n### Module System Considerations\n\n#### Import/Export Mechanism\n```eu\n# Explicit exports\nmodule math {\n  export: [add, multiply]  # Only these are visible\n  \n  add(x, y): x + y\n  multiply(x, y): x * y\n  helper(x): x + 1  # Private\n}\n\n# Import in another file\nimport math\nresult: math.add(2, 3)\n```\n\n#### Compilation Artifacts\n**What gets generated**:\n- Compiled module file (.euc?)\n- Module interface/signature\n- Dependency information\n- Source mapping for debugging\n\n### Benefits of Separate Compilation\n- **Faster builds**: Only recompile changed files\n- **Module distribution**: Share compiled libraries\n- **Better organization**: Clear module boundaries\n- **Incremental compilation**: Build system integration\n- **Parallel compilation**: Compile modules independently\n\n### Technical Challenges\n\n#### Lazy Evaluation\n- How to preserve laziness across module boundaries\n- Thunk representation in compiled form\n- Cross-module optimization limitations\n\n#### Type Information\n- Module signatures without full type system\n- Interface stability checking\n- Generic/polymorphic exports\n\n#### Linking\n- Runtime vs compile-time linking\n- Symbol resolution across modules\n- Handling circular dependencies\n\n### Investigation Plan\n\n1. **Survey approaches**: Research other functional language module systems\n2. **Prototype format**: Design compiled module representation\n3. **Module boundaries**: Define import/export semantics\n4. **Compilation pipeline**: Modify compiler for separate compilation\n5. **Linker design**: Module combination strategy\n6. **Performance analysis**: Measure compilation speedup\n\n### Related Issues\n- **Issue #25 (Bytecode)**: Compiled format could be bytecode\n- **Issue #11 (v2 prelude)**: Modular prelude organization\n- **Issue #24 (Symbol interning)**: Cross-module symbol handling\n\n### Open Questions\n1. **Binary compatibility**: How stable should compiled format be?\n2. **Optimization level**: Module-local vs whole-program optimization?\n3. **Distribution format**: Source + compiled or compiled only?\n4. **Build system**: Integration with standard build tools?\n5. **Debugging support**: Source maps for compiled modules?\n\n### Priority\nLow - significant investigation and design work required\n\n### Success Criteria\n- **Measurable speedup**: Faster incremental builds\n- **Module isolation**: Clear boundaries and interfaces\n- **Distribution ready**: Shareable compiled modules\n- **Backward compatible**: Existing code continues working\n","status":"open","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-17T11:58:10.545895Z","created_by":"eucalypt_private/crew/koala","updated_at":"2026-01-17T12:15:05.603853Z","external_ref":"gh-19","labels":["topic"],"dependencies":[{"issue_id":"eu-ubu","depends_on_id":"eu-b4c","type":"relates-to","created_at":"2026-01-17T11:59:48.03944Z","created_by":"eucalypt_private/crew/koala"}]}
{"id":"eu-uds","title":"Support jsonl (JSON lines) format","description":"## Analysis: Support jsonl (JSON lines) format\n\n### Requirements\nAdd support for JSON Lines format where each line contains a separate JSON object:\n```\n{\"name\": \"Alice\", \"age\": 25}\n{\"name\": \"Bob\", \"age\": 30}\n{\"name\": \"Charlie\", \"age\": 35}\n```\n\n### Implementation Approach\nAdd `jsonl` as a supported format alongside existing formats in `src/import/mod.rs`:\n\n**Current formats:**\n- `yaml`/`json` → `yaml::read_yaml()`\n- `toml` → `toml::read_toml()` \n- `csv` → `csv::read_csv()`\n- `text` → `text::read_text()`\n- `xml` → `xml::read_xml()`\n- `edn` → `edn::read_edn()`\n\n**For JSONL:**\n- Add `jsonl` case to `read_to_core()` match statement\n- Create `jsonl::read_jsonl()` function\n- Parse each line as separate JSON object using existing JSON parser\n- Return as list of objects (similar to CSV)\n\n### Usage\n```bash\neu jsonl@logfile.jsonl\neu jsonl@-  # from stdin\n```\n\n### Implementation Details\n- Read file line by line\n- Parse each line with existing JSON parser\n- Collect into list structure  \n- Static file parsing (loads whole file as list)\n\n### Priority\nHigh - useful for log processing workflows, common data format\n\n### Relationship to Other Issues\n**Related to Issue #52 (Stream List Inputs)**: \n- #48: Static JSONL file parsing (simpler, higher priority)\n- #52: General streaming/incremental processing (more complex, medium priority)\n- JSONL is primary use case for streaming, but this issue addresses basic file support first\n","status":"closed","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-17T11:58:06.641781Z","created_by":"eucalypt_private/crew/koala","updated_at":"2026-01-20T11:41:09.68943Z","closed_at":"2026-01-20T11:34:07.479822Z","external_ref":"gh-48","labels":["io"]}
{"id":"eu-uhh","title":"C String escapes via c...","description":"## Analysis: C String escapes via c\"...\" (String System Redesign)\n\n### Current State\n**Eucalypt strings are \"raw\" strings** - no C-style escape processing, which limits functionality.\n\n### Broader Context\nThis issue is part of a **comprehensive string system redesign** that includes:\n1. **C-style escapes**: \\n, \\t, \\x41, \\u0041\n2. **String formatting**: Syntax-level support \n3. **String parsing**: Convenient parsing operations\n4. **String lenses**: Likely a separate issue for structured string access\n\n**These features interact** and should be designed holistically.\n\n### String Literal Types\n\n#### Current: Raw Strings\n```eu\n# Current - no escape processing\ntext: \"Line 1\\nLine 2\"  # Literal backslash-n\n```\n\n#### Proposed: Multiple String Types\n```eu\n# Raw strings (current behavior)\nraw: r\"Line 1\\nLine 2\"  # No escape processing\n\n# C-style escaped strings  \nescaped: c\"Line 1\\nLine 2\"  # \\n becomes newline\n\n# Regular strings (new default?)\nnormal: \"Line 1\\nLine 2\"   # Escape processing\n\n# Format strings (future)\nformatted: f\"Hello {name}\"  # String interpolation\n```\n\n### C-Style Escape Sequences\n\n#### Basic Escapes\n```eu\nc\"\\n\"    # Newline\nc\"\\t\"    # Tab\nc\"\\r\"    # Carriage return\nc\"\\\\\"    # Backslash\nc\"\\\"\"    # Quote\nc\"\\0\"    # Null character\n```\n\n#### Numeric Escapes\n```eu\nc\"\\x41\"      # Hex: 'A'\nc\"\\u0041\"    # Unicode: 'A' \nc\"\\U00000041\" # Long Unicode: 'A'\nc\"\\101\"      # Octal: 'A'\n```\n\n### String System Interactions\n\n#### Formatting Integration\n```eu\n# C-strings with formatting\nmessage: c\"Error: {error}\\nFile: {file}\\n\"\n\n# Format with escapes\nformatted: message.format({error: \"Not found\", file: \"data.txt\"})\n```\n\n#### Parsing Integration\n```eu\n# Parse escaped content\ncsv_line: c\"name,\\\"John Doe\\\",age,30\\n\"\nparsed: csv_line.parse-csv()\n```\n\n#### String Lenses (Future)\n```eu\n# Structured string access (future issue)\njson_str: c\"{\\\"name\\\": \\\"Alice\\\"}\"\nname: json_str.lens.json.name  # Extract via lens\n```\n\n### Design Considerations\n\n#### Default Behavior Question\n**Should escape processing be default?**\n- **Option A**: Raw by default (current), explicit c\"...\" for escapes\n- **Option B**: Escaped by default, explicit r\"...\" for raw\n- **Option C**: New syntax entirely\n\n#### Backward Compatibility\n- **Breaking change**: If default string behavior changes\n- **Migration path**: How to update existing code\n- **Deprecation**: Gradual transition strategy\n\n#### Performance\n- **Parse time**: Escape processing overhead\n- **Runtime**: Pre-processed vs dynamic escaping\n- **Memory**: Storage of escaped vs raw strings\n\n### Related String Features\n\n#### String Interpolation\n```eu\n# Python f-string style\nname: \"Alice\"\ngreeting: f\"Hello, {name}\\!\"  # String interpolation\n\n# Or template syntax\ngreeting: \"Hello, {name}\\!\".format({name: \"Alice\"})\n```\n\n#### Multiline Strings\n```eu\n# Heredoc syntax?\ndocument: \u003c\u003cEOF\nLine 1\nLine 2 with {variable}\nEOF\n\n# Or triple quotes\ndocument: \"\"\"\nLine 1  \nLine 2\n\"\"\"\n```\n\n### Implementation Approach\n\n#### Lexer/Parser Changes\n1. **String token types**: Distinguish raw, escaped, format strings\n2. **Escape processing**: Handle escape sequences during parsing\n3. **Error handling**: Invalid escape sequences\n4. **Unicode support**: Proper Unicode escape handling\n\n#### Syntax Design\n1. **Prefix notation**: c\"...\", r\"...\", f\"...\"\n2. **Delimiter variants**: Single/double quotes, multiline\n3. **Nesting**: Escapes within format strings\n4. **Consistency**: Align with other language features\n\n### Priority\n**Medium-High** - fundamental string system affects many use cases\n\n### Design Work Required\nThis issue needs **comprehensive design** covering:\n1. **String literal syntax**: Complete syntax specification\n2. **Interaction design**: How escapes, formatting, parsing work together\n3. **Migration strategy**: Backward compatibility approach\n4. **Performance analysis**: Impact on parsing and runtime\n\n### Related Issues\n- **String lenses**: Structured string access (separate issue)\n- **String formatting**: Interpolation and templating\n- **Import/export**: Escaped strings in data formats\n- **Error messages**: Proper escape sequence errors\n\n### Questions for Resolution\n1. **Default behavior**: Raw vs escaped strings by default?\n2. **Syntax choice**: Prefix notation vs other approaches?\n3. **Feature scope**: What string features to include in redesign?\n4. **Breaking changes**: How much compatibility to maintain?\n5. **Implementation order**: Which features to implement first?\n\n### Recommendation\n**Comprehensive string system design** before implementation - this affects too many areas to implement piecemeal.\n","status":"open","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-17T11:58:10.454895Z","created_by":"eucalypt_private/crew/koala","updated_at":"2026-01-17T12:15:05.484848Z","external_ref":"gh-44","labels":["parse"],"dependencies":[{"issue_id":"eu-uhh","depends_on_id":"eu-6m3","type":"blocks","created_at":"2026-01-21T10:53:32.455474Z","created_by":"refinery"}]}
{"id":"eu-ukc","title":"Digest: mol-witness-patrol","description":"Patrol 8: Rig quiet.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-20T09:06:53.190318Z","updated_at":"2026-01-20T09:06:53.190318Z","closed_at":"2026-01-20T09:06:53.190277Z","close_reason":"Squashed from 10 wisps"}
{"id":"eu-umj","title":"Digest: mol-witness-patrol","description":"Patrol 7: Rig quiet.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-20T09:06:35.240766Z","updated_at":"2026-01-20T09:06:35.240766Z","closed_at":"2026-01-20T09:06:35.240719Z","close_reason":"Squashed from 10 wisps"}
{"id":"eu-uoh","title":"Harness test: basic __ARGS access","description":"Add harness test for basic __ARGS access","status":"open","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-20T11:17:45.853553Z","created_by":"greg","updated_at":"2026-01-20T11:17:45.853553Z","dependencies":[{"issue_id":"eu-uoh","depends_on_id":"eu-7p4","type":"blocks","created_at":"2026-01-20T11:18:55.217019Z","created_by":"greg"}]}
{"id":"eu-uwc","title":"ToSourceDoc for Literal","description":"Implement ToSourceDoc for Literal (numbers, strings, symbols).","status":"open","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-20T10:53:14.849642Z","created_by":"greg","updated_at":"2026-01-20T10:53:14.849642Z","dependencies":[{"issue_id":"eu-uwc","depends_on_id":"eu-r3h","type":"blocks","created_at":"2026-01-20T10:56:34.240307Z","created_by":"greg"}]}
{"id":"eu-v46","title":"Structured argument parsing (Phase 2)","description":"Metadata-driven argument parsing built on top of __ARGS. Supports type validation, help generation, short/long options. Example:\n\n```eu\n{\n  args: {\n    input: { type: \"string\", help: \"Input file path\" }\n    verbose: { type: \"bool\", short: \"v\", help: \"Enable verbose output\" }\n    count: { type: \"int\", default: 1 }\n  }\n}\n```\n\nDepends on Phase 1 (__ARGS basic access) being complete.","status":"open","priority":3,"issue_type":"feature","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-20T11:17:47.824996Z","created_by":"greg","updated_at":"2026-01-20T11:17:47.824996Z","dependencies":[{"issue_id":"eu-v46","depends_on_id":"eu-pj5","type":"blocks","created_at":"2026-01-20T11:19:10.590106Z","created_by":"greg"}]}
{"id":"eu-vgb","title":"Digest: mol-witness-patrol","description":"Patrol 23: System quiet. No polecats, refinery running, no gates, no swarms. Deacon still NOT running. Inbox clear.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-21T11:12:58.816482Z","updated_at":"2026-01-21T18:48:28.371266Z","closed_at":"2026-01-21T11:12:58.816425Z","close_reason":"Squashed from 10 wisps","dependencies":[{"issue_id":"eu-vgb","depends_on_id":"eu-ns3","type":"parent-child","created_at":"2026-01-21T11:12:58.817173Z","created_by":"eucalypt_private/witness"}]}
{"id":"eu-vly","title":"Shunting yard for arity 0","description":"Update shunting yard algorithm in shunt.rs to handle arity 0 operators","status":"closed","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-20T11:09:12.204752Z","created_by":"greg","updated_at":"2026-01-22T21:03:41.068408Z","closed_at":"2026-01-22T21:03:41.068408Z","close_reason":"Closed","dependencies":[{"issue_id":"eu-vly","depends_on_id":"eu-yb5","type":"blocks","created_at":"2026-01-20T11:10:14.116978Z","created_by":"greg"}]}
{"id":"eu-vqj","title":"Add ↑ operator documentation metadata","description":"Add documentation metadata for the ↑ operator in prelude","status":"open","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-20T11:27:53.728276Z","created_by":"greg","updated_at":"2026-01-20T11:27:53.728276Z","dependencies":[{"issue_id":"eu-vqj","depends_on_id":"eu-2b4","type":"blocks","created_at":"2026-01-20T11:28:08.971959Z","created_by":"greg"}]}
{"id":"eu-vsq","title":"Update harness tests with formatted examples","description":"Update harness tests or examples showing properly formatted eucalypt code style.","status":"open","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-20T10:53:58.262618Z","created_by":"greg","updated_at":"2026-01-20T10:53:58.262618Z","dependencies":[{"issue_id":"eu-vsq","depends_on_id":"eu-1pd","type":"blocks","created_at":"2026-01-20T10:59:00.29654Z","created_by":"greg"}]}
{"id":"eu-vzi","title":"Eucalypt on Windows","description":"## Analysis: Eucalypt on Windows\n\n### Goal\nEnsure **Windows compatibility** for eucalypt, including path handling, OS facilities, and package distribution.\n\n### Current State\n**Investigation needed**: Does eucalypt currently build and run on Windows?\n\n### Windows Compatibility Areas\n\n#### 1. Path Handling\n**Cross-platform path support**:\n- **Path separators**: Unix `/` vs Windows `\\`\n- **Drive letters**: `C:\\` vs Unix absolute paths\n- **Case sensitivity**: Windows case-insensitive filesystem\n- **Reserved names**: `CON`, `PRN`, `NUL` etc.\n- **Long paths**: Windows path length limitations\n\n#### 2. File System Operations\n- **Line endings**: `\\n` vs `\\r\\n`\n- **File permissions**: Different permission models\n- **File locking**: Windows exclusive locks vs Unix advisory\n- **Symlinks**: Windows symlink support and permissions\n\n#### 3. Process and Environment\n- **Environment variables**: Case handling differences\n- **Process spawning**: Different APIs and behavior\n- **Signal handling**: Windows signals vs Unix signals\n- **Shell integration**: cmd.exe vs PowerShell vs Unix shells\n\n### Implementation Requirements\n\n#### Rust Standard Library Usage\n**Use cross-platform APIs**:\n```rust\n// Good - cross-platform\nuse std::path::{Path, PathBuf};\nuse std::env;\n\n// Avoid - Unix-specific\nuse std::os::unix::fs::PermissionsExt;\n```\n\n#### Path Handling\n```rust\n// Use PathBuf for all path operations\nlet config_path = PathBuf::from(config_dir).join(\"eucalypt.yaml\");\n\n// Normalize path separators\nlet canonical = path.canonicalize()?;\n```\n\n#### Environment Variables\n```rust\n// Case-insensitive on Windows\nlet home = env::var(\"HOME\").or_else(|_| env::var(\"USERPROFILE\"))?;\n```\n\n### Testing Strategy\n\n#### CI/CD Integration\n- **GitHub Actions**: Test on Windows runners\n- **Cross-compilation**: Build Windows binaries on Linux\n- **Multiple Windows versions**: Test on different Windows versions\n\n#### Manual Testing\n- **Path edge cases**: Long paths, Unicode, special characters\n- **File operations**: Create, read, write, delete\n- **Error handling**: Windows-specific error codes\n\n### Package Distribution\n\n#### Windows Package Formats\n**Investigation needed**:\n- **MSI installer**: Windows Installer package\n- **Chocolatey**: Windows package manager\n- **Scoop**: Command-line installer\n- **WinGet**: Microsoft's package manager\n- **Portable**: Standalone executable\n\n#### Installation Experience\n- **PATH management**: Add eucalypt to system PATH\n- **File associations**: Associate `.eu` files with eucalypt\n- **Uninstaller**: Clean removal process\n- **Upgrades**: In-place upgrade capability\n\n### Potential Issues to Address\n\n#### Common Windows Problems\n1. **Antivirus interference**: False positives for new executables\n2. **UAC prompts**: User Account Control considerations\n3. **Registry usage**: Minimal or no registry dependencies\n4. **DLL dependencies**: Statically linked or bundled dependencies\n\n#### Developer Experience\n- **Build environment**: Instructions for Windows development\n- **IDE integration**: Visual Studio Code, Visual Studio\n- **PowerShell**: Native PowerShell experience\n- **Windows Terminal**: Good terminal integration\n\n### Investigation Tasks\n\n#### Compatibility Assessment\n1. **Current build status**: Does `cargo build` work on Windows?\n2. **Test suite**: Do existing tests pass on Windows?\n3. **File I/O**: Are there Windows-specific failures?\n4. **Path handling**: Test various Windows path scenarios\n\n#### Feature Gaps\n1. **Missing functionality**: What doesn't work on Windows?\n2. **Performance**: Are there Windows-specific performance issues?\n3. **Error messages**: Windows-appropriate error text\n4. **Documentation**: Windows-specific setup instructions\n\n### Priority\nLow - platform compatibility important but not urgent\n\n### Implementation Plan\n1. **Assessment phase**: Test current Windows compatibility\n2. **Fix critical issues**: Address basic functionality problems\n3. **Path normalization**: Ensure cross-platform path handling\n4. **CI integration**: Add Windows testing\n5. **Package creation**: Build Windows distribution\n6. **Documentation**: Windows setup and usage guide\n\n### Success Criteria\n- **Clean builds**: Eucalypt builds without errors on Windows\n- **Test suite passes**: All tests work on Windows\n- **File operations work**: Import/export on Windows filesystems\n- **Easy installation**: Simple Windows installation process\n- **Good documentation**: Clear Windows setup instructions\n\n### Related Considerations\n- **Cross-compilation**: Building Windows binaries from other platforms\n- **Unicode support**: Proper Unicode handling on Windows\n- **Shell escaping**: Proper command-line argument handling\n- **Long path support**: Windows 10+ long path feature\n","status":"open","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-17T11:58:10.636093Z","created_by":"eucalypt_private/crew/koala","updated_at":"2026-01-17T12:15:05.721894Z","external_ref":"gh-33","labels":["os"]}
{"id":"eu-vzv","title":"Benchmark text pipelines","description":"## Analysis: Benchmark text pipelines\n\n### Problem Statement\nSlow execution times experienced with log processing workloads that are text and regex heavy.\n\n### Benchmarking Scope\n**All text processing operations**, including:\n\n#### Core Text Operations\n- String interpolation and template rendering\n- String manipulation functions (split, join, replace, etc.)\n- Text concatenation and formatting\n- Regular expression operations (match, replace, search)\n\n#### Import/Export Operations  \n- Text file import (`text@file`)\n- Large text file processing\n- Text output rendering and formatting\n- Multi-format text conversion\n\n#### Log Processing Workflows\n- Line-by-line text processing\n- Pattern matching and extraction\n- Text transformation pipelines\n- Regex-heavy operations (primary performance concern)\n\n### Current Infrastructure\n- Existing benchmark framework in `benches/` directory\n- Need to identify current benchmark coverage for text operations\n- Extend with comprehensive text pipeline benchmarks\n\n### Performance Focus\n**Optimization-focused** (rather than just regression detection):\n1. **Identify bottlenecks** in text processing workflows\n2. **Measure regex performance** impact\n3. **Profile memory usage** for large text operations\n4. **Benchmark real-world** log processing scenarios\n\n### Implementation Plan\n1. **Audit existing benchmarks** for text operation coverage\n2. **Create realistic workloads** based on log processing use cases\n3. **Add regex-heavy benchmarks** (match, replace, complex patterns)\n4. **Benchmark large file processing** (memory and time)\n5. **Profile optimization opportunities** in hot paths\n\n### Benefits\n- **Performance optimization** for text-heavy workloads\n- **Regression prevention** for text operations\n- **Guided optimization** based on real bottlenecks\n- **Log processing improvements** addressing current pain points\n\n### Priority\nLow-Medium - performance optimization for specific use case\n\n### Success Criteria\n- **Measurable improvements** in log processing performance\n- **Comprehensive coverage** of text operations\n- **Actionable insights** for optimization work\n","status":"open","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-17T11:58:08.318112Z","created_by":"eucalypt_private/crew/koala","updated_at":"2026-01-17T12:15:03.085993Z","external_ref":"gh-28","labels":["perf"]}
{"id":"eu-w68","title":"Memory management unsafe code lacks safety documentation","description":"The eval/memory module contains 132 unsafe blocks across 20 files implementing a custom garbage collector (Immix-style).\n\n**Files with highest unsafe usage:**\n- src/eval/memory/heap.rs: 47 unsafe blocks\n- src/core/expr.rs: 27 unsafe blocks  \n- src/eval/memory/array.rs: 8 unsafe blocks\n\n**Current state:** The unsafe code appears correct but lacks comprehensive SAFETY comments explaining invariants.\n\n**Recommendation:**\n1. Add SAFETY comments documenting invariants for each unsafe block\n2. Consider extracting unsafe primitives into separate well-documented module\n3. Add property-based tests for memory safety guarantees","status":"open","priority":3,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-20T15:49:29.064382Z","created_by":"eucalypt_private/polecats/obsidian","updated_at":"2026-01-21T18:48:28.38837Z","labels":["documentation","safety"]}
{"id":"eu-whm","title":"Slicker release process","description":"The process of releasing is very manual. It *should be* manual to review release notes and turn release from draft to published but the process of calculating a SHA and updating the brew formula in the curvelogic/homebrew-tap repository should not be manual. Research how we can automate that.\n","status":"closed","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-17T11:58:05.796008Z","created_by":"eucalypt_private/crew/koala","updated_at":"2026-01-17T11:58:05.894823Z","closed_at":"2026-01-17T11:58:05.894825Z","external_ref":"gh-63"}
{"id":"eu-x1g","title":"Update operators documentation","description":"Update operators documentation with ↑ tight head operator","status":"open","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-20T11:27:55.635256Z","created_by":"greg","updated_at":"2026-01-20T11:27:55.635256Z","dependencies":[{"issue_id":"eu-x1g","depends_on_id":"eu-8k1","type":"blocks","created_at":"2026-01-20T11:28:09.489159Z","created_by":"greg"}]}
{"id":"eu-x4w","title":"Digest: mol-refinery-patrol","description":"Patrol: queue empty, no branches to process","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-21T10:57:30.157937Z","updated_at":"2026-01-21T18:48:28.396558Z","closed_at":"2026-01-21T10:57:30.157891Z","close_reason":"Squashed from 11 wisps","dependencies":[{"issue_id":"eu-x4w","depends_on_id":"eu-pf6","type":"parent-child","created_at":"2026-01-21T10:57:30.158639Z","created_by":"eucalypt_private/refinery"}]}
{"id":"eu-xd2","title":"Integer underflow in single-line length check","description":"In src/syntax/export/format.rs:238 and :303:\n```rust\nlet can_single_line = single_line_len \u003c= self.config.line_width - 10\n```\n\nIf line_width \u003c 10, this underflows to a very large number (usize wraps), causing ALL blocks/lists to be single-lined.\n\n**Impact:** Incorrect formatting output with narrow line widths.\n\n**Fix:** Use saturating subtraction: `line_width.saturating_sub(10)`\n\n**Source:** Correctness Review hq-leg-az4n6","status":"closed","priority":1,"issue_type":"bug","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-21T12:27:10.773981Z","created_by":"mayor","updated_at":"2026-01-21T14:02:17.091874Z","closed_at":"2026-01-21T14:02:17.091874Z","close_reason":"Changed line_width - 10 to line_width.saturating_sub(10) at lines 238 and 303 to prevent integer underflow with narrow line widths."}
{"id":"eu-xg2","title":"Digest: mol-witness-patrol","description":"Patrol 11: Rig quiet.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-20T09:07:48.721479Z","updated_at":"2026-01-20T09:07:48.721479Z","closed_at":"2026-01-20T09:07:48.721436Z","close_reason":"Squashed from 10 wisps"}
{"id":"eu-xjv","title":"Harness test: basic nullary operator","description":"Add harness test for basic nullary operator declaration and use","status":"closed","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-20T11:09:12.922381Z","created_by":"greg","updated_at":"2026-01-22T21:03:41.600937Z","closed_at":"2026-01-22T21:03:41.600937Z","close_reason":"Closed","dependencies":[{"issue_id":"eu-xjv","depends_on_id":"eu-5go","type":"blocks","created_at":"2026-01-20T11:10:49.127887Z","created_by":"greg"}]}
{"id":"eu-xy8","title":"Linear search for block key lookup","description":"In src/eval/stg/block.rs:462-491, the LookupOr intrinsic (block field access) performs linear search through key-value pairs. For blocks with many fields, this is O(n) per access. Repeated lookups compound to O(n*m).\n\n**Impact:** Slow field access on large blocks in data transformation pipelines.\n\n**Fix:** Use hash map for blocks above threshold, or sorted representation with binary search.\n\n**Source:** Performance Review hq-leg-om5os","status":"closed","priority":1,"issue_type":"feature","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-21T12:28:00.5136Z","created_by":"mayor","updated_at":"2026-01-21T14:08:37.026062Z","closed_at":"2026-01-21T14:08:37.026062Z","close_reason":"Requires architectural decision: Blocks are currently linked lists of key-value pairs throughout the codebase. Changing to hash-indexed storage would require coordinated changes across block construction, comparison, rendering, and all intrinsics. Consider creating a separate design ticket for block representation optimization.","labels":["performance"]}
{"id":"eu-yb5","title":"Distributor for nullary operators","description":"Update Distributor in fixity.rs to handle nullary operator metadata","status":"closed","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-20T11:09:11.4836Z","created_by":"greg","updated_at":"2026-01-22T21:03:40.871084Z","closed_at":"2026-01-22T21:03:40.871084Z","close_reason":"Closed","dependencies":[{"issue_id":"eu-yb5","depends_on_id":"eu-7ml","type":"blocks","created_at":"2026-01-20T11:10:13.854275Z","created_by":"greg"}]}
{"id":"eu-ybn","title":"Round-trip tests","description":"Create round-trip tests: format then parse, verify AST equivalence.","status":"open","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-20T10:53:52.178607Z","created_by":"greg","updated_at":"2026-01-20T10:53:52.178607Z","dependencies":[{"issue_id":"eu-ybn","depends_on_id":"eu-fq7","type":"blocks","created_at":"2026-01-20T10:58:41.467353Z","created_by":"greg"}]}
{"id":"eu-z0l","title":"XPath style searching","description":"## Analysis: XPath style searching\n\n### Problem Statement\n**Tedious to specify full paths** when identifying elements in deeply nested JSON documents. Need more convenient way to search for deeply nested content.\n\n### Proposed Solution\n**XPath-style shortcuts** and **CSS-style searching** for nested data:\n\n#### XPath-style Examples\n```eu\n# Current (tedious)\ndoc.level1.level2.level3.target\n\n# Proposed XPath-style  \ndoc//target           # Find 'target' at any depth\ndoc//items//name      # Find all 'name' fields under any 'items'\ndoc/*/config          # Wildcard for single level\n```\n\n#### CSS-style Examples\n```eu\ndoc find(\".class\")     # CSS class-style selector\ndoc find(\"#id\")        # CSS id-style selector  \ndoc find(\"items name\") # Descendant selector\n```\n\n### Implementation Approach\n**Library function with potential built-in support**:\n\n#### Core Functions\n- `find(path)` - Find all matching elements\n- `find-first(path)` - Find first match only\n- `find-values(path)` - Extract just the values\n- `find-paths(path)` - Return full paths to matches\n\n#### Query Syntax Support\n- `//` - Descendant at any depth\n- `/` - Direct child\n- `*` - Wildcard for single level\n- `**` - Wildcard for any depth\n- `[predicate]` - Filter conditions\n\n### Use Cases\n- **API responses**: Navigate complex JSON from REST APIs\n- **Configuration files**: Find settings in nested config\n- **Data extraction**: Pull specific fields from documents\n- **Data transformation**: Transform nested structures\n\n### Benefits\n- **Convenience**: Much less verbose than full paths\n- **Flexibility**: Find elements regardless of depth\n- **Productivity**: Faster data exploration and extraction\n- **Familiarity**: XPath/CSS patterns well-known\n\n### Priority\nHigh - significant usability improvement for common use case\n\n### Technical Considerations\n\n#### Implementation Options\n1. **Pure library**: Implement entirely in eucalypt\n2. **Built-in support**: Add intrinsics for performance\n3. **Syntax sugar**: Special syntax for common patterns\n\n#### Performance\n- **Indexing**: Consider indexing for repeated searches\n- **Lazy evaluation**: Return results as needed\n- **Optimization**: Fast path for simple queries\n\n#### Integration\n- **Error handling**: What if path not found?\n- **Type preservation**: Maintain types through search\n- **Metadata**: Preserve metadata on found elements\n\n### Example API\n```eu\n# Find all prices in document\nprices: doc find(\"//price\")\n\n# Find first matching user\nuser: doc find-first(\"//users[name='Alice']\")\n\n# Get all names at any depth\nnames: doc find-values(\"//name\")\n```\n","status":"open","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-17T11:58:07.431667Z","created_by":"eucalypt_private/crew/koala","updated_at":"2026-01-17T11:58:07.431667Z","external_ref":"gh-13","labels":["lib"]}
{"id":"eu-z9y","title":"Harness test: empty args","description":"Add test for empty args when no -- provided","status":"open","priority":2,"issue_type":"task","owner":"162815+gmorpheme@users.noreply.github.com","created_at":"2026-01-20T11:17:46.248745Z","created_by":"greg","updated_at":"2026-01-20T11:17:46.248745Z","dependencies":[{"issue_id":"eu-z9y","depends_on_id":"eu-7p4","type":"blocks","created_at":"2026-01-20T11:18:55.353462Z","created_by":"greg"}]}
